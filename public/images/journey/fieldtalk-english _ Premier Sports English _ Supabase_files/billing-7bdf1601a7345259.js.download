try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},a=(new e.Error).stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="f93d7a00-e1b8-414b-9a8c-4225fb5b900e",e._sentryDebugIdIdentifier="sentry-dbid-f93d7a00-e1b8-414b-9a8c-4225fb5b900e")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6266,9522],{1386:(e,a,t)=>{"use strict";t.d(a,{O:()=>i,h:()=>l});var n=t(80263),s=t(53239),r=t(80127);let l=(0,s.forwardRef)((e,a)=>(0,n.jsx)("nav",{ref:a,dir:"ltr",...e,className:(0,r.cn)("border-b",e.className),children:(0,n.jsx)("ul",{role:"menu",className:"flex gap-5",children:e.children})})),i=(0,s.forwardRef)((e,a)=>{let{children:t,className:s,active:l,...i}=e;return(0,n.jsx)("li",{ref:a,"aria-selected":l?"true":"false","data-state":l?"active":"inactive",className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap text-sm ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-foreground text-foreground-lighter hover:text-foreground data-[state=active]:border-foreground border-b-2 border-transparent *:py-1.5",s),...i,children:t})})},5648:(e,a,t)=>{"use strict";t.d(a,{U:()=>s,x:()=>n});let n=.8,s=[{value:"I was just exploring, or it was a hobby/student project."},{value:"I was not satisfied with the customer support I received.",label:"Could you tell us more about your experience with our support team?"},{value:"Supabase is missing a specific feature I need.",label:"What specific feature(s) are we missing?"},{value:"I found it difficult to use or build with.",label:"What specific parts of Supabase did you find difficult or frustrating?"},{value:"Performance or reliability insufficient.",label:"Could you tell us more about the specific issues you encountered (e.g., UI bugs, API latency, downtime)?"},{value:"My project was cancelled or put on hold."},{value:"Too expensive",label:"We appreciate your perspective on our pricing, what aspects of the cost felt too high?"},{value:"The pricing is unpredictable and hard to budget for.",label:"Which aspects of our pricing model made it difficult for you to predict your monthly costs?"},{value:"My company went out of business or was acquired."},{value:"I lost trust in the company or its future direction.",label:"Building and maintaining your trust is our highest priority, could you please share the specific event or reason that led to this loss of trust?"}]},6852:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});let n=(0,t(81915).A)("CircleMinus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]])},14523:(e,a,t)=>{"use strict";t.d(a,{N:()=>d});var n=t(32144),s=t(80251),r=t(73969),l=t(70938),i=t(6042);async function o(e){let{slug:a,name:t,billing_email:n,opt_in_tags:s,additional_billing_emails:r}=e,i={};t&&(i.name=t),n&&(i.billing_email=n),s&&(i.opt_in_tags=s),r&&(i.additional_billing_emails=r);let{data:o,error:d}=await (0,l.F6)("/platform/organizations/{slug}",{params:{path:{slug:a}},body:i});return d&&(0,l.H4)(d),o}let d=function(){let{onSuccess:e,onError:a,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,n.jE)();return(0,s.n)(e=>o(e),{async onSuccess(a,t,n){l.setQueriesData({queryKey:i.O.list(),exact:!0},e=>e?e.map(e=>e.slug!==t.slug?e:{...e,name:t.name||e.name,billing_email:t.billing_email||e.billing_email,opt_in_tags:t.opt_in_tags||e.opt_in_tags}):e),l.setQueriesData({queryKey:i.O.customerProfile(a.slug),exact:!0},e=>e?{...e,additional_emails:t.additional_billing_emails||e.additional_emails}:e),l.setQueriesData({queryKey:i.O.detail(a.slug),exact:!0},e=>e?{...e,name:t.name||e.name,billing_email:t.billing_email||e.billing_email,opt_in_tags:t.opt_in_tags||e.opt_in_tags}:e),await (null==e?void 0:e(a,t,n))},async onError(e,t,n){void 0===a?r.oR.error("Failed to update organization: ".concat(e.message)):a(e,t,n)},...t})}},17085:(e,a,t)=>{"use strict";t.d(a,{H:()=>l,w:()=>r});var n=t(87494),s=function(e,a,t){if(e&&"reportValidity"in e){var s=(0,n.Jt)(t,a);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},r=function(e,a){var t=function(t){var n=a.fields[t];n&&n.ref&&"reportValidity"in n.ref?s(n.ref,t,e):n.refs&&n.refs.forEach(function(a){return s(a,t,e)})};for(var n in a.fields)t(n)},l=function(e,a){a.shouldUseNativeValidation&&r(e,a);var t={};for(var s in e){var l=(0,n.Jt)(a.fields,s),d=Object.assign(e[s]||{},{ref:l&&l.ref});if(o(a.names||Object.keys(e),s)){var c=Object.assign({},i((0,n.Jt)(t,s)));(0,n.hZ)(c,"root",d),(0,n.hZ)(t,s,c)}else(0,n.hZ)(t,s,d)}return t},i=function(e){return Array.isArray(e)?e.filter(Boolean):[]},o=function(e,a){return e.some(function(e){return e.startsWith(a+".")})}},20835:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});let n=(0,t(81915).A)("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]])},22442:(e,a,t)=>{var n=t(19773),s=t(33312),r=t(22363);e.exports=function(e){return"string"==typeof e||!s(e)&&r(e)&&"[object String]"==n(e)}},24600:(e,a,t)=>{"use strict";t.d(a,{I:()=>r});var n=t(80263),s=t(22554);let r=e=>{let{form:a,hasChanges:t,handleReset:r,helper:l,disabled:i=!1,isSubmitting:o,submitText:d="Save"}=e,c=o||i||!t&&void 0!==t;return(0,n.jsxs)("div",{className:["flex w-full items-center gap-2",l?"justify-between":"justify-end"].join(" "),"data-sentry-component":"FormActions","data-sentry-source-file":"FormActions.tsx",children:[l&&(0,n.jsx)("span",{className:"text-sm text-foreground-lighter",children:l}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(s.$,{disabled:c,type:"default",htmlType:"reset",onClick:()=>r(),"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:"Cancel"}),(0,n.jsx)(s.$,{form:a,type:"primary",htmlType:"submit",disabled:c,loading:o,"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:d})]})]})}},26140:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>i});var n=t(80263),s=t(90709);t(53239);var r=t(92413);let l=e=>{let{open:a,children:t,className:r,...l}=e;return(0,n.jsx)(s.bL,{asChild:l.asChild,defaultOpen:l.defaultOpen,open:a,onOpenChange:l.onOpenChange,disabled:l.disabled,className:r,"data-sentry-element":"RadixCollapsible.Root","data-sentry-component":"Collapsible","data-sentry-source-file":"Collapsible.tsx",children:t})};l.Trigger=function(e){let{children:a,asChild:t}=e;return(0,n.jsx)(s.l9,{asChild:t,"data-sentry-element":"RadixCollapsible.Trigger","data-sentry-component":"Trigger","data-sentry-source-file":"Collapsible.tsx",children:a})},l.Content=function(e){let{asChild:a,children:t,className:l}=e,i=(0,r.A)("collapsible");return(0,n.jsx)(s.UC,{asChild:a,className:[i.content,l].join(" "),"data-sentry-element":"RadixCollapsible.Content","data-sentry-component":"Content","data-sentry-source-file":"Collapsible.tsx",children:t})};let i=l},29562:(e,a,t)=>{"use strict";t.d(a,{H:()=>j});var n=t(80263),s=t(79279),r=t(37055),l=t(53239),i=t(80127),o=t(20704),d=t(77376),c=t(94198);let u=(0,s.F)("relative grid gap-10",{variants:{size:{tiny:"text-xs",small:"text-sm leading-4",medium:"text-sm",large:"text-base",xlarge:"text-base"},align:{left:"",right:""},responsive:{true:"",false:""},layout:{horizontal:"flex flex-col gap-2 md:grid md:grid-cols-12",vertical:"flex flex-col gap-2",flex:"flex flex-row gap-3","flex-row-reverse":"flex flex-row gap-6 flex-row-reverse justify-between"},flex:{true:"",false:""}},compoundVariants:[{layout:"flex",align:"right",className:"justify-between"},{layout:"flex-row-reverse",align:"right",className:"justify-between"}],defaultVariants:{}}),m=(0,s.F)("transition-all duration-500 ease-in-out",{variants:{flex:{true:"",false:""},align:{left:"",right:""},layout:{horizontal:"flex flex-col gap-2 col-span-4",vertical:"flex flex-row gap-2 justify-between",flex:"flex flex-col gap-0","flex-row-reverse":"flex flex-col"},labelLayout:{horizontal:"",vertical:"","":""}},compoundVariants:[{flex:!0,align:"left",className:"order-2"},{flex:!0,align:"right",className:"order-1"},{layout:["vertical","flex"],labelLayout:void 0,flex:!1,className:"flex flex-row gap-2 justify-between"},{layout:"horizontal",className:"flex flex-col gap-2"}],defaultVariants:{}}),p=(0,s.F)("transition-all duration-500 ease-in-out",{variants:{flex:{true:"",false:""},align:{left:"order-1",right:"order-2"},layout:{horizontal:"",vertical:"",flex:"","flex-row-reverse":""}},compoundVariants:[{flex:!0,align:"left",className:"order-1"},{flex:!0,align:"right",className:"order-2"},{layout:["vertical","flex"],className:"col-span-12"},{layout:"horizontal",align:"left",className:"col-span-8"},{layout:"horizontal",align:"right",className:"text-right"}],defaultVariants:{}}),x=(0,s.F)("text-foreground-lighter leading-normal",{variants:{size:{...c.SK.text},layout:{vertical:"mt-2",horizontal:"mt-2",flex:"","flex-row-reverse":""}},defaultVariants:{}}),h=(0,s.F)("text-foreground-muted",{variants:{size:{...c.SK.text}},defaultVariants:{}}),g=(0,s.F)("text-foreground-muted",{variants:{size:{...c.SK.text}},defaultVariants:{}}),f=(0,s.F)("text-foreground-muted",{variants:{size:{...c.SK.text}},defaultVariants:{}}),y=(0,s.F)("",{variants:{flex:{true:"",false:""},align:{left:"",right:""},layout:{horizontal:"",vertical:"",flex:"","flex-row-reverse":""}},compoundVariants:[{flex:!0,align:"left",className:""},{flex:!0,align:"right",className:"order-last"},{layout:"flex-row-reverse",className:"flex flex-col justify-center items-end shrink-0"}]}),v=(0,s.F)("",{variants:{nonBoxInput:{true:"",false:""},label:{true:"",false:""},layout:{vertical:"",horizontal:"","flex-row-reverse":""}},compoundVariants:[{nonBoxInput:!0,label:!0,layout:"vertical",className:"my-3"},{nonBoxInput:!0,label:!0,layout:"horizontal",className:"my-3 md:mt-0 mb-3"}],defaultVariants:{}}),j=l.forwardRef((e,a)=>{let{align:t="left",className:s,description:l,id:c,label:j,labelOptional:b,layout:N="vertical",style:w,labelLayout:C,size:S="medium",beforeLabel:_,afterLabel:A,nonBoxInput:M=!j,hideMessage:I=!1,isReactForm:k,...P}=e,E="flex"===N||"flex-row-reverse"===N,L=!!(j||_||A),T=k&&!I&&(0,n.jsx)(r.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeInOut"},className:(0,i.cn)("flex-row-reverse"===N?"mt-0":"mt-2"),children:(0,n.jsx)(o.C5,{className:(0,i.cn)("mt-2 transition-opacity duration-300 ease-in-out","flex-row-reverse"===N&&"mt-0"),"data-formlayout-id":"message"})}),F=l&&k?(0,n.jsx)(o.Rr,{className:(0,i.cn)(x({size:S,layout:N})),"data-formlayout-id":"description",id:"".concat(c,"-description"),children:l}):l?(0,n.jsx)("p",{className:(0,i.cn)(x({size:S,layout:N}),"text-sm text-foreground-light"),"data-formlayout-id":"description",children:l}):null,R=()=>(0,n.jsxs)(n.Fragment,{children:[_&&(0,n.jsx)("span",{className:(0,i.cn)(h({size:S})),id:c+"-before","data-formlayout-id":"beforeLabel",children:(0,n.jsx)("span",{children:_})}),(0,n.jsx)("span",{children:j}),A&&(0,n.jsx)("span",{className:(0,i.cn)(g({size:S})),id:c+"-after","data-formlayout-id":"afterLabel",children:A})]});return(0,n.jsxs)("div",{ref:a,...P,className:(0,i.cn)(u({size:S,flex:E,align:t,layout:N}),s),children:[E&&(0,n.jsxs)("div",{className:(0,i.cn)(y({flex:E,align:t,layout:N})),children:[P.children,"flex-row-reverse"===N&&T]}),L||b||"horizontal"===N?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:(0,i.cn)(m({align:t,labelLayout:C,flex:E,layout:N})),"data-formlayout-id":"labelContainer",children:[L&&k?(0,n.jsx)(o.lR,{className:"text-foreground flex gap-2 items-center break-all","data-formlayout-id":"formLabel",htmlFor:P.name||c,children:(0,n.jsx)(R,{})}):(0,n.jsx)(d.J,{className:"text-foreground flex gap-2 items-center break-all leading-normal","data-formlayout-id":"label",htmlFor:P.name||c,children:(0,n.jsx)(R,{})}),b&&(0,n.jsx)("span",{className:(0,i.cn)(f({size:S})),id:c+"-optional","data-formlayout-id":"labelOptional",children:b}),E&&(0,n.jsxs)(n.Fragment,{children:[F,"flex-row-reverse"!==N&&T]})]})}):null,!E&&(0,n.jsx)("div",{className:(0,i.cn)(p({align:t,layout:N})),style:w,"data-formlayout-id":"dataContainer",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:(0,i.cn)(v({nonBoxInput:M,label:j,layout:N})),"data-formlayout-id":"nonBoxInputContainer",children:P.children}),T,F]})})]})})},30069:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var n=t(80263);t(53239);var s=t(92413),r=t(80127);function l(e){let{icon:a,className:t,size:l}=e,i=(0,s.A)("inputIconContainer");return(0,n.jsx)("div",{className:(0,r.cn)(i.base,i.size[l],t),"data-sentry-component":"InputIconContainer","data-sentry-source-file":"InputIconContainer.tsx",children:a})}},32981:(e,a,t)=>{"use strict";t.d(a,{u:()=>l});var n=t(87494),s=t(17085),r=function(e,a){for(var t={};e.length;){var s=e[0],r=s.code,l=s.message,i=s.path.join(".");if(!t[i])if("unionErrors"in s){var o=s.unionErrors[0].errors[0];t[i]={message:o.message,type:o.code}}else t[i]={message:l,type:r};if("unionErrors"in s&&s.unionErrors.forEach(function(a){return a.errors.forEach(function(a){return e.push(a)})}),a){var d=t[i].types,c=d&&d[s.code];t[i]=(0,n.Gb)(i,a,t,r,c?[].concat(c,s.message):s.message)}e.shift()}return t},l=function(e,a,t){return void 0===t&&(t={}),function(n,l,i){try{return Promise.resolve(function(r,l){try{var o=Promise.resolve(e["sync"===t.mode?"parse":"parseAsync"](n,a)).then(function(e){return i.shouldUseNativeValidation&&(0,s.w)({},i),{errors:{},values:t.raw?n:e}})}catch(e){return l(e)}return o&&o.then?o.then(void 0,l):o}(0,function(e){if(null!=e.errors)return{values:{},errors:(0,s.H)(r(e.errors,!i.shouldUseNativeValidation&&"all"===i.criteriaMode),i)};throw e}))}catch(e){return Promise.reject(e)}}}},35485:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});let n=(0,t(81915).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},36152:(e,a,t)=>{"use strict";t.d(a,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>i,wL:()=>u});var n=t(80263),s=t(53239),r=t(80127);let l=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:a,className:(0,r.cn)("overflow-hidden rounded-lg border bg-surface-100 text-card-foreground shadow-sm",t),...s})});l.displayName="Card";let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 py-4 px-6 border-b",t),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("h3",{ref:a,className:(0,r.cn)("text-xs font-mono uppercase",t),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("p",{ref:a,className:(0,r.cn)("text-sm text-foreground-muted",t),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:a,className:(0,r.cn)("py-4 px-6 border-b last:border-none",t),...s})});c.displayName="CardContent";let u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:a,className:(0,r.cn)(" flex items-center py-4 px-6",t),...s})});u.displayName="CardFooter"},37253:(e,a,t)=>{var n=t(48550),s=t(92479),r=t(50084);e.exports=s(function(e,a){return r(e)?n(e,a):[]})},38918:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});let n=(0,t(81915).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},40293:(e,a,t)=>{var n=t(3733),s=t(64190);e.exports=function e(a,t,r,l,i){var o=-1,d=a.length;for(r||(r=s),i||(i=[]);++o<d;){var c=a[o];t>0&&r(c)?t>1?e(c,t-1,r,l,i):n(i,c):l||(i[i.length]=c)}return i}},40461:(e,a,t)=>{"use strict";t.d(a,{A:()=>u});var n=t(80263),s=t(93749),r=t.n(s),l=t(46491),i=t(67908);let o=()=>{let e=(0,i.useRouter)();return e.isReady?e.asPath.split("?")[0]:""};var d=t(1386),c=t(95142);let u=function(e){let{children:a}=e,{slug:t}=(0,l.g)(),[s]=o().split("#");return s==="/org/".concat(t,"/team")||s==="/org/".concat(t,"/integrations")||s==="/org/".concat(t,"/usage")||s==="/org/".concat(t,"/billing")?a:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.Vw,{className:"mb-0","data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"OrganizationSettingsLayout.tsx",children:[(0,n.jsx)(c.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"OrganizationSettingsLayout.tsx",children:"Organization Settings"}),(0,n.jsx)(d.h,{className:"overflow-x-auto","aria-label":"Organization menu navigation","data-sentry-element":"NavMenu","data-sentry-source-file":"OrganizationSettingsLayout.tsx",children:[{label:"General",href:"/org/".concat(t,"/general")},{label:"Security",href:"/org/".concat(t,"/security")},{label:"OAuth Apps",href:"/org/".concat(t,"/apps")},{label:"SSO",href:"/org/".concat(t,"/sso")},{label:"Audit Logs",href:"/org/".concat(t,"/audit")},{label:"Legal Documents",href:"/org/".concat(t,"/documents")}].filter(Boolean).map(e=>(0,n.jsx)(d.O,{active:s===e.href,children:(0,n.jsx)(r(),{href:e.href,children:e.label})},e.label))})]}),(0,n.jsx)("main",{className:"h-full w-full overflow-y-auto",children:a})]})}},41336:(e,a,t)=>{"use strict";t.d(a,{F:()=>m});var n=t(80263),s=t(53239),r=t(92413),l=t(20835),i=t(80551),o=t(92818),d=t(80797),c=t(36839);let u={danger:(0,n.jsx)(l.A,{strokeWidth:1.5,size:18}),success:(0,n.jsx)(i.A,{strokeWidth:1.5,size:18}),warning:(0,n.jsx)(o.A,{strokeWidth:1.5,size:18}),info:(0,n.jsx)(d.A,{strokeWidth:1.5,size:18}),neutral:(0,n.jsx)(n.Fragment,{})};function m(e){let{variant:a="neutral",className:t,title:l,withIcon:i,closable:o,children:d,icon:m,actions:p}=e,x=(0,r.A)("alert"),[h,g]=(0,s.useState)(!0),f=[x.base];f.push(x.variant[a].base),t&&f.push(t);let y=[x.description,x.variant[a].description],v=[x.close];return(0,n.jsx)(n.Fragment,{children:h&&(0,n.jsxs)("div",{className:f.join(" "),children:[i?(0,n.jsx)("div",{className:x.variant[a].icon,children:i&&u[a]}):null,m&&m,(0,n.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:[x.variant[a].header,x.header].join(" "),children:l}),(0,n.jsx)("div",{className:y.join(" "),children:d})]}),p]}),o&&(0,n.jsx)("button",{"aria-label":"Close alert",onClick:()=>g(!1),className:v.join(" "),children:(0,n.jsx)(c.A,{strokeWidth:2,size:16})})]})})}},44707:(e,a,t)=>{"use strict";t.d(a,{YX:()=>d,_4:()=>c,ge:()=>i,lB:()=>l});var n=t(80263),s=t(53239),r=t(80127);let l=e=>{let{children:a,header:t,footer:s}=e;return(0,n.jsxs)(i,{"data-sentry-element":"FormPanelContainer","data-sentry-component":"FormPanel","data-sentry-source-file":"FormPanel.tsx",children:[t&&(0,n.jsx)(o,{children:t}),(0,n.jsx)(d,{className:"divide-y","data-sentry-element":"FormPanelContent","data-sentry-source-file":"FormPanel.tsx",children:a}),s&&(0,n.jsx)(c,{children:s})]})},i=(0,s.forwardRef)((e,a)=>{let{children:t,...s}=e;return(0,n.jsx)("div",{ref:a,...s,className:(0,r.cn)("bg-surface-100 border overflow-hidden rounded-md shadow max-w-full",s.className),children:t})});i.displayName=i.displayName;let o=(0,s.forwardRef)((e,a)=>{let{children:t,...s}=e;return(0,n.jsx)("div",{ref:a,...s,className:(0,r.cn)("border-default border-b px-8 py-4",s.className),children:t})});o.displayName=o.displayName;let d=(0,s.forwardRef)((e,a)=>{let{children:t,...s}=e;return(0,n.jsx)("div",{ref:a,...s,className:(0,r.cn)("divide-border flex flex-col gap-0",s.className),children:t})});d.displayName=d.displayName;let c=(0,s.forwardRef)((e,a)=>{let{children:t,...s}=e;return(0,n.jsx)("div",{ref:a,...s,className:(0,r.cn)("border-t",s.className),children:t})});c.displayName=c.displayName},48192:(e,a,t)=>{"use strict";t.d(a,{A:()=>g});var n=t(80263),s=t(53239),r=t(50960),l=t(65988),i=t(74512),o=t(30069),d=t(94198),c=t(92413),u=t(70979),m=t(80127),p=t(22554),x=t(38583);function h(e){let{autoComplete:a,autoFocus:t,className:h,inputClassName:g,iconContainerClassName:f,copy:y,defaultValue:v,descriptionText:j,disabled:b,error:N,icon:w,id:C="",name:S="",inputRef:_,label:A,afterLabel:M,beforeLabel:I,labelOptional:k,layout:P,onChange:E,onBlur:L,onCopy:T,placeholder:F,type:R="text",value:D,style:B,reveal:z=!1,actions:U,size:O="medium",borderless:G=!1,validation:H,...V}=e,[K,W]=(0,s.useState)("Copy"),[q,Y]=(0,s.useState)(!0),$=(0,c.A)("input"),{formContextOnChange:J,values:Z,errors:Q,handleBlur:X,touched:ee,fieldLevelValidation:ea}=(0,x.x)();Z&&!D&&(D=Z[C||S]),N||(Q&&!N&&(N=Q[C||S]),N=ee&&ee[C]?N:void 0),(0,s.useEffect)(()=>{H&&ea(C,H(D))},[]);let et=["peer/input",$.base];return N&&et.push($.variants.error),N||et.push($.variants.standard),O&&et.push($.size[O]),w&&et.push($.with_icon),b&&et.push($.disabled),g&&et.push(g),(0,n.jsx)(l.H,{label:A,afterLabel:M,beforeLabel:I,labelOptional:k,layout:P,id:C,error:N,descriptionText:j,style:B,size:O,className:h,"data-sentry-element":"FormLayout","data-sentry-component":"Input","data-sentry-source-file":"Input.tsx",children:(0,n.jsxs)("div",{className:$.container,children:[(0,n.jsx)("input",{"data-size":O,autoComplete:a,autoFocus:t,defaultValue:v,disabled:b,id:C,name:S,onChange:function(e){E&&E(e),J&&J(e),H&&ea(C,H(e.target.value))},onBlur:function(e){X&&setTimeout(()=>{X(e)},100),L&&L(e)},onCopy:T,placeholder:F,ref:_,type:R,value:z&&q?d.ne:D,className:(0,m.cn)(et),...V}),w&&(0,n.jsx)(o.A,{size:O,icon:w,className:f}),y||N||U?(0,n.jsxs)("div",{className:$.actions_container,children:[N&&(0,n.jsx)(i.A,{size:O}),y&&!(z&&q)?(0,n.jsx)(p.$,{size:"tiny",type:"default",icon:(0,n.jsx)(r.A,{}),onClick:()=>{var e;return e=D,void(0,u.l)(e,()=>{W("Copied"),setTimeout(()=>{W("Copy")},3e3),null==T||T()})},children:K}):null,z&&q?(0,n.jsx)(p.$,{size:"tiny",type:"default",onClick:function(){Y(!1)},children:"Reveal"}):null,U&&U]}):null]})})}h.TextArea=function(e){let{className:a,textAreaClassName:t,descriptionText:o,disabled:d,error:m,icon:h,id:g="",name:f="",label:y,afterLabel:v,beforeLabel:j,labelOptional:b,layout:N,onChange:w,onBlur:C,placeholder:S,value:_,style:A,rows:M=4,limit:I,size:k,borderless:P=!1,validation:E,copy:L=!1,onCopy:T,actions:F,...R}=e,[D,B]=(0,s.useState)(0),[z,U]=(0,s.useState)("Copy"),{formContextOnChange:O,values:G,errors:H,handleBlur:V,touched:K,fieldLevelValidation:W}=(0,x.x)();G&&!_&&(_=G[g||f]),m||(H&&!m&&(m=H[g||f]),m=K&&K[g||f]?m:void 0),(0,s.useEffect)(()=>{E&&W(g,E(_))},[]);let q=(0,c.A)("input"),Y=[q.base];return m&&Y.push(q.variants.error),m||Y.push(q.variants.standard),h&&Y.push(q.with_icon),k&&Y.push(q.size[k]),d&&Y.push(q.disabled),t&&Y.push(t),(0,n.jsx)(l.H,{className:a,label:y,afterLabel:v,beforeLabel:j,labelOptional:b,layout:N,id:g,error:m,descriptionText:o,style:A,size:k,"data-sentry-element":"FormLayout","data-sentry-component":"TextArea","data-sentry-source-file":"Input.tsx",children:(0,n.jsxs)("div",{className:q.container,children:[(0,n.jsx)("textarea",{disabled:d,id:g,name:f,rows:M,cols:100,placeholder:S,onChange:function(e){B(e.target.value.length),w&&w(e),O&&O(e),E&&W(g,E(e.target.value))},onBlur:function(e){V&&setTimeout(()=>{V(e)},100),C&&C(e)},onCopy:T,value:_,className:Y.join(" "),maxLength:I,...R}),L||m||F?(0,n.jsx)("div",{className:q.textarea_actions_container,children:(0,n.jsxs)("div",{className:q.textarea_actions_container_items,children:[m&&(0,n.jsx)(i.A,{size:k}),L&&(0,n.jsx)(p.$,{size:"tiny",type:"default",onClick:()=>{var e;return e=_,void(0,u.l)(e,()=>{U("Copied"),setTimeout(()=>{U("Copy")},3e3),null==T||T()})},icon:(0,n.jsx)(r.A,{}),children:z}),F&&F]})}):null]})})};let g=h},48550:(e,a,t)=>{var n=t(45558),s=t(10116),r=t(59568),l=t(71057),i=t(10876),o=t(99582);e.exports=function(e,a,t,d){var c=-1,u=s,m=!0,p=e.length,x=[],h=a.length;if(!p)return x;t&&(a=l(a,i(t))),d?(u=r,m=!1):a.length>=200&&(u=o,m=!1,a=new n(a));e:for(;++c<p;){var g=e[c],f=null==t?g:t(g);if(g=d||0!==g?g:0,m&&f==f){for(var y=h;y--;)if(a[y]===f)continue e;x.push(g)}else u(a,f,d)||x.push(g)}return x}},51729:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var n=t(80263),s=t(35741);let r=e=>{let{projectUpdateDisabled:a,projectNotActive:t=!1,children:r,tooltip:l}=e;return(0,n.jsxs)(s.m_,{"data-sentry-element":"Tooltip","data-sentry-component":"ProjectUpdateDisabledTooltip","data-sentry-source-file":"ProjectUpdateDisabledTooltip.tsx",children:[(0,n.jsx)(s.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"ProjectUpdateDisabledTooltip.tsx",children:r}),(a||t)&&(0,n.jsx)(s.ZI,{side:"bottom",className:"w-72 text-center",children:a?l||"Subscription changes are currently disabled. Our engineers are working on a fix.":t?"Unable to update subscription as project is currently not active":""})]})}},55315:(e,a,t)=>{var n=t(71057);e.exports=function(e,a){return n(a,function(a){return e[a]})}},55952:(e,a,t)=>{"use strict";t.d(a,{DE:()=>o,sj:()=>l,y9:()=>r});var n=t(80263),s=t(53239);let r=e=>{let{children:a,id:t,header:s,disabled:r,className:l}=e;return(0,n.jsxs)("div",{id:t,className:["grid grid-cols-12 gap-6 px-4 md:px-8 py-4 md:py-8","".concat(r?" opacity-30":" opacity-100"),"".concat(l)].join(" "),"data-sentry-component":"FormSection","data-sentry-source-file":"FormSection.tsx",children:[s,a]})},l=e=>{let{children:a,className:t="",description:s}=e;return void 0!==s?(0,n.jsxs)("div",{className:"flex flex-col space-y-2 col-span-12 lg:col-span-5 ".concat(t),children:[(0,n.jsx)("label",{className:"text-foreground text-sm",children:a}),s]}):(0,n.jsx)("label",{className:"text-foreground col-span-12 text-sm lg:col-span-5 ".concat(t),children:a})},i=()=>(0,n.jsxs)("div",{className:"flex w-full flex-col gap-2","data-sentry-component":"Shimmer","data-sentry-source-file":"FormSection.tsx",children:[(0,n.jsx)("div",{className:"shimmering-loader h-2 w-1/3 rounded"}),(0,n.jsx)("div",{className:"flex flex-col justify-between space-y-2",children:(0,n.jsx)("div",{className:"shimmering-loader h-[34px] w-2/3 rounded"})})]}),o=e=>{let{children:a,loading:t=!0,loaders:r,fullWidth:l,className:o}=e;return(0,n.jsx)("div",{className:"\n        relative col-span-12 flex flex-col gap-6 lg:col-span-7\n        ".concat(l&&"!col-span-12","\n        ").concat(o,"\n      "),"data-sentry-component":"FormSectionContent","data-sentry-source-file":"FormSection.tsx",children:t?r?Array(r).fill(0).map((e,a)=>(0,n.jsx)(i,{},a)):s.Children.map(a,(e,a)=>(0,n.jsx)(i,{},a)):a})}},56885:(e,a,t)=>{"use strict";t.d(a,{cC:()=>c,j5:()=>d});var n=t(60045),s=t(56947),r=t(70938),l=t(75831),i=t(79360);async function o(e,a){let{orgSlug:t}=e;if(!t)throw Error("orgSlug is required");let{error:n,data:s}=await (0,r.Jt)("/platform/organizations/{slug}/billing/subscription",{params:{path:{slug:t}},signal:a});return n&&(0,r.H4)(n),s}let d=function(e){let{orgSlug:a}=e,{enabled:t=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,l.SE)(n.aG.BILLING_READ,"stripe.subscriptions");return(0,s.I)(i.s.orgSubscription(a),e=>{let{signal:t}=e;return o({orgSlug:a},t)},{enabled:t&&d&&void 0!==a,staleTime:36e5,...r})},c=e=>{let{data:a}=d({orgSlug:e});return(null==a?void 0:a.plan.id)==="enterprise"||(null==a?void 0:a.plan.id)==="team"}},57374:(e,a,t)=>{"use strict";t.d(a,{M:()=>i});var n=t(80263),s=t(53239),r=t(20704),l=t(29562);let i=(0,s.forwardRef)((e,a)=>{let{...t}=e;return(0,n.jsx)(r.eI,{children:(0,n.jsx)(l.H,{ref:a,isReactForm:!0,...t,children:t.children})})});i.displayName="FormItemLayout"},58633:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var n=t(80263);function s(e){let{body:a,head:t,className:s,containerClassName:r,borderless:l,headTrClasses:i,bodyClassName:o,style:d}=e,c=["table-container"];r&&c.push(r),l&&c.push("table-container--borderless");let u=["table"];return s&&u.push(s),(0,n.jsx)("div",{className:c.join(" "),"data-sentry-component":"Table","data-sentry-source-file":"Table.tsx",children:(0,n.jsxs)("table",{className:u.join(" "),style:d,children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{className:i,children:t})}),(0,n.jsx)("tbody",{className:o,children:a})]})})}s.th=e=>{let{children:a,className:t,style:s}=e,r=["p-3 px-4 text-left"];return t&&r.push(t),(0,n.jsx)("th",{className:r.join(" "),style:s,"data-sentry-component":"Th","data-sentry-source-file":"Table.tsx",children:a})},s.td=e=>{let{children:a,colSpan:t,className:s,style:r,...l}=e;return(0,n.jsx)("td",{className:s,colSpan:t,style:r,...l,"data-sentry-component":"Td","data-sentry-source-file":"Table.tsx",children:a})},s.tr=e=>{let{children:a,className:t,onClick:s,style:r,hoverable:l}=e,i=[t];return(s||l)&&i.push("tr--link"),(0,n.jsx)("tr",{className:i.join(" "),onClick:s,style:r,"data-sentry-component":"Tr","data-sentry-source-file":"Table.tsx",children:a})};let r=s},60123:(e,a,t)=>{"use strict";t.d(a,{x:()=>o});var n=t(80263),s=t(53239),r=t(35741),l=t(64495),i=t(80127);let o=(0,s.forwardRef)((e,a)=>{let{...t}=e;return(0,n.jsxs)(r.m_,{children:[(0,n.jsx)(r.k$,{asChild:!0,children:(0,n.jsx)(l._2,{ref:a,...t,className:(0,i.cn)(t.className,"!pointer-events-auto"),onClick:e=>{!t.disabled&&t.onClick&&t.onClick(e)},children:t.children})}),t.disabled&&void 0!==t.tooltip.content.text&&(0,n.jsx)(r.ZI,{...t.tooltip.content,children:t.tooltip.content.text})]})});o.displayName="DropdownMenuItemTooltip"},61741:(e,a,t)=>{var n=t(55315),s=t(24967);e.exports=function(e){return null==e?[]:n(e,s(e))}},62287:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/org/[slug]/billing",function(){return t(70153)}])},64190:(e,a,t)=>{var n=t(77488),s=t(5689),r=t(33312),l=n?n.isConcatSpreadable:void 0;e.exports=function(e){return r(e)||s(e)||!!(l&&e&&e[l])}},64442:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var n=t(56947),s=t(70938),r=t(6042);async function l(e,a){let{slug:t}=e;if(!t)throw Error("slug is required");let{data:n,error:r}=await (0,s.Jt)("/platform/organizations/{slug}/members/reached-free-project-limit",{params:{path:{slug:t}},signal:a});return r&&(0,s.H4)(r),n}let i=function(e){let{slug:a}=e,{enabled:t=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.I)(r.O.freeProjectLimitCheck(a),e=>{let{signal:t}=e;return l({slug:a},t)},{enabled:t&&void 0!==a,...s})}},66933:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var n=t(80263),s=t(37838);let r=e=>{let{resourceText:a,isFullPage:t=!1}=e,r=()=>(0,n.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200","data-sentry-component":"NoPermissionMessage","data-sentry-source-file":"NoPermission.tsx",children:(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(s.A,{size:20,"data-sentry-element":"AlertCircle","data-sentry-source-file":"NoPermission.tsx"})}),(0,n.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",a]}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return t?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)("div",{className:"w-[550px]",children:(0,n.jsx)(r,{})})}):(0,n.jsx)(r,{})}},70153:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>ty});var n=t(80263),s=t(53239),r=t(46491),l=t(95142),i=t(56885),o=t(64084),d=t(52445),c=t(80127),u=t(60045),m=t(66933),p=t(75831),x=t(35128);let h=()=>{let{isSuccess:e,can:a}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions");return(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"InvoicesSection","data-sentry-source-file":"InvoicesSection.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"InvoicesSection.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12 pr-6",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Past Invoices"}),(0,n.jsx)("p",{className:"prose text-sm",children:"You get an invoice every time you change your plan or when your monthly billing cycle resets."})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"InvoicesSection.tsx",children:e&&!a?(0,n.jsx)(m.A,{resourceText:"view this organization's upcoming invoice"}):(0,n.jsx)(x.A,{})})]})};var g=t(53434),f=t.n(g),y=t(93749),v=t.n(y),j=t(92589),b=t(14132),N=t(33419),w=t(56947),C=t(70938),S=t(3716);async function _(e,a){let{orgSlug:t}=e;if(!t)throw Error("orgSlug is required");let{data:n,error:s}=await (0,C.Jt)("/platform/organizations/{slug}/billing/invoices/upcoming",{params:{path:{slug:t}},headers:{Version:"2"},signal:a});return s&&(0,C.H4)(s),n}let A=function(e){let{orgSlug:a}=e,{enabled:t=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,w.I)(S.x.orgUpcomingPreview(a),e=>{let{signal:t}=e;return _({orgSlug:a},t)},{enabled:t&&void 0!==a,...n})};var M=t(46895),I=t(11094),k=t(97136),P=t(81750),E=t(1715);let L={[E.Lb.MONTHLY_ACTIVE_USERS]:"https://supabase.com/docs/guides/platform/manage-your-usage/monthly-active-users",[E.Lb.MONTHLY_ACTIVE_SSO_USERS]:"https://supabase.com/docs/guides/platform/manage-your-usage/monthly-active-users-sso",[E.Lb.MONTHLY_ACTIVE_THIRD_PARTY_USERS]:"https://supabase.com/docs/guides/platform/manage-your-usage/monthly-active-users-third-party",[E.Lb.AUTH_MFA_PHONE]:"https://supabase.com/docs/guides/platform/manage-your-usage/advanced-mfa-phone",[E.Lb.EGRESS]:"https://supabase.com/docs/guides/platform/manage-your-usage/egress",[E.Lb.CACHED_EGRESS]:"https://supabase.com/docs/guides/platform/manage-your-usage/egress",[E.Lb.FUNCTION_INVOCATIONS]:"https://supabase.com/docs/guides/platform/manage-your-usage/edge-function-invocations",[E.Lb.STORAGE_SIZE]:"https://supabase.com/docs/guides/platform/manage-your-usage/storage-size",[E.Lb.STORAGE_IMAGES_TRANSFORMED]:"https://supabase.com/docs/guides/platform/manage-your-usage/storage-image-transformations",[E.Lb.REALTIME_MESSAGE_COUNT]:"https://supabase.com/docs/guides/platform/manage-your-usage/realtime-messages",[E.Lb.REALTIME_PEAK_CONNECTIONS]:"https://supabase.com/docs/guides/platform/manage-your-usage/realtime-peak-connections",[E.Lb.CUSTOM_DOMAIN]:"https://supabase.com/docs/guides/platform/manage-your-usage/custom-domains",[E.Lb.IPV4]:"https://supabase.com/docs/guides/platform/manage-your-usage/ipv4",[E.Lb.PITR_7]:"https://supabase.com/docs/guides/platform/manage-your-usage/point-in-time-recovery",[E.Lb.PITR_14]:"https://supabase.com/docs/guides/platform/manage-your-usage/point-in-time-recovery",[E.Lb.PITR_28]:"https://supabase.com/docs/guides/platform/manage-your-usage/point-in-time-recovery",[E.Lb.DISK_SIZE_GB_HOURS_GP3]:"https://supabase.com/docs/guides/platform/manage-your-usage/disk-size",[E.Lb.DISK_SIZE_GB_HOURS_IO2]:"https://supabase.com/docs/guides/platform/manage-your-usage/disk-size",[E.Lb.DISK_IOPS_GP3]:"https://supabase.com/docs/guides/platform/manage-your-usage/disk-iops",[E.Lb.DISK_IOPS_IO2]:"https://supabase.com/docs/guides/platform/manage-your-usage/disk-iops",[E.Lb.DISK_THROUGHPUT_GP3]:"https://supabase.com/docs/guides/platform/manage-your-usage/disk-throughput",[E.Lb.LOG_DRAIN]:"https://supabase.com/docs/guides/platform/manage-your-usage/log-drains"};function T(e){let{amountBeforeDiscount:a,amount:t}=e;return a&&t<a?(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-foreground-light line-through mr-2",translate:"no",children:(0,M.vv)(a)}),(0,n.jsx)("span",{translate:"no",children:(0,M.vv)(t)})]}):(0,n.jsx)("span",{translate:"no",children:(0,M.vv)(t)})}function F(e){var a;let{computeItems:t,tooltip:s,title:r,computeCredits:l}=e,i=t.flatMap(e=>e.breakdown.map(a=>({...a,computeType:e.description,computeCosts:a.amount}))).sort((e,a)=>a.computeCosts-e.computeCosts),o=Math.max(0,t.reduce((e,a)=>e+a.amount_before_discount,0)),d=Math.max(0,t.reduce((e,a)=>{var t;return e+(null!=(t=a.amount)?t:0)},0)+(null!=(a=null==l?void 0:l.amount)?a:0));return t.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(I.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"UpcomingInvoice.tsx",children:[(0,n.jsxs)(I.nA,{className:"!py-2 px-0 flex items-center gap-1","data-sentry-element":"TableCell","data-sentry-source-file":"UpcomingInvoice.tsx",children:[(0,n.jsx)("span",{children:r}),(0,n.jsx)(P.I,{className:"max-w-sm","data-sentry-element":"InfoTooltip","data-sentry-source-file":"UpcomingInvoice.tsx",children:s})]}),(0,n.jsx)(I.nA,{className:"text-right py-2 px-0","data-sentry-element":"TableCell","data-sentry-source-file":"UpcomingInvoice.tsx",children:(0,n.jsx)(T,{amount:d,amountBeforeDiscount:o,"data-sentry-element":"InvoiceLineItemAmount","data-sentry-source-file":"UpcomingInvoice.tsx"})})]}),i.map(e=>(0,n.jsxs)(I.Hj,{className:"text-foreground-light text-xs",children:[(0,n.jsxs)(I.nA,{className:"!py-2 px-0 pl-6",children:[e.project_name," (",e.computeType," - ",e.usage," Hours)"]}),(0,n.jsx)(I.nA,{className:"!py-2 px-0 text-right",translate:"no",children:(0,M.vv)(e.computeCosts)})]},e.project_ref)),l&&(0,n.jsxs)(I.Hj,{className:"text-foreground-light text-xs",children:[(0,n.jsx)(I.nA,{className:"!py-2 px-0 pl-6",children:"Compute Credits"}),(0,n.jsx)(I.nA,{className:"!py-2 px-0 text-right",translate:"no",children:(0,M.vv)(l.amount)})]})]}):null}let R=e=>{var a,t,s,r,l,i,o;let{slug:d}=e,{data:c,error:u,isLoading:m,isError:p,isSuccess:x}=A({orgSlug:d}),h=(null==c||null==(a=c.lines)?void 0:a.filter(e=>{var a,t;return(null==(a=e.description)?void 0:a.toLowerCase().includes("compute"))&&e.breakdown&&(null==(t=e.breakdown)?void 0:t.length)>0}))||[],g=null!=(l=null==c||null==(t=c.lines)?void 0:t.find(e=>e.description.startsWith("Compute Credits")))?l:null,f=null==c||null==(s=c.lines)?void 0:s.find(e=>{var a;return null==(a=e.description)?void 0:a.toLowerCase().includes("plan")}),y=h.filter(e=>{var a,t;return!(null==(a=e.metadata)?void 0:a.is_branch)&&!(null==(t=e.metadata)?void 0:t.is_read_replica)}),N=h.filter(e=>{var a;return null==(a=e.metadata)?void 0:a.is_branch}),w=h.filter(e=>{var a;return null==(a=e.metadata)?void 0:a.is_read_replica}),C=(null==c||null==(r=c.lines)?void 0:r.filter(e=>{var a,t;return!(null==(a=e.description)?void 0:a.toLowerCase().includes("compute"))&&!(null==(t=e.description)?void 0:t.toLowerCase().includes("plan"))}))||[];return(0,n.jsxs)(n.Fragment,{children:[m&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),p&&(0,n.jsx)(j.A,{subject:"Failed to retrieve upcoming invoice",error:u}),x&&(0,n.jsx)("div",{children:(0,n.jsx)("div",{children:(0,n.jsxs)(I.XI,{className:"w-full text-sm",children:[(0,n.jsxs)(I.BF,{children:[(0,n.jsxs)(I.Hj,{children:[(0,n.jsx)(I.nA,{className:"!py-2 px-0",children:null==f?void 0:f.description}),(0,n.jsx)(I.nA,{className:"text-right py-2 px-0",children:null==f?"-":(0,n.jsx)(T,{amount:f.amount,amountBeforeDiscount:f.amount_before_discount})})]}),(0,n.jsx)(F,{computeItems:y,title:"Compute",computeCredits:g,tooltip:(0,n.jsxs)("p",{className:"prose text-xs",children:["The first project is covered by Compute Credits. Additional projects incur compute costs starting at ",(0,n.jsx)("span",{translate:"no",children:"$10"}),"/month, independent of activity. See"," ",(0,n.jsx)(v(),{href:"https://supabase.com/docs/guides/platform/manage-your-usage/compute",target:"_blank",children:"docs"}),"."]})}),(0,n.jsx)(F,{title:"Replica Compute",computeItems:w,tooltip:(0,n.jsxs)("p",{className:"prose text-xs",children:["Each Read Replica is a dedicated database. You are charged for its resources: Compute, Disk Size, provisioned Disk IOPS, provisioned Disk Throughput, and IPv4. See"," ",(0,n.jsx)(v(),{href:"https://supabase.com/docs/guides/platform/manage-your-usage/read-replicas",target:"_blank",children:"docs"}),"."]})}),N.length>0&&(0,n.jsxs)(I.Hj,{children:[(0,n.jsx)(I.nA,{className:"py-2 px-0",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{children:"Branching"}),(0,n.jsxs)(P.I,{className:"max-w-sm",children:[(0,n.jsx)("ul",{className:"ml-6 list-disc",children:N.flatMap(e=>e.breakdown).map(e=>(0,n.jsxs)("li",{children:[e.project_name," (",e.usage," Hours)"]},"branching-breakdown-".concat(e.project_ref)))}),(0,n.jsxs)("p",{className:"mt-2",children:["See"," ",(0,n.jsx)(v(),{className:"underline",href:"https://supabase.com/docs/guides/platform/manage-your-usage/branching",target:"_blank",children:"docs"})," ","on how billing for Branching works."]})]})]})}),(0,n.jsx)(I.nA,{className:"text-right py-2 px-0",children:(0,n.jsx)(T,{amount:N.reduce((e,a)=>e+a.amount,0),amountBeforeDiscount:N.reduce((e,a)=>{var t;return e+(null!=(t=a.amount_before_discount)?t:0)},0)})})]}),C.map(e=>{var a;return(0,n.jsxs)(I.Hj,{children:[(0,n.jsx)(I.nA,{className:"py-2 px-0",children:(0,n.jsxs)("div",{className:"gap-1 flex items-center",children:[(0,n.jsx)("span",{children:null!=(a=e.description)?a:"Unknown"}),(e.breakdown&&e.breakdown.length>0||null!=e.usage_metric)&&(0,n.jsxs)(P.I,{className:"max-w-sm",children:[e.unit_price_desc&&(0,n.jsxs)("p",{className:"mb-2",translate:"no",children:["Pricing: ",e.unit_price_desc]}),e.breakdown&&e.breakdown.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{children:["Projects using ",e.description,":"]}),(0,n.jsx)("ul",{className:"ml-6 list-disc",children:e.breakdown.map(a=>(0,n.jsxs)("li",{children:[(0,n.jsx)(v(),{className:"underline",href:"/project/".concat(a.project_ref),target:"_blank",children:a.project_name})," ",e.usage_metric&&(0,n.jsxs)("span",{children:["(",(0,k.pK)(e.usage_metric,a)," ",(0,k.mX)(e.usage_metric),")"]})]},"".concat(e.description,"-breakdown-").concat(a.project_ref)))})]}),e.usage_metric&&null!=L[e.usage_metric]&&(0,n.jsxs)("p",{className:"mt-2",children:["See"," ",(0,n.jsx)(v(),{className:"underline",href:L[e.usage_metric],target:"_blank",children:"docs"})," ","on how billing for ",e.description," works and"," ",(0,n.jsx)(v(),{className:"underline",href:"/organization/".concat(d,"/usage"),children:"usage page"})," ","for a detailed breakdown."]})]})]})}),(0,n.jsx)(I.nA,{className:"text-right py-2 px-0",children:(0,n.jsx)(T,{amount:e.amount,amountBeforeDiscount:e.amount_before_discount})})]},e.description)})]}),(0,n.jsxs)(I.Gg,{children:[(0,n.jsxs)(I.Hj,{children:[(0,n.jsxs)(I.nA,{className:"font-medium py-2 px-0 flex items-center",children:[(0,n.jsx)("span",{className:"mr-2",children:"Current Costs"}),(0,n.jsx)(P.I,{children:"Costs accumulated from the beginning of the billing cycle up to now."})]}),(0,n.jsx)(I.nA,{className:"text-right font-medium py-2 px-0",translate:"no",children:null!=(i=(0,M.vv)(null==c?void 0:c.amount_total))?i:"-"})]}),(0,n.jsxs)(I.Hj,{children:[(0,n.jsxs)(I.nA,{className:"font-medium py-2 px-0 flex items-center",children:[(0,n.jsx)("span",{className:"mr-2",children:"Projected Costs"}),(0,n.jsx)(P.I,{className:"max-w-xs",children:"Projected costs at the end of the billing cycle. Includes predictable costs for Compute Hours, IPv4, Custom Domain and Point-In-Time-Recovery, but no costs for metrics like MAU, storage or function invocations. Final amounts may vary depending on your usage."})]}),(0,n.jsx)(I.nA,{className:"text-right font-medium py-2 px-0",translate:"no",children:null!=(o=(0,M.vv)(null==c?void 0:c.amount_projected))?o:"-"})]})]})]})})})]})};var D=t(23035);let B=()=>{var e,a;let{slug:t}=(0,r.g)(),{data:s}=(0,d.s)(),{isSuccess:c,can:x}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions"),{data:h,error:g,isLoading:y,isError:w}=(0,i.j5)({orgSlug:t},{enabled:x}),C=(0,o.x)("billing:invoices"),S=f().unix(null!=(e=null==h?void 0:h.current_period_start)?e:0).utc(),_=f().unix(null!=(a=null==h?void 0:h.current_period_end)?a:0).utc(),A=_.diff(f()(),"days"),M=_.diff(S,"days");return(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"BillingBreakdown","data-sentry-source-file":"BillingBreakdown.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"BillingBreakdown.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12 pr-6",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Upcoming Invoice"}),(0,n.jsx)("div",{className:"py-2",children:(null==s?void 0:s.managed_by)!==D.Kf.AWS_MARKETPLACE&&(0,n.jsx)(N.A,{type:"horizontal",value:M-A,max:M,barClass:"bg-foreground",labelBottom:"".concat(S.format("MMMM DD")," - ").concat(_.format("MMMM DD")),bgClass:"bg-surface-300",labelBottomClass:"!text-foreground-light p-1 m-0",labelTop:h?"".concat(A," ").concat(1===A?"day":"days"," left"):"",labelTopClass:"p-1 m-0"})}),(0,n.jsxs)("p",{className:"prose text-sm",children:[(null==s?void 0:s.managed_by)===D.Kf.AWS_MARKETPLACE?(0,n.jsxs)(n.Fragment,{children:["You'll receive two invoices from AWS Marketplace: one on the 3rd of"," ",_.format("MMMM")," for your usage in"," ",S.format("MMMM")," and one on ",_.format("MMMM DD")," ","for the fixed subscription fee."]}):(0,n.jsxs)(n.Fragment,{children:["Your upcoming invoice (excluding credits) will continue to update until the end of your billing cycle on ",_.format("MMMM DD"),"."]}),(0,n.jsxs)(n.Fragment,{children:[" ","For a more detailed breakdown, visit the"," ",(0,n.jsx)(v(),{href:"/org/".concat(t,"/usage"),"data-sentry-element":"Link","data-sentry-source-file":"BillingBreakdown.tsx",children:"usage page."})]})]}),(0,n.jsx)("br",{}),(0,n.jsx)("p",{className:"text-sm text-foreground-light mt-4",children:"Add-on changes or new projects may take up to an hour to appear."})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"BillingBreakdown.tsx",children:c&&!x?(0,n.jsx)(m.A,{resourceText:"view this organization's upcoming invoice"}):(0,n.jsxs)(n.Fragment,{children:[y&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),w&&(0,n.jsx)(j.A,{subject:"Failed to retrieve subscription",error:g}),C&&(0,n.jsx)(R,{slug:t})]})})]})};var z=t(73969),U=t(8572),O=t(6042);async function G(e,a){let{slug:t}=e;if(!t)throw Error("slug is required");let{data:n,error:s}=await (0,C.Jt)("/platform/organizations/{slug}/customer",{params:{path:{slug:t}},signal:a});return s&&(0,C.H4)(s),n}let H=function(e){let{slug:a}=e,{enabled:t=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,p.SE)(u.aG.BILLING_READ,"stripe.customer");return(0,w.I)(O.O.customerProfile(a),e=>{let{signal:t}=e;return G({slug:a},t)},{enabled:t&&s&&void 0!==a,...n})};var V=t(32144),K=t(80251);async function W(e){let{slug:a,address:t,billing_name:n}=e;if(!a)return console.error("Slug is required");let{data:s,error:r}=await (0,C.yJ)("/platform/organizations/{slug}/customer",{params:{path:{slug:a}},body:{address:null!=t?t:void 0,billing_name:n}});if(r)throw(0,C.H4)(r);return s}let q=function(){let{onSuccess:e,onError:a,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,V.jE)();return(0,K.n)(e=>W(e),{async onSuccess(a,t,s){let{address:r,slug:l,billing_name:i}=t;n.setQueriesData(O.O.customerProfile(l),e=>e?{...e,billing_name:i,address:r}:e),await (null==e?void 0:e(a,t,s))},async onError(e,t,n){void 0===a?z.oR.error("Failed to update customer profile: ".concat(e.message)):a(e,t,n)},...t})};async function Y(e,a){let{slug:t}=e;if(!t)throw Error("slug is required");let{data:n,error:s}=await (0,C.Jt)("/platform/organizations/{slug}/tax-ids",{params:{path:{slug:t}},signal:a});if(s)throw(0,C.H4)(s);return n.tax_id}let $=function(e){let{slug:a}=e,{enabled:t=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,p.SE)(u.aG.BILLING_READ,"stripe.tax_ids");return(0,w.I)(O.O.taxId(a),e=>{let{signal:t}=e;return Y({slug:a},t)},{enabled:t&&void 0!==a&&s,...n})};async function J(e){let{slug:a,taxId:t}=e;if(!a)throw Error("Slug is required");if(null!=t){let{data:e,error:n}=await (0,C.yJ)("/platform/organizations/{slug}/tax-ids",{params:{path:{slug:a}},body:{type:t.type,value:t.value,country:t.country}});return n&&(0,C.H4)(n),e}{let{data:e,error:t}=await (0,C.yH)("/platform/organizations/{slug}/tax-ids",{params:{path:{slug:a}},headers:{Version:"2"}});return t&&(0,C.H4)(t),e}}let Z=function(){let{onSuccess:e,onError:a,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,V.jE)();return(0,K.n)(e=>J(e),{async onSuccess(a,t,s){let{slug:r}=t;n.setQueryData(O.O.taxId(r),a.tax_id),await (null==e?void 0:e(a,t,s))},async onError(e,t,n){void 0===a?z.oR.error("Failed to update tax id: ".concat(e.message)):a(e,t,n)},...t})};var Q=t(36152),X=t(20704),ee=t(22554),ea=t(42872),et=t(24699),en=t(36839),es=t(10663),er=t(20838),el=t(51509),ei=t(30569),eo=t(57374);let ed=[{code:"AF",name:"Afghanistan"},{code:"AL",name:"Albania"},{code:"DZ",name:"Algeria"},{code:"AS",name:"American Samoa"},{code:"AD",name:"Andorra"},{code:"AO",name:"Angola"},{code:"AI",name:"Anguilla"},{code:"AQ",name:"Antarctica"},{code:"AG",name:"Antigua and Barbuda"},{code:"AR",name:"Argentina"},{code:"AM",name:"Armenia"},{code:"AW",name:"Aruba"},{code:"AU",name:"Australia"},{code:"AT",name:"Austria"},{code:"AZ",name:"Azerbaijan"},{code:"BS",name:"Bahamas"},{code:"BH",name:"Bahrain"},{code:"BD",name:"Bangladesh"},{code:"BB",name:"Barbados"},{code:"BY",name:"Belarus"},{code:"BE",name:"Belgium"},{code:"BZ",name:"Belize"},{code:"BJ",name:"Benin"},{code:"BM",name:"Bermuda"},{code:"BT",name:"Bhutan"},{code:"BO",name:"Bolivia"},{code:"BA",name:"Bosnia and Herzegovina"},{code:"BW",name:"Botswana"},{code:"BV",name:"Bouvet Island"},{code:"BR",name:"Brazil"},{code:"IO",name:"British Indian Ocean Territory"},{code:"VG",name:"British Virgin Islands"},{code:"BN",name:"Brunei Darussalam"},{code:"BG",name:"Bulgaria"},{code:"BF",name:"Burkina Faso"},{code:"BI",name:"Burundi"},{code:"KH",name:"Cambodia"},{code:"CM",name:"Cameroon"},{code:"CA",name:"Canada"},{code:"CV",name:"Cape Verde"},{code:"KY",name:"Cayman Islands"},{code:"CF",name:"Central African Republic"},{code:"TD",name:"Chad"},{code:"CL",name:"Chile"},{code:"CN",name:"China"},{code:"CX",name:"Christmas Island"},{code:"CC",name:"Cocos (Keeling) Islands"},{code:"CO",name:"Colombia"},{code:"KM",name:"Comoros"},{code:"CG",name:"Congo"},{code:"CK",name:"Cook Islands"},{code:"CR",name:"Costa Rica"},{code:"HR",name:"Croatia"},{code:"CU",name:"Cuba"},{code:"CW",name:"Cura\xe7ao"},{code:"CY",name:"Cyprus"},{code:"CZ",name:"Czech Republic"},{code:"CI",name:"C\xf4te d'Ivoire"},{code:"DK",name:"Denmark"},{code:"DJ",name:"Djibouti"},{code:"DM",name:"Dominica"},{code:"DO",name:"Dominican Republic"},{code:"EC",name:"Ecuador"},{code:"EG",name:"Egypt"},{code:"SV",name:"El Salvador"},{code:"GQ",name:"Equatorial Guinea"},{code:"ER",name:"Eritrea"},{code:"EE",name:"Estonia"},{code:"SZ",name:"Eswatini"},{code:"ET",name:"Ethiopia"},{code:"FK",name:"Falkland Islands"},{code:"FO",name:"Faroe Islands"},{code:"FJ",name:"Fiji"},{code:"FI",name:"Finland"},{code:"FR",name:"France"},{code:"GF",name:"French Guiana"},{code:"PF",name:"French Polynesia"},{code:"TF",name:"French Southern Territories"},{code:"GA",name:"Gabon"},{code:"GM",name:"Gambia"},{code:"GE",name:"Georgia"},{code:"DE",name:"Germany"},{code:"GH",name:"Ghana"},{code:"GI",name:"Gibraltar"},{code:"GR",name:"Greece"},{code:"GL",name:"Greenland"},{code:"GD",name:"Grenada"},{code:"GP",name:"Guadeloupe"},{code:"GU",name:"Guam"},{code:"GT",name:"Guatemala"},{code:"GG",name:"Guernsey"},{code:"GN",name:"Guinea"},{code:"GW",name:"Guinea-Bissau"},{code:"GY",name:"Guyana"},{code:"HT",name:"Haiti"},{code:"HM",name:"Heard & McDonald Islands"},{code:"HN",name:"Honduras"},{code:"HK",name:"Hong Kong"},{code:"HU",name:"Hungary"},{code:"IS",name:"Iceland"},{code:"IN",name:"India"},{code:"ID",name:"Indonesia"},{code:"IR",name:"Iran"},{code:"IQ",name:"Iraq"},{code:"IE",name:"Ireland"},{code:"IM",name:"Isle of Man"},{code:"IL",name:"Israel"},{code:"IT",name:"Italy"},{code:"JM",name:"Jamaica"},{code:"JP",name:"Japan"},{code:"JE",name:"Jersey"},{code:"JO",name:"Jordan"},{code:"KZ",name:"Kazakhstan"},{code:"KE",name:"Kenya"},{code:"KI",name:"Kiribati"},{code:"KW",name:"Kuwait"},{code:"KG",name:"Kyrgyzstan"},{code:"LA",name:"Laos"},{code:"LV",name:"Latvia"},{code:"LB",name:"Lebanon"},{code:"LS",name:"Lesotho"},{code:"LR",name:"Liberia"},{code:"LY",name:"Libya"},{code:"LI",name:"Liechtenstein"},{code:"LT",name:"Lithuania"},{code:"LU",name:"Luxembourg"},{code:"MO",name:"Macao"},{code:"MG",name:"Madagascar"},{code:"MW",name:"Malawi"},{code:"MY",name:"Malaysia"},{code:"MV",name:"Maldives"},{code:"ML",name:"Mali"},{code:"MT",name:"Malta"},{code:"MH",name:"Marshall Islands"},{code:"MQ",name:"Martinique"},{code:"MR",name:"Mauritania"},{code:"MU",name:"Mauritius"},{code:"YT",name:"Mayotte"},{code:"MX",name:"Mexico"},{code:"FM",name:"Micronesia"},{code:"MD",name:"Moldova"},{code:"MC",name:"Monaco"},{code:"MN",name:"Mongolia"},{code:"ME",name:"Montenegro"},{code:"MS",name:"Montserrat"},{code:"MA",name:"Morocco"},{code:"MZ",name:"Mozambique"},{code:"MM",name:"Myanmar"},{code:"NA",name:"Namibia"},{code:"NR",name:"Nauru"},{code:"NP",name:"Nepal"},{code:"NL",name:"Netherlands"},{code:"NC",name:"New Caledonia"},{code:"NZ",name:"New Zealand"},{code:"NI",name:"Nicaragua"},{code:"NE",name:"Niger"},{code:"NG",name:"Nigeria"},{code:"NU",name:"Niue"},{code:"NF",name:"Norfolk Island"},{code:"KP",name:"North Korea"},{code:"MK",name:"North Macedonia"},{code:"MP",name:"Northern Mariana Islands"},{code:"NO",name:"Norway"},{code:"OM",name:"Oman"},{code:"PK",name:"Pakistan"},{code:"PW",name:"Palau"},{code:"PS",name:"Palestinian Territories"},{code:"PA",name:"Panama"},{code:"PG",name:"Papua New Guinea"},{code:"PY",name:"Paraguay"},{code:"PE",name:"Peru"},{code:"PH",name:"Philippines"},{code:"PN",name:"Pitcairn Islands"},{code:"PL",name:"Poland"},{code:"PT",name:"Portugal"},{code:"PR",name:"Puerto Rico"},{code:"QA",name:"Qatar"},{code:"RO",name:"Romania"},{code:"RU",name:"Russia"},{code:"RW",name:"Rwanda"},{code:"RE",name:"R\xe9union"},{code:"BL",name:"Saint Barth\xe9lemy"},{code:"WS",name:"Samoa"},{code:"SM",name:"San Marino"},{code:"ST",name:"Sao Tome and Principe"},{code:"SA",name:"Saudi Arabia"},{code:"SN",name:"Senegal"},{code:"RS",name:"Serbia"},{code:"SC",name:"Seychelles"},{code:"SL",name:"Sierra Leone"},{code:"SG",name:"Singapore"},{code:"SX",name:"Sint Maarten"},{code:"SK",name:"Slovakia"},{code:"SI",name:"Slovenia"},{code:"SB",name:"Solomon Islands"},{code:"SO",name:"Somalia"},{code:"ZA",name:"South Africa"},{code:"GS",name:"South Georgia and the South Sandwich Islands"},{code:"KR",name:"South Korea"},{code:"SS",name:"South Sudan"},{code:"ES",name:"Spain"},{code:"LK",name:"Sri Lanka"},{code:"SH",name:"St Helena"},{code:"KN",name:"St Kitts and Nevis"},{code:"LC",name:"St Lucia"},{code:"MF",name:"St Martin"},{code:"PM",name:"St Pierre and Miquelon"},{code:"VC",name:"St Vincent and the Grenadines"},{code:"SD",name:"Sudan"},{code:"SR",name:"Suriname"},{code:"SJ",name:"Svalbard & Jan Mayen"},{code:"SE",name:"Sweden"},{code:"CH",name:"Switzerland"},{code:"SY",name:"Syria"},{code:"TW",name:"Taiwan"},{code:"TJ",name:"Tajikistan"},{code:"TZ",name:"Tanzania"},{code:"TH",name:"Thailand"},{code:"TL",name:"Timor-Leste"},{code:"TG",name:"Togo"},{code:"TK",name:"Tokelau"},{code:"TO",name:"Tonga"},{code:"TT",name:"Trinidad & Tobago"},{code:"TN",name:"Tunisia"},{code:"TR",name:"Turkey"},{code:"TM",name:"Turkmenistan"},{code:"TC",name:"Turks & Caicos Islands"},{code:"TV",name:"Tuvalu"},{code:"VI",name:"US Virgin Islands"},{code:"UG",name:"Uganda"},{code:"UA",name:"Ukraine"},{code:"AE",name:"United Arab Emirates"},{code:"GB",name:"United Kingdom"},{code:"US",name:"United States of America"},{code:"UY",name:"Uruguay"},{code:"UZ",name:"Uzbekistan"},{code:"VU",name:"Vanuatu"},{code:"VA",name:"Vatican City"},{code:"VE",name:"Venezuela"},{code:"VN",name:"Vietnam"},{code:"WF",name:"Wallis & Futuna"},{code:"EH",name:"Western Sahara"},{code:"YE",name:"Yemen"},{code:"ZM",name:"Zambia"},{code:"ZW",name:"Zimbabwe"},{code:"AX",name:"\xc5land Islands"}];var ec=t(92822);let eu=es.Ik({billing_name:es.Yj().min(3,"Name must be at least 3 letters long"),line1:es.Yj().optional(),line2:es.Yj().optional(),city:es.Yj().optional(),state:es.Yj().optional(),postal_code:es.Yj().optional(),country:es.Yj().optional(),tax_id_type:es.Yj(),tax_id_value:es.Yj(),tax_id_name:es.Yj()}).refine(e=>!(e.line1||e.line2||e.city||e.state||e.postal_code)||!!e.country&&!!e.line1,{message:"Country and Address line 1 are required if any other field is provided.",path:["line1"]}).refine(e=>!(e.line1&&!e.country),{message:"Please select a country",path:["country"]}).refine(e=>!(e.country&&!e.line1),{message:"Please provide an address line 1",path:["line1"]}),em=e=>{let{form:a,disabled:t=!1,className:r}=e,[l,i]=(0,s.useState)(!1),[o,d]=(0,s.useState)(!1),u=e=>{let t=ec.X.find(a=>a.name===e);t&&(a.setValue("tax_id_type",t.type),a.setValue("tax_id_value",""),a.setValue("tax_id_name",e))},m=()=>{a.setValue("tax_id_name","",{shouldDirty:!0}),a.setValue("tax_id_type","",{shouldDirty:!0}),a.setValue("tax_id_value","",{shouldDirty:!0})},{tax_id_name:p,country:x}=a.watch(),h=ec.X.find(e=>e.name===p),g=(0,s.useMemo)(()=>ec.X.filter(e=>!x||e.countryIso2===x).sort((e,a)=>e.country.localeCompare(a.country)),[x]);return(0,n.jsxs)("div",{className:(0,c.cn)("flex flex-col space-y-4",r),"data-sentry-component":"BillingCustomerDataForm","data-sentry-source-file":"BillingCustomerDataForm.tsx",children:[(0,n.jsx)(X.zB,{control:a.control,name:"billing_name",render:e=>{let{field:a}=e;return(0,n.jsxs)(eo.M,{hideMessage:!0,label:"Name",children:[(0,n.jsx)(X.MJ,{children:(0,n.jsx)(er.p,{...a,disabled:t})}),(0,n.jsx)(X.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"}),(0,n.jsx)(X.zB,{control:a.control,name:"line1",render:e=>{let{field:a}=e;return(0,n.jsxs)(eo.M,{hideMessage:!0,label:"Address line 1",children:[(0,n.jsx)(X.MJ,{children:(0,n.jsx)(er.p,{...a,placeholder:"123 Main Street",disabled:t})}),(0,n.jsx)(X.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"}),(0,n.jsx)(X.zB,{control:a.control,name:"line2",render:e=>{let{field:a}=e;return(0,n.jsxs)(eo.M,{hideMessage:!0,label:"Address line 2 (optional)",children:[(0,n.jsx)(X.MJ,{children:(0,n.jsx)(er.p,{...a,placeholder:"Apartment, suite, unit, building, floor, etc.",disabled:t})}),(0,n.jsx)(X.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)(X.zB,{control:a.control,name:"country",render:e=>{var s;let{field:r}=e;return(0,n.jsxs)(eo.M,{hideMessage:!0,label:"Country",children:[(0,n.jsxs)(el.AM,{open:l,onOpenChange:i,children:[(0,n.jsx)(el.Wv,{asChild:!0,children:(0,n.jsx)(X.MJ,{children:(0,n.jsx)(ee.$,{type:"default",role:"combobox",size:"medium",disabled:t,className:(0,c.cn)("w-full justify-between h-[34px]",!r.value&&"text-muted"),iconRight:(0,n.jsx)(ea.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50",strokeWidth:1.5}),children:r.value&&(null==(s=ed.find(e=>e.code===r.value))?void 0:s.name)||"Select country"})})}),(0,n.jsx)(el.hl,{sameWidthAsTrigger:!0,className:"p-0",align:"start",children:(0,n.jsxs)(ei.uB,{children:[(0,n.jsx)(ei.G7,{placeholder:"Search country..."}),(0,n.jsxs)(ei.oI,{children:[(0,n.jsx)(ei.xL,{children:"No country found."}),(0,n.jsx)(ei.L$,{children:ed.map(e=>(0,n.jsxs)(ei.h_,{value:e.name,onSelect:()=>{a.setValue("country",e.code,{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0}),i(!1)},children:[(0,n.jsx)(et.A,{className:(0,c.cn)("mr-2 h-4 w-4",r.value===e.code?"opacity-100":"opacity-0")}),e.name]},e.code))})]})]})})]}),(0,n.jsx)(X.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"}),(0,n.jsx)(X.zB,{control:a.control,name:"postal_code",render:e=>{let{field:a}=e;return(0,n.jsxs)(eo.M,{hideMessage:!0,label:"Postal code",children:[(0,n.jsx)(X.MJ,{children:(0,n.jsx)(er.p,{...a,placeholder:"12345",disabled:t})}),(0,n.jsx)(X.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)(X.zB,{control:a.control,name:"city",render:e=>{let{field:a}=e;return(0,n.jsxs)(eo.M,{hideMessage:!0,label:"City",children:[(0,n.jsx)(X.MJ,{children:(0,n.jsx)(er.p,{...a,disabled:t})}),(0,n.jsx)(X.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"}),(0,n.jsx)(X.zB,{control:a.control,name:"state",render:e=>{let{field:a}=e;return(0,n.jsxs)(eo.M,{hideMessage:!0,label:"State / Province",children:[(0,n.jsx)(X.MJ,{children:(0,n.jsx)(er.p,{...a,disabled:t})}),(0,n.jsx)(X.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 w-full items-end",children:[(0,n.jsx)(X.zB,{name:"tax_id_name",control:a.control,render:e=>{let{field:a}=e;return(0,n.jsxs)(eo.M,{hideMessage:!0,layout:"vertical",label:"Tax ID",children:[(0,n.jsxs)(el.AM,{open:o,onOpenChange:d,children:[(0,n.jsx)(el.Wv,{asChild:!0,children:(0,n.jsx)(X.MJ,{children:(0,n.jsx)(ee.$,{type:"default",role:"combobox",size:"medium",disabled:t,className:(0,c.cn)("w-full justify-between h-[34px]",!h&&"text-muted"),iconRight:(0,n.jsx)(ea.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50",strokeWidth:1.5}),children:h?"".concat(h.country," - ").concat(h.name):"Select tax ID"})})}),(0,n.jsx)(el.hl,{sameWidthAsTrigger:!0,className:"p-0",align:"start",children:(0,n.jsxs)(ei.uB,{children:[(0,n.jsx)(ei.G7,{placeholder:"Search tax ID..."}),(0,n.jsxs)(ei.oI,{children:[(0,n.jsx)(ei.xL,{children:"No tax ID found."}),(0,n.jsx)(ei.L$,{children:g.map(e=>(0,n.jsxs)(ei.h_,{value:"".concat(e.country," - ").concat(e.name),onSelect:()=>{u(e.name),d(!1)},children:[(0,n.jsx)(et.A,{className:(0,c.cn)("mr-2 h-4 w-4",(null==h?void 0:h.name)===e.name?"opacity-100":"opacity-0")}),e.country," - ",e.name]},e.name))})]})]})})]}),(0,n.jsx)(X.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"}),h&&(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(X.zB,{name:"tax_id_value",control:a.control,render:e=>{let{field:a}=e;return(0,n.jsx)(eo.M,{hideMessage:!0,className:"w-full",children:(0,n.jsx)(X.MJ,{children:(0,n.jsx)(er.p,{...a,placeholder:null==h?void 0:h.placeholder,disabled:t})})})}}),(0,n.jsx)(ee.$,{type:"text",className:"px-1",icon:(0,n.jsx)(en.A,{}),onClick:()=>m()})]})]})]})};var ep=t(32981),ex=t(87494);let eh=e=>{let a=ec.X.find(a=>a.name===e.name),t=null==a?void 0:a.vatPrefix;return t&&!e.value.startsWith(t)?"".concat(t).concat(e.value):e.value},eg=()=>{let{slug:e}=(0,r.g)(),{data:a}=(0,d.s)(),{isSuccess:t,can:i}=(0,p.hl)(u.aG.BILLING_READ,"stripe.customer"),o=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.customer"),{data:c,error:x,isLoading:h,isSuccess:g}=H({slug:e},{enabled:i}),{data:f,error:y,isLoading:v,isSuccess:N}=$({slug:e}),w=(0,s.useMemo)(()=>{var e,a,t,n,s,r,l,i,o;return{city:null!=(l=null==c||null==(e=c.address)?void 0:e.city)?l:void 0,country:null==c||null==(a=c.address)?void 0:a.country,line1:null==c||null==(t=c.address)?void 0:t.line1,line2:null!=(i=null==c||null==(n=c.address)?void 0:n.line2)?i:void 0,postal_code:null!=(o=null==c||null==(s=c.address)?void 0:s.postal_code)?o:void 0,billing_name:null==c?void 0:c.billing_name,tax_id_type:null==f?void 0:f.type,tax_id_value:null==f?void 0:f.value,tax_id_name:f&&(null==(r=ec.X.find(e=>e.type===f.type&&e.countryIso2===f.country))?void 0:r.name)||""}},[c,f]),{mutateAsync:C}=q(),{mutateAsync:S}=Z(),[_,A]=(0,s.useState)(!1),{form:M,handleSubmit:I,handleReset:k,isDirty:P}=function(e){let{initialCustomerData:a,onCustomerDataChange:t}=e,n=(0,ex.mN)({resolver:(0,ep.u)(eu),defaultValues:{billing_name:(null==a?void 0:a.billing_name)||"",line1:(null==a?void 0:a.line1)||"",line2:(null==a?void 0:a.line2)||"",city:(null==a?void 0:a.city)||"",state:(null==a?void 0:a.state)||"",postal_code:(null==a?void 0:a.postal_code)||"",country:(null==a?void 0:a.country)||"",tax_id_type:(null==a?void 0:a.tax_id_type)||"",tax_id_value:(null==a?void 0:a.tax_id_value)||"",tax_id_name:(null==a?void 0:a.tax_id_name)||""}});(0,s.useEffect)(()=>{a&&n.reset({billing_name:a.billing_name||"",line1:a.line1||"",line2:a.line2||"",city:a.city||"",state:a.state||"",postal_code:a.postal_code||"",country:a.country||"",tax_id_type:(null==a?void 0:a.tax_id_type)||"",tax_id_value:(null==a?void 0:a.tax_id_value)||"",tax_id_name:(null==a?void 0:a.tax_id_name)||""})},[a]);let r=async e=>{var a,s;let r=Object.entries(e).reduce((e,a)=>{let[t,n]=a;return e[t]="string"==typeof n?n.trim():n,e},{}),l=r.line1?r:null,i=ec.X.find(a=>a.name===e.tax_id_name);t({address:l?{line1:r.line1,line2:r.line2,city:r.city,state:r.state,postal_code:r.postal_code,country:r.country}:void 0,billing_name:r.billing_name,tax_id:i&&(null==(a=e.tax_id_type)?void 0:a.length)&&(null==(s=e.tax_id_value)?void 0:s.length)?{type:e.tax_id_type,value:eh({value:e.tax_id_value,name:n.getValues().tax_id_name}),country:null==i?void 0:i.countryIso2}:null})};return{form:n,handleSubmit:r,handleReset:()=>{a?n.reset({billing_name:a.billing_name||"",line1:a.line1||"",line2:a.line2||"",city:a.city||"",state:a.state||"",postal_code:a.postal_code||"",country:a.country||"",tax_id_type:(null==a?void 0:a.tax_id_type)||"",tax_id_value:(null==a?void 0:a.tax_id_value)||"",tax_id_name:(null==a?void 0:a.tax_id_name)||""}):n.reset({line1:"",line2:"",city:"",state:"",postal_code:"",country:"",tax_id_type:"",tax_id_value:"",tax_id_name:""})},isDirty:n.formState.isDirty}}({initialCustomerData:w,onCustomerDataChange:async a=>{A(!0);try{await C({slug:e,address:a.address,billing_name:a.billing_name}),await S({slug:e,taxId:a.tax_id}),z.oR.success("Successfully updated billing data"),A(!1)}catch(e){z.oR.error("Failed updating billing data: ".concat(e.message)),A(!1)}}}),E=!P||!o||_;return(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"BillingCustomerData","data-sentry-source-file":"BillingCustomerData.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"BillingCustomerData.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12 pr-3",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Billing Address & Tax ID"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"This will be reflected in every upcoming invoice, past invoices are not affected"})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"BillingCustomerData.tsx",children:(null==a?void 0:a.managed_by)!==void 0&&(null==a?void 0:a.managed_by)!=="supabase"?(0,n.jsx)(U.A,{managedBy:null==a?void 0:a.managed_by,resource:"Billing Addresses",cta:{installationId:null==a?void 0:a.partner_id}}):t&&!i?(0,n.jsx)(m.A,{resourceText:"view this organization's billing address"}):(0,n.jsxs)(n.Fragment,{children:[(h||v)&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),(x||y)&&(0,n.jsx)(j.A,{subject:"Failed to retrieve organization customer profile",error:x||y}),g&&N&&(0,n.jsx)(Q.Zp,{children:(0,n.jsx)(X.lV,{...M,children:(0,n.jsxs)("form",{onSubmit:M.handleSubmit(I),children:[(0,n.jsx)(em,{className:"p-8",form:M,disabled:!o}),(0,n.jsxs)(Q.wL,{className:"border-t justify-end px-8",children:[!o&&(0,n.jsx)("span",{className:"text-sm text-foreground-lighter mr-auto",children:"You need additional permissions to manage this organization's billing address"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(ee.$,{type:"default",onClick:k,disabled:E,children:"Cancel"}),(0,n.jsx)(ee.$,{type:"primary",htmlType:"submit",disabled:E,loading:_,children:"Save"})]})]})]})})})]})})]})};var ef=t(24600),ey=t(44707),ev=t(55952),ej=t(14523),eb=t(74280);let eN="org-billing-email",ew=es.Ik({billingEmail:es.Yj().email("Please provide a valid email address").optional(),additionalBillingEmails:es.Yj().email({message:"invalid_email"}).array().default([])}),eC=()=>{var e,a;let{slug:t}=(0,r.g)(),{data:i}=(0,d.s)(),{name:o,billing_email:c}=null!=i?i:{},x=(0,p.SE)(u.aG.UPDATE,"organizations"),{isSuccess:h,can:g}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions"),{data:f,isLoading:y}=H({slug:t},{enabled:g}),v=(0,ex.mN)({resolver:(0,ep.u)(ew),defaultValues:{billingEmail:null!=c?c:"",additionalBillingEmails:null!=(e=null==f?void 0:f.additional_emails)?e:[]}}),{additionalBillingEmails:j}=v.watch(),{errors:b}=v.formState,N=null!=(a=b.additionalBillingEmails)?a:[],{mutate:w,isLoading:C}=(0,ej.N)(),S=async e=>x?t?o?void w({slug:t,name:o,billing_email:e.billingEmail,additional_billing_emails:e.additionalBillingEmails},{onSuccess:()=>{z.oR.success("Successfully saved settings"),v.reset(e)}}):console.error("Organization name is required"):console.error("Slug is required"):z.oR.error("You do not have the required permissions to update this organization");return(0,s.useEffect)(()=>{if(f){var e;v.reset({billingEmail:null!=c?c:"",additionalBillingEmails:null!=(e=f.additional_emails)?e:[]})}},[f]),(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"BillingEmail","data-sentry-source-file":"BillingEmail.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"BillingEmail.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Email Recipient"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"All billing correspondence will go to this email"})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"BillingEmail.tsx",children:h&&!g?(0,n.jsx)(m.A,{resourceText:"view this organization's email recipients"}):(0,n.jsx)(X.lV,{...v,children:(0,n.jsx)("form",{id:eN,onSubmit:v.handleSubmit(S),children:(0,n.jsx)(ey.lB,{footer:(0,n.jsx)("div",{className:"flex py-4 px-8",children:(0,n.jsx)(ef.I,{form:eN,isSubmitting:C,hasChanges:v.formState.isDirty,handleReset:v.reset,disabled:!x,helper:x?void 0:"You need additional permissions to update billing emails"})}),children:(0,n.jsx)(ev.y9,{children:(0,n.jsxs)(ev.DE,{fullWidth:!0,loading:y,children:[(0,n.jsx)(X.zB,{control:v.control,name:"billingEmail",render:e=>{let{field:a}=e;return(0,n.jsxs)(eo.M,{label:"Email address",children:[(0,n.jsx)(X.MJ,{children:(0,n.jsx)(er.p,{type:"email",...a,placeholder:"Email",disabled:!x})}),(0,n.jsx)(X.C5,{})]})}}),(0,n.jsx)(X.zB,{control:v.control,name:"additionalBillingEmails",render:e=>{let{field:a}=e;return(0,n.jsxs)(eo.M,{hideMessage:!0,label:(0,n.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,n.jsx)("span",{children:"Additional emails"}),(0,n.jsx)(P.I,{side:"bottom",children:"These email addresses will be CC'd in automated invoice or payment failure emails. Payment receipts will still only go to the primary billing address."})]}),children:[(0,n.jsx)(X.MJ,{children:(0,n.jsxs)(eb.xf,{values:a.value,onValuesChange:a.onChange,children:[(0,n.jsx)(eb.hw,{deletableBadge:!0,showIcon:!1,mode:"inline-combobox",label:"Add additional recipients",badgeLimit:"wrap"}),(0,n.jsx)(eb.sD,{children:(0,n.jsx)(eb.DG,{creatable:!0})})]})}),Array.isArray(N)&&N.length>0&&(0,n.jsx)("div",{className:"flex flex-col gap-y-1 mt-2",children:N.map((e,a)=>(0,n.jsxs)("p",{className:"text-sm text-destructive",children:['"',j[a],'" is not a valid email address']},"email-error-".concat(a)))})]})}})]})})})})})})]})};var eS=t(63121),e_=t(796),eA=t(64718),eM=t.n(eA),eI=t(18947),ek=t(74144),eP=t(56028),eE=t(12532);let eL=(0,eP.BX)({panelKey:void 0,setPanelKey:e=>{eL.panelKey=e}}),eT=e=>(0,eE.s)(eL,e);var eF=t(38112),eR=t(41336),eD=t(51729),eB=t(58633),ez=t(57315),eU=t(79360);async function eO(e){let{slug:a,tier:t,paymentMethod:n,address:s,tax_id:r,billing_name:l}=e;if(!a)throw Error("slug is required");if(!t)throw Error("tier is required");let i={tier:t};void 0!==n&&(i.payment_method=n);let{error:o,data:d}=await (0,C.yJ)("/platform/organizations/{slug}/billing/subscription",{body:{payment_method:i.payment_method,tier:i.tier,address:null!=s?s:void 0,tax_id:null!=r?r:void 0,billing_name:l},params:{path:{slug:a}}});return o&&(0,C.H4)(o),d}let eG=function(){let{onSuccess:e,onError:a,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,V.jE)();return(0,K.n)(e=>eO(e),{async onSuccess(a,t,s){let{slug:r}=t;!a.pending_payment_intent_secret&&(await new Promise(e=>setTimeout(e,2e3)),await Promise.all([n.invalidateQueries(eU.s.orgSubscription(r)),n.invalidateQueries(eU.s.orgPlans(r)),n.invalidateQueries(ez.E.orgUsage(r)),n.invalidateQueries(S.x.orgUpcomingPreview(r)),n.invalidateQueries(O.O.detail(r)),n.invalidateQueries(O.O.list())]),t.paymentMethod&&n.setQueriesData(O.O.paymentMethods(r),e=>e?{...e,defaultPaymentMethodId:t.paymentMethod,data:e.data.map(e=>({...e,is_default:e.id===t.paymentMethod}))}:e)),await (null==e?void 0:e(a,t,s))},async onError(e,t,n){void 0===a?z.oR.error(e.message,{dismissible:!0,duration:1e4}):a(e,t,n)},...t})};var eH=t(43204),eV=t(80832),eK=t(26140),eW=t(72343);let eq=[{name:"Spend cap enabled",value:"on",imageUrl:"".concat(ek.o2,"/img/spend-cap-on.png"),imageUrlLight:"".concat(ek.o2,"/img/spend-cap-on--light.png")},{name:"Spend cap disabled",value:"off",imageUrl:"".concat(ek.o2,"/img/spend-cap-off.png"),imageUrlLight:"".concat(ek.o2,"/img/spend-cap-off--light.png")}],eY=()=>{var e;let{slug:a}=(0,r.g)(),{resolvedTheme:t}=(0,e_.D)(),[l,o]=(0,s.useState)(!1),[d,m]=(0,s.useState)(),x=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.subscriptions"),h=eT(),g="costControl"===h.panelKey,f=()=>h.setPanelKey(void 0),{data:y,isLoading:j}=(0,i.j5)({orgSlug:a}),{mutate:b,isLoading:N}=eG({onSuccess:()=>{z.oR.success("Successfully ".concat(S?"enabled":"disabled"," spend cap")),f()},onError:e=>{z.oR.error("Failed to toggle spend cap: ".concat(e.message))}}),w=(null==y||null==(e=y.plan)?void 0:e.id)==="free",C=!(null==y?void 0:y.usage_billing_enabled),S=!C&&"on"===d,_=d!==(C?"on":"off");(0,s.useEffect)(()=>{g&&void 0!==y&&m(C?"on":"off")},[g,j,y,C]);let A=async()=>{if(!a)return console.error("Org slug is required");b({slug:a,tier:"on"===d?ek.V$.PRO:ek.V$.PAYG})};return(0,n.jsx)(eV.Ay,{size:"large",loading:j||N,disabled:w||j||!_||N||!x,visible:g,onCancel:f,onConfirm:A,header:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h4",{children:"Spend cap"}),(0,n.jsx)(ee.$,{asChild:!0,type:"default",icon:(0,n.jsx)(eS.A,{strokeWidth:1.5}),children:(0,n.jsx)(v(),{href:"https://supabase.com/docs/guides/platform/cost-control#spend-cap",target:"_blank",rel:"noreferrer",children:"About spend cap"})})]}),tooltip:x?void 0:"You do not have permission to update spend cap","data-sentry-element":"SidePanel","data-sentry-component":"SpendCapSidePanel","data-sentry-source-file":"SpendCapSidePanel.tsx",children:(0,n.jsx)(eV.Ay.Content,{"data-sentry-element":"SidePanel.Content","data-sentry-source-file":"SpendCapSidePanel.tsx",children:(0,n.jsxs)("div",{className:"py-6 space-y-4",children:[(0,n.jsx)("p",{className:"text-sm",children:"Use the spend cap to manage project usage and costs, and control whether the project can exceed the included quota allowance of any billed line item in a billing cycle"}),(0,n.jsxs)(eK.Ay,{open:l,onOpenChange:o,"data-sentry-element":"Collapsible","data-sentry-source-file":"SpendCapSidePanel.tsx",children:[(0,n.jsx)(eK.Ay.Trigger,{asChild:!0,"data-sentry-element":"Collapsible.Trigger","data-sentry-source-file":"SpendCapSidePanel.tsx",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,n.jsx)(eW.A,{strokeWidth:1.5,size:16,className:l?"rotate-90":"","data-sentry-element":"ChevronRight","data-sentry-source-file":"SpendCapSidePanel.tsx"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"How are each resource charged after exceeding the included quota?"})]})}),(0,n.jsx)(eK.Ay.Content,{asChild:!0,"data-sentry-element":"Collapsible.Content","data-sentry-source-file":"SpendCapSidePanel.tsx",children:(0,n.jsx)(eB.A,{className:"mt-4",head:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eB.A.th,{children:(0,n.jsx)("p",{className:"text-xs",children:"Item"})}),(0,n.jsx)(eB.A.th,{children:(0,n.jsx)("p",{className:"text-xs",children:"Rate"})})]}),body:["database","auth","storage","realtime","edge_functions"].map(e=>{let a=eH.z[e],t=a.features.filter(e=>e.usage_based);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eB.A.tr,{children:[(0,n.jsx)(eB.A.td,{children:(0,n.jsx)("p",{className:"text-xs text-foreground",children:a.title})}),(0,n.jsx)(eB.A.td,{children:null})]},e),t.map(e=>(0,n.jsxs)(eB.A.tr,{children:[(0,n.jsx)(eB.A.td,{children:(0,n.jsx)("p",{className:"text-xs pl-4",children:e.title})}),(0,n.jsx)(eB.A.td,{children:(0,n.jsx)("p",{className:"text-xs pl-4",children:e.plans.pro})})]},e.title))]})}),"data-sentry-element":"Table","data-sentry-source-file":"SpendCapSidePanel.tsx"})})]}),w&&(0,n.jsx)(eR.F,{withIcon:!0,variant:"info",title:"Toggling of the spend cap is only available on the Pro Plan",actions:(0,n.jsx)(ee.$,{type:"default",onClick:()=>h.setPanelKey("subscriptionPlan"),children:"View available plans"}),children:"Upgrade your plan to disable the spend cap"}),(0,n.jsx)("div",{className:"!mt-8 pb-4",children:(0,n.jsx)("div",{className:"flex gap-3",children:eq.map(e=>{let a=d===e.value;return(0,n.jsxs)("div",{className:(0,c.cn)("col-span-4 group space-y-1",w&&"opacity-75"),onClick:()=>!w&&m(e.value),children:[(0,n.jsx)(eM(),{alt:"Spend Cap",className:(0,c.cn)("relative rounded-xl transition border bg-no-repeat bg-center bg-cover w-[160px] h-[96px]",a?"border-foreground":"border-foreground-muted opacity-50 group-hover:border-foreground-lighter group-hover:opacity-100",!w&&"cursor-pointer",!w&&!a&&"group-hover:border-foreground-light"),width:160,height:96,src:(null==t?void 0:t.includes("dark"))?e.imageUrl:e.imageUrlLight}),(0,n.jsx)("p",{className:(0,c.cn)("text-sm transition",!w&&"group-hover:text-foreground",a?"text-foreground":"text-foreground-light"),children:e.name})]},e.value)})})}),"on"===d?(0,n.jsx)(eR.F,{withIcon:!0,variant:"warning",title:"Your projects could become unresponsive or enter read only mode",children:"Exceeding the included quota allowance with spend cap enabled can cause your projects to become unresponsive or enter read only mode."}):(0,n.jsx)(eR.F,{withIcon:!0,variant:"info",title:"Charges apply for usage beyond included quota allowance",children:"Your projects will always remain responsive and active, and charges only apply when exceeding the included quota limit."}),_&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-sm",children:"on"===d?"Upon clicking confirm, spend cap will be enabled for your organization and you will no longer be charged any extra for usage.":"Upon clicking confirm, spend cap will be disabled for your organization and you will be charged for any usage beyond the included quota."}),(0,n.jsx)("p",{className:"text-sm",children:"Toggling spend cap triggers an invoice and there might be prorated charges for any usage beyond the Pro Plans quota during this billing cycle."})]})]})})})};var e$=t(94766);let eJ=e=>{var a;let{}=e,{slug:t}=(0,r.g)(),{resolvedTheme:s}=(0,e_.D)(),{data:o}=(0,d.s)(),{isSuccess:c,can:x}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions"),h=eT(),g=(0,eI._P)("disableProjectCreationAndUpdate"),{data:f,error:y,isLoading:N,isSuccess:w,isError:C}=(0,i.j5)({orgSlug:t},{enabled:x}),S=null==f?void 0:f.plan,_=null!=(a=null==f?void 0:f.usage_billing_enabled)&&a,A=!g&&!["team","enterprise"].includes((null==S?void 0:S.id)||""),M=(null==o?void 0:o.managed_by)===D.Kf.AWS_MARKETPLACE;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"CostControl.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"CostControl.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-6 top-12",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Cost Control"}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light m-0",children:["Allow scaling beyond your plan's"," ",(0,n.jsx)(v(),{href:"/org/".concat(t,"/usage"),className:"text-green-900 transition hover:text-green-1000","data-sentry-element":"Link","data-sentry-source-file":"CostControl.tsx",children:"included quota"}),"."]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"More information"}),(0,n.jsx)("div",{children:(0,n.jsx)(v(),{href:"https://supabase.com/docs/guides/platform/cost-control#spend-cap",target:"_blank",rel:"noreferrer","data-sentry-element":"Link","data-sentry-source-file":"CostControl.tsx",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2 opacity-50 hover:opacity-100 transition",children:[(0,n.jsx)("p",{className:"text-sm m-0",children:"Spend cap"}),(0,n.jsx)(eS.A,{size:16,strokeWidth:1.5,"data-sentry-element":"ExternalLink","data-sentry-source-file":"CostControl.tsx"})]})})})]})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"CostControl.tsx",children:c&&!x?(0,n.jsx)(m.A,{resourceText:"update this organization's cost control"}):(0,n.jsxs)(n.Fragment,{children:[N&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),C&&(0,n.jsx)(j.A,{subject:"Failed to retrieve subscription",error:y}),w&&M&&(0,n.jsxs)(eF.Fc,{className:"flex flex-col items-center gap-y-2 border-0 rounded-none",children:[(0,n.jsx)(e$.A,{organization:{managed_by:null==o?void 0:o.managed_by},showTooltip:!1,size:"large"}),(0,n.jsxs)(eF.XL,{className:"text-sm",children:["The Spend Cap is not available for organizations managed by"," ",U.N[null==o?void 0:o.managed_by],"."]})]}),w&&!M&&(0,n.jsxs)("div",{className:"space-y-6",children:[["team","enterprise"].includes((null==S?void 0:S.id)||"")?(0,n.jsxs)(eR.F,{withIcon:!0,variant:"info",title:"You will be charged for any additional usage on the ".concat((null==S?void 0:S.name)||""," plan"),children:[(null==S?void 0:S.name)||""," plan requires you to have spend cap off at all times. Your projects will never become unresponsive. Only when your"," ",(0,n.jsx)(v(),{href:"/org/".concat(t,"/usage"),className:"text-green-900 transition hover:text-green-1000",children:"included usage"})," ","is exceeded will you be charged for any additional usage."]}):(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"If you need to go beyond the included quota, simply switch off your spend cap to pay for additional usage."}),(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"rounded-md bg-surface-200 w-[160px] h-[96px] shadow",children:(0,n.jsx)(eM(),{alt:"Spend Cap",width:160,height:96,src:_?"".concat(ek.o2,"/img/spend-cap-off").concat((null==s?void 0:s.includes("dark"))?"":"--light",".png?v=3"):"".concat(ek.o2,"/img/spend-cap-on").concat((null==s?void 0:s.includes("dark"))?"":"--light",".png?v=3")})})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"mb-1",children:["Spend cap is ",_?"disabled":"enabled"]}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:_?(0,n.jsx)("span",{children:"You will be charged for usage beyond the included quota."}):(0,n.jsx)("span",{children:"You won't be charged any extra for usage. However, your projects could become unresponsive or enter read only mode if you exceed the included quota."})}),(0,n.jsx)(eD.A,{projectUpdateDisabled:g,children:(0,n.jsx)(ee.$,{type:"default",className:"mt-4 pointer-events-auto",disabled:!A,onClick:()=>h.setPanelKey("costControl"),children:"Change spend cap"})})]})]})]})]})})]}),(0,n.jsx)(eY,{"data-sentry-element":"SpendCapSidePanel","data-sentry-source-file":"CostControl.tsx"})]})};var eZ=t(36393),eQ=t(99265),eX=t(91419),e0=t(37838),e1=t(80797),e2=t(84558);async function e4(e){let{payment_method_id:a,amount:t,slug:n,hcaptchaToken:s,address:r,tax_id:l,billing_name:i}=e;if(!a)throw Error("Payment method id required");if(!s)throw Error("Captcha not submitted");if(!n)throw Error("Slug is required");let{data:o,error:d}=await (0,C.bE)("/platform/organizations/{slug}/billing/credits/top-up",{params:{path:{slug:n}},body:{payment_method_id:a,amount:t,hcaptcha_token:s,address:null!=r?r:void 0,tax_id:null!=l?l:void 0,billing_name:null!=i?i:void 0}});return d&&(0,C.H4)(d),o}let e3=function(){let{onSuccess:e,onError:a,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,K.n)(e=>e4(e),{async onSuccess(a,t,n){await (null==e?void 0:e(a,t,n))},async onError(e,t,n){void 0===a?z.oR.error("Failed to top up credits: ".concat(e.message)):a(e,t,n)},...t})};var e5=t(19506),e8=t(96334),e6=t(7005),e9=t(91116);async function e7(e){let{slug:a,hcaptchaToken:t}=e,{data:n,error:s}=await (0,C.bE)("/platform/organizations/{slug}/payments/setup-intent",{params:{path:{slug:a}},body:{hcaptchaToken:t}});return s&&(0,C.H4)(s),n}let ae=function(){let{onSuccess:e,onError:a,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,K.n)(e=>e7(e),{async onSuccess(a,t,n){await (null==e?void 0:e(a,t,n))},async onError(e,t,n){void 0===a?z.oR.error("Failed to setup intent: ".concat(e.message)):a(e,t,n)},...t})};async function aa(e,a){let{slug:t}=e;if(!t)throw Error("slug is required");let{data:n,error:s}=await (0,C.Jt)("/platform/organizations/{slug}/payments",{params:{path:{slug:t}},headers:{Version:"2"},signal:a});return s&&(0,C.H4)(s),n}let at=function(e){let{slug:a}=e,{enabled:t=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,p.SE)(u.aG.BILLING_READ,"stripe.payment_methods");return(0,w.I)(O.O.paymentMethods(a),e=>{let{signal:t}=e;return aa({slug:a},t)},{enabled:t&&void 0!==a&&s,...n})};var an=t(24344),as=t(15745),ar=t(96827),al=t(18400);let ai=(0,eX.c)(ek.WS),ao=(0,s.forwardRef)(function(e,a){var t;let{selectedPaymentMethod:l,onSelectPaymentMethod:i,layout:o="vertical",readOnly:c}=e,{slug:u}=(0,r.g)(),{data:m}=(0,d.s)(),[p,x]=(0,s.useState)(null),[h,g]=(0,s.useState)(null),[f,y]=(0,s.useState)(void 0),[v,j]=(0,s.useState)(!0),{resolvedTheme:b}=(0,e_.D)(),N=(0,s.useRef)(null),[w,C]=(0,s.useState)(null),{data:S,isLoading:_}=H({slug:u}),{data:A,isLoading:M}=$({slug:u}),I=(0,eI._P)("hidePaymentMethodsWithoutAddress"),{data:k,isLoading:P}=at({slug:u}),E=(0,s.useMemo)(()=>k?{data:k.data.filter(e=>!I||e.has_address),defaultPaymentMethodId:k.data.some(e=>e.id===k.defaultPaymentMethodId)?k.defaultPaymentMethodId:null}:{data:[],defaultPaymentMethodId:null},[k]),L=(0,s.useCallback)(e=>{g(e)},[]),{mutate:T,isLoading:F}=ae({onSuccess:e=>{y(e)},onError:e=>{z.oR.error("Failed to setup intent: ".concat(e.message))}});(0,s.useEffect)(()=>{(null==E?void 0:E.data)&&0===E.data.length&&null==w&&C(!0)},[E]),(0,s.useEffect)(()=>{let e=async e=>{let a=null==m?void 0:m.slug;return a?e?void(y(void 0),T({slug:a,hcaptchaToken:e})):console.error("HCaptcha token required"):console.error("Slug is required")};(async()=>{if(w&&h){let t=p;try{if(!t){var a;let e=await h.execute({async:!0});t=null!=(a=null==e?void 0:e.response)?a:null}}catch(e){return}await e(null!=t?t:void 0),R()}})()},[h,w]);let R=()=>{x(null),null==h||h.resetCaptcha()},D=(0,s.useMemo)(()=>({clientSecret:f?f.client_secret:"",appearance:(0,e9.D)(b),paymentMethodCreation:"manual"}),[f,b]);(0,s.useEffect)(()=>{if((null==E?void 0:E.data)&&E.data.length>0){let e=E.data.some(e=>e.id===l);if(!l||!e){let e=E.data.find(e=>e.is_default);void 0!==e?i(e.id):i(E.data[0].id)}}},[l,E,i]);let B=async()=>{var e,a;if(!w&&(null==E||!E.data||0!==E.data.length))return{paymentMethod:{id:l},customerName:v?(null==S?void 0:S.billing_name)||"":null,address:v&&null!=(a=null==S?void 0:S.address)?a:null,taxId:v&&null!=A?A:null};{let a=await (null==(e=N.current)?void 0:e.createPaymentMethod());return a?{paymentMethod:a.paymentMethod,customerName:v?a.customerName:null,address:v?a.address:null,taxId:v?a.taxId:null}:a}};return(0,s.useImperativeHandle)(a,()=>({createPaymentMethod:B})),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eZ.A,{ref:L,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onOpen:()=>{void 0!==document&&document.body.classList.add("!pointer-events-auto")},onClose:()=>{y(void 0),void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onVerify:e=>{x(e),void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onExpire:()=>{x(null)}}),(0,n.jsxs)("div",{children:[P?(0,n.jsxs)("div",{className:"flex items-center px-4 py-2 space-x-4 border rounded-md border-strong bg-surface-200",children:[(0,n.jsx)(e8.A,{className:"animate-spin",size:14}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Retrieving payment methods"})]}):(null==E?void 0:E.data)&&(null==E?void 0:E.data.length)>0&&!w?(0,n.jsxs)(an.A,{layout:o,label:"Payment method",value:l,onChange:i,className:"flex items-center",children:[null==E?void 0:E.data.map(e=>{let a="   ".concat(e.card.last4);return(0,n.jsx)(an.A.Option,{label:a,value:e.id,addOnBefore:()=>(0,n.jsx)("img",{alt:"Credit Card Brand",src:"".concat(ek.o2,"/img/payment-methods/").concat(e.card.brand.replace(" ","-").toLowerCase(),".png"),width:"32"}),children:(0,n.jsx)("div",{children:a})},e.id)}),(0,n.jsxs)("div",{className:"flex items-center px-3 py-2 space-x-2 transition cursor-pointer group hover:bg-surface-300",onClick:()=>{C(!0)},children:[(0,n.jsx)(e6.A,{size:16}),(0,n.jsx)("p",{className:"transition text-foreground-light group-hover:text-foreground",children:"Add new payment method"})]})]}):null,ai&&f&&S&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eQ.Elements,{stripe:ai,options:D,children:(0,n.jsx)(al.S,{ref:N,email:null!=(t=null==m?void 0:m.billing_email)?t:void 0,readOnly:c,customerName:null==S?void 0:S.billing_name,currentAddress:null==S?void 0:S.address,currentTaxId:A})}),(null==S?void 0:S.address)!=null&&(0,n.jsxs)("div",{className:"flex items-center space-x-2 mt-4",children:[(0,n.jsx)(as.S,{id:"defaultBillingAddress",checked:v,onCheckedChange:()=>j(!v)}),(0,n.jsx)("label",{htmlFor:"defaultBillingAddress",className:"text-sm leading-none text-foreground-light",children:"Use address as my org's billing address"})]})]}),(F||_||M)&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(ar.A,{className:"h-10"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(ar.A,{className:"h-10"}),(0,n.jsx)(ar.A,{className:"h-10"})]}),(0,n.jsx)(ar.A,{className:"h-10"})]})]})]})});ao.displayName="PaymentMethodSelection";var ad=t(63031);let ac=(0,eX.c)(ek.WS),au=es.Ik({amount:es.au.number().gte(100,"Amount must be between $100 - $2000.").lte(2e3,"Amount must be between $100 - $2000.").int("Amount must be a whole number."),paymentMethod:es.Yj()}),am=e=>{let{slug:a}=e,{resolvedTheme:t}=(0,e_.D)(),r=(0,V.jE)(),l=(0,s.useRef)(null),i=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.subscriptions"),o=(0,p.Lh)(),{mutateAsync:d,isLoading:c,error:m}=e3({}),x=(0,ex.mN)({resolver:(0,ep.u)(au),defaultValues:{amount:100,paymentMethod:""}}),[h,g]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1),[j,b]=(0,s.useState)(null),[N,w]=(0,s.useState)(null),C=(0,s.useCallback)(e=>{w(e)},[]),S=()=>{b(null),null==N||N.resetCaptcha()},_=async()=>{if(h&&N){let a=j;try{if(!a){var e;let t=await N.execute({async:!0});a=null!=(e=null==t?void 0:t.response)?e:null,b(a)}}catch(e){}return a}};(0,s.useEffect)(()=>{_()},[h,N]);let[A,M]=(0,s.useState)(""),[I,k]=(0,s.useState)(),P=async e=>{var t,n;let{amount:s,paymentMethod:r}=e;k(void 0);let i=await _(),o=await (null==(t=l.current)?void 0:t.createPaymentMethod());o&&await d({slug:a,amount:s,payment_method_id:o.paymentMethod.id,hcaptchaToken:i,address:o.address,tax_id:null!=(n=o.taxId)?n:void 0,billing_name:o.customerName},{onSuccess:e=>{"succeeded"===e.status?F():M(e.payment_intent_secret||""),S()}})},E=(0,s.useMemo)(()=>({clientSecret:A,appearance:(0,e9.D)(t)}),[A,t]),L=e=>{g(e),e||(w(null),k(void 0),M(""))},T=e=>{var a;M(""),k(e),(null==(a=e.paymentIntent)?void 0:a.status)==="succeeded"&&F()},F=async()=>{L(!1),await r.invalidateQueries(eU.s.orgSubscription(a)),z.oR.success("Successfully topped up balance. It may take a minute to reflect in your account.")};return(0,n.jsx)("div",{className:"flex items-center justify-end py-4 px-8","data-sentry-component":"CreditTopUp","data-sentry-source-file":"CreditTopUp.tsx",children:(0,n.jsxs)(e5.lG,{open:h,onOpenChange:e=>L(e),"data-sentry-element":"Dialog","data-sentry-source-file":"CreditTopUp.tsx",children:[(0,n.jsx)(e5.zM,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"CreditTopUp.tsx",children:(0,n.jsx)(e2.G,{type:"default",className:"pointer-events-auto",disabled:!i||!o,tooltip:{content:{side:"bottom",text:o&&!i?"You need additional permissions to top up credits":void 0}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"CreditTopUp.tsx",children:"Top Up"})}),(0,n.jsxs)(e5.Cf,{onInteractOutside:e=>e.preventDefault(),"data-sentry-element":"DialogContent","data-sentry-source-file":"CreditTopUp.tsx",children:[(0,n.jsx)(eZ.A,{ref:C,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onOpen:()=>{void 0!==document&&document.body.classList.add("!pointer-events-auto")},onClose:()=>{void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onVerify:e=>{b(e),void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onExpire:()=>{b(null)},"data-sentry-element":"HCaptcha","data-sentry-source-file":"CreditTopUp.tsx"}),(0,n.jsxs)(e5.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"CreditTopUp.tsx",children:[(0,n.jsx)(e5.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"CreditTopUp.tsx",children:"Top Up Credits"}),(0,n.jsxs)(e5.rr,{className:"space-y-2","data-sentry-element":"DialogDescription","data-sentry-source-file":"CreditTopUp.tsx",children:[(0,n.jsx)("p",{className:"prose text-sm",children:"On successful payment, an invoice will be issued and you'll be granted credits. Credits will be applied to outstanding and future invoices and are not refundable. The topped up credits do not expire."}),(0,n.jsxs)("p",{className:"prose text-sm",children:["For larger discounted credit packages, please"," ",(0,n.jsx)(v(),{href:"/support/new?slug=".concat(a,"&subject=").concat(encodeURIComponent("I would like to inquire about larger credit packages"),"&category=").concat(u.S.SALES_ENQUIRY),target:"_blank","data-sentry-element":"Link","data-sentry-source-file":"CreditTopUp.tsx",children:"reach out."})]})]})]}),(0,n.jsx)(e5.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"CreditTopUp.tsx"}),(0,n.jsx)(X.lV,{...x,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"CreditTopUp.tsx",children:(0,n.jsxs)("form",{id:"credit-top-up",onSubmit:x.handleSubmit(P),children:[(0,n.jsxs)(e5.OO,{className:"flex flex-col gap-2","data-sentry-element":"DialogSection","data-sentry-source-file":"CreditTopUp.tsx",children:[(0,n.jsx)(X.zB,{control:x.control,name:"amount",render:e=>{let{field:a}=e;return(0,n.jsx)(eo.M,{label:"Amount (USD)",className:"gap-1",children:(0,n.jsx)(er.p,{...a,type:"number",placeholder:"100"})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreditTopUp.tsx"}),(0,n.jsx)(X.zB,{control:x.control,name:"paymentMethod",render:()=>(0,n.jsx)(ao,{ref:l,onSelectPaymentMethod:e=>x.setValue("paymentMethod",e),selectedPaymentMethod:x.getValues("paymentMethod"),readOnly:c||f}),"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreditTopUp.tsx"}),I&&I.error&&(0,n.jsxs)(eF.Fc,{variant:"destructive",children:[(0,n.jsx)(e0.A,{className:"h-4 w-4"}),(0,n.jsx)(eF.XL,{children:"Error confirming payment"}),(0,n.jsx)(eF.TN,{children:I.error.message})]}),(null==I?void 0:I.paymentIntent)&&"processing"===I.paymentIntent.status&&(0,n.jsxs)(eF.Fc,{variant:"default",children:[(0,n.jsx)(e1.A,{className:"h-4 w-4"}),(0,n.jsx)(eF.XL,{children:"Payment processing"}),(0,n.jsx)(eF.TN,{children:"Your payment is processing and we are waiting for a confirmation from your card issuer. If the payment goes through you'll automatically be credited. Please check back later."})]}),m&&(0,n.jsxs)(eF.Fc,{variant:"destructive",children:[(0,n.jsx)(e0.A,{className:"h-4 w-4"}),(0,n.jsx)(eF.XL,{children:"Error topping up balance"}),(0,n.jsx)(eF.TN,{children:m.message})]})]}),!(null==I?void 0:I.paymentIntent)&&(0,n.jsx)(e5.Es,{children:(0,n.jsx)(ee.$,{htmlType:"submit",type:"primary",loading:c||f,children:"Top Up"})})]})}),ac&&A&&(0,n.jsx)(eQ.Elements,{stripe:ac,options:E,children:(0,n.jsx)(ad.i,{paymentIntentSecret:A,onPaymentIntentConfirm:e=>T(e),onLoadingChange:e=>y(e)})})]})]})})},ap=()=>{var e;let{slug:a}=(0,r.g)(),{isSuccess:t,can:s}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions"),{data:o,error:d,isLoading:c,isError:x,isSuccess:h}=(0,i.j5)({orgSlug:a},{enabled:s}),g=(null!=(e=null==o?void 0:o.customer_balance)?e:0)/100,f=g<0,y=g>0,v=f&&0!==g?g.toFixed(2).toString().replace("-",""):g.toFixed(2);return(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"CreditBalance","data-sentry-source-file":"CreditBalance.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"CreditBalance.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12 pr-3",children:[(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Credit Balance"})}),(0,n.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"Credits will be applied to future invoices, before charging your payment method. If your credit balance runs out, your default payment method will be charged."})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"CreditBalance.tsx",children:t&&!s?(0,n.jsx)(m.A,{resourceText:"view this organization's credits"}):(0,n.jsx)(ey.lB,{footer:(0,n.jsx)(am,{slug:a}),children:(0,n.jsx)(ev.y9,{children:(0,n.jsxs)(ev.DE,{fullWidth:!0,loading:c,children:[x&&(0,n.jsx)(j.A,{subject:"Failed to retrieve organization customer profile",error:d}),h&&(0,n.jsxs)("div",{className:"flex w-full justify-between items-center",children:[(0,n.jsx)("span",{children:"Balance"}),(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[y&&(0,n.jsx)("h4",{className:"opacity-50",children:"-"}),(0,n.jsx)("h4",{className:"opacity-50",children:"$"}),(0,n.jsx)("h1",{className:"relative",children:v}),f&&(0,n.jsx)("h4",{className:"opacity-50",children:"/credits"})]})]})]})})})})]})},ax=(0,t(81915).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var ah=t(33924);async function ag(e){let{slug:a,paymentMethodId:t}=e;if(!a)throw Error("Slug is required");let{data:n,error:s}=await (0,C.yJ)("/platform/organizations/{slug}/payments/default",{body:{payment_method_id:t},params:{path:{slug:a}}});if(s)throw(0,C.H4)(s);return n}let af=function(){let{onSuccess:e,onError:a,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,V.jE)();return(0,K.n)(e=>ag(e),{async onSuccess(a,t,s){let{slug:r,paymentMethodId:l}=t;n.setQueriesData(O.O.paymentMethods(r),e=>e?{...e,defaultPaymentMethodId:l,data:e.data.map(e=>({...e,is_default:e.id===l}))}:e),await (null==e?void 0:e(a,t,s))},async onError(e,t,n){void 0===a?z.oR.error("Failed to mark payment method as default: ".concat(e.message)):a(e,t,n)},...t})};var ay=t(84305),av=t.n(ay),aj=t(77376);let ab=e=>{let{onCancel:a,onConfirm:t}=e,{data:r}=(0,d.s)(),{data:l,isLoading:i}=H({slug:null==r?void 0:r.slug}),[o,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!0),[p,x]=(0,s.useState)(!0),h=(0,V.jE)(),{mutateAsync:g}=af(),{mutateAsync:f}=q(),{mutateAsync:y}=Z(),{data:v,isLoading:j}=$({slug:null==r?void 0:r.slug}),b=(0,s.useRef)(null),N=async e=>{var a,n;e.preventDefault(),c(!0),void 0!==document&&document.body.classList.add("!pointer-events-auto");let s=await (null==(a=b.current)?void 0:a.confirmSetup());if(s){if(u&&r&&"string"==typeof(null==(n=s.setupIntent)?void 0:n.payment_method))try{await g({slug:r.slug,paymentMethodId:s.setupIntent.payment_method}),await h.invalidateQueries(O.O.paymentMethods(r.slug)),h.setQueriesData(O.O.paymentMethods(r.slug),e=>e?{...e,defaultPaymentMethodId:s.setupIntent.payment_method,data:e.data.map(e=>({...e,is_default:e.id===s.setupIntent.payment_method}))}:e)}catch(e){z.oR.error("Failed to set payment method as default")}else r&&await h.invalidateQueries(O.O.paymentMethods(r.slug));if(p)try{s.address&&(!av()(s.address,null==l?void 0:l.address)||(null==l?void 0:l.billing_name)!==s.customerName)&&await f({slug:null==r?void 0:r.slug,billing_name:s.customerName,address:s.address}),s.taxId&&!av()(s.taxId,v)&&await y({taxId:s.taxId,slug:null==r?void 0:r.slug})}catch(e){z.oR.error("Failed to update billing address")}c(!1),t()}else c(!1);void 0!==document&&document.body.classList.remove("!pointer-events-auto")};return i||j?(0,n.jsx)(ah.A.Content,{children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(ar.A,{}),(0,n.jsx)(ar.A,{className:"w-3/4"}),(0,n.jsx)(ar.A,{className:"w-1/2"}),(0,n.jsx)(ar.A,{}),(0,n.jsx)(ar.A,{}),(0,n.jsx)(ar.A,{})]})}):(0,n.jsxs)("div",{"data-sentry-component":"AddPaymentMethodForm","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:[(0,n.jsxs)(ah.A.Content,{className:"transition ".concat(o?"pointer-events-none opacity-75":"opacity-100"),"data-sentry-element":"Modal.Content","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:[(0,n.jsx)(al.S,{readOnly:o,email:null==r?void 0:r.billing_email,currentAddress:null==l?void 0:l.address,customerName:null==l?void 0:l.billing_name,currentTaxId:v,ref:b,"data-sentry-element":"NewPaymentMethodElement","data-sentry-source-file":"AddPaymentMethodForm.tsx"}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2 mt-4 mb-2",children:[(0,n.jsx)(as.S,{id:"save-as-default",checked:u,onCheckedChange:e=>{"boolean"==typeof e&&m(e)},"data-sentry-element":"Checkbox_Shadcn_","data-sentry-source-file":"AddPaymentMethodForm.tsx"}),(0,n.jsx)(aj.J,{htmlFor:"save-as-default",className:"text-foreground-light","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:"Save as default payment method"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2 mt-4 mb-2",children:[(0,n.jsx)(as.S,{id:"is-primary-billing-address",checked:p,onCheckedChange:e=>{"boolean"==typeof e&&x(e)},"data-sentry-element":"Checkbox_Shadcn_","data-sentry-source-file":"AddPaymentMethodForm.tsx"}),(0,n.jsx)(aj.J,{htmlFor:"is-primary-billing-address",className:"text-foreground-light","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:"Use the billing address as my organization's primary address"})]})]}),(0,n.jsx)(ah.A.Separator,{"data-sentry-element":"Modal.Separator","data-sentry-source-file":"AddPaymentMethodForm.tsx"}),(0,n.jsxs)(ah.A.Content,{className:"flex items-center space-x-2","data-sentry-element":"Modal.Content","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:[(0,n.jsx)(ee.$,{htmlType:"button",size:"small",type:"default",onClick:a,block:!0,disabled:o,"data-sentry-element":"Button","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:"Cancel"}),(0,n.jsx)(ee.$,{block:!0,htmlType:"button",size:"small",type:"primary",loading:o,disabled:o,onClick:N,"data-sentry-element":"Button","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:"Add payment method"})]})]})},aN=(0,eX.c)(ek.WS),aw=e=>{let{visible:a,returnUrl:t,onCancel:r,onConfirm:l}=e,{resolvedTheme:i}=(0,e_.D)(),[o,c]=(0,s.useState)(),{data:u}=(0,d.s)(),[m,p]=(0,s.useState)(null),[x,h]=(0,s.useState)(null),{mutate:g}=ae({onSuccess:e=>{c(e)},onError:e=>{z.oR.error("Failed to setup intent: ".concat(e.message))}}),f=(0,s.useCallback)(e=>{h(e)},[]);(0,s.useEffect)(()=>{let e=async e=>{let a=null==u?void 0:u.slug;return a?e?void(c(void 0),g({slug:a,hcaptchaToken:e})):console.error("HCaptcha token required"):console.error("Slug is required")};(async()=>{if(a&&x){let a=m;try{if(!a){var t;let e=await x.execute({async:!0});a=null!=(t=null==e?void 0:e.response)?t:null}}catch(e){return}await e(null!=a?a:void 0),y()}})()},[a,x]);let y=()=>{p(null),null==x||x.resetCaptcha()},v={clientSecret:o?o.client_secret:"",appearance:(0,e9.D)(i)},j=()=>(c(void 0),r());return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eZ.A,{ref:f,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onOpen:()=>{void 0!==document&&document.body.classList.add("!pointer-events-auto")},onClose:()=>{j(),void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onVerify:e=>{p(e),void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onExpire:()=>{p(null)},"data-sentry-element":"HCaptcha","data-sentry-source-file":"AddNewPaymentMethodModal.tsx"}),(0,n.jsx)(ah.A,{hideFooter:!0,size:"medium",visible:a&&void 0!==o,header:"Add new payment method",onCancel:j,className:"PAYMENT","data-sentry-element":"Modal","data-sentry-source-file":"AddNewPaymentMethodModal.tsx",children:(0,n.jsx)(eQ.Elements,{stripe:aN,options:v,"data-sentry-element":"Elements","data-sentry-source-file":"AddNewPaymentMethodModal.tsx",children:(0,n.jsx)(ab,{returnUrl:t,onCancel:j,onConfirm:()=>(c(void 0),l()),"data-sentry-element":"AddPaymentMethodForm","data-sentry-source-file":"AddNewPaymentMethodModal.tsx"})})})]})},aC=e=>{var a,t;let{selectedPaymentMethod:s,onClose:l}=e,{slug:i}=(0,r.g)(),{mutate:o,isLoading:d}=af({onSuccess:()=>{z.oR.success("Successfully changed payment method to the card ending with ".concat(s.card.last4)),l()},onError:e=>{z.oR.error("Failed to change payment method: ".concat(e.message))}}),c=async()=>i?s?void o({slug:i,paymentMethodId:s.id}):console.error("Card ID is required"):console.error("Slug is required");return(0,n.jsx)(ah.A,{visible:void 0!==s,size:"medium",header:"Confirm to use payment method ending with ".concat(null==s||null==(a=s.card)?void 0:a.last4),onCancel:()=>l(),customFooter:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(ee.$,{type:"default",disabled:d,onClick:()=>l(),children:"Cancel"}),(0,n.jsx)(ee.$,{type:"primary",disabled:d,loading:d,onClick:c,children:"Confirm"})]}),"data-sentry-element":"Modal","data-sentry-component":"ChangePaymentMethodModal","data-sentry-source-file":"ChangePaymentMethodModal.tsx",children:(0,n.jsx)(ah.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"ChangePaymentMethodModal.tsx",children:(0,n.jsxs)("p",{className:"text-sm",children:["Upon clicking confirm, all future charges will be deducted from the card ending with"," ",null==s||null==(t=s.card)?void 0:t.last4,". There are no immediate charges."]})})})};var aS=t(38918),a_=t(60123),aA=t(34531),aM=t(64495);let aI=e=>{var a,t,s,r;let{paymentMethod:l,canUpdatePaymentMethods:i=!0,paymentMethodType:o,subscriptionPlan:d,paymentMethodCount:c,setSelectedMethodForUse:u,setSelectedMethodToDelete:m}=e,p=l.is_default,x=!l.is_default||"free"===d&&1===c,h=null!=(s=null==(a=l.card)?void 0:a.exp_year)?s:0,g=null!=(r=null==(t=l.card)?void 0:t.exp_month)?r:0,f=new Date().getMonth()+1,y=new Date().getFullYear();return l.card?(0,n.jsxs)("div",{className:"flex items-center justify-between gap-8","data-sentry-component":"CreditCard","data-sentry-source-file":"CreditCard.tsx",children:[(0,n.jsxs)("div",{className:"flex items-center gap-8",children:[(0,n.jsx)("img",{alt:"Credit card brand",src:"".concat(ek.o2,"/img/payment-methods/").concat(l.card.brand.replace(" ","-").toLowerCase(),".png"),width:"32"}),(0,n.jsxs)("p",{className:"prose text-sm font-mono",children:["**** **** **** ",l.card.last4]}),(0,n.jsxs)("p",{className:"text-sm tabular-nums",children:["Expires: ",l.card.exp_month,"/",l.card.exp_year]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[h===y&&g===f&&(0,n.jsx)(aA.E,{variant:"warning",children:"Expiring soon"}),(h<y||h===y&&g<f)&&(0,n.jsx)(aA.E,{variant:"destructive",children:"Expired"}),p&&(0,n.jsx)(aA.E,{variant:"brand",children:"Active"}),i&&(0,n.jsxs)(aM.rI,{children:[(0,n.jsx)(aM.ty,{asChild:!0,children:(0,n.jsx)(ee.$,{type:"outline",className:"hover:border-muted px-1",icon:(0,n.jsx)(aS.A,{}),"aria-label":"More options"})}),(0,n.jsxs)(aM.SQ,{align:"end",className:"w-36",children:["card"===o&&!p&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(aM._2,{onClick:()=>null==u?void 0:u(l),children:(0,n.jsx)("p",{children:"Use this card"})},"make-default"),(0,n.jsx)(aM.mB,{})]}),(0,n.jsx)(a_.x,{disabled:!x,className:"!pointer-events-auto",onClick:()=>null==m?void 0:m(l),tooltip:{content:{side:"left",text:x?void 0:"Unable to delete a card that is currently active"}},children:(0,n.jsx)("p",{children:"Delete card"})},"delete-method")]})]})]})]},l.id):null};async function ak(e){let{slug:a,cardId:t}=e,{data:n,error:s}=await (0,C.yH)("/platform/organizations/{slug}/payments",{body:{card_id:t},params:{path:{slug:a}}});return s&&(0,C.H4)(s),n}let aP=function(){let{onSuccess:e,onError:a,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,V.jE)();return(0,K.n)(e=>ak(e),{async onSuccess(a,t,s){let{slug:r}=t;await n.invalidateQueries(O.O.paymentMethods(r)),await (null==e?void 0:e(a,t,s))},async onError(e,t,n){void 0===a?z.oR.error("Failed to delete payment method: ".concat(e.message)):a(e,t,n)},...t})};var aE=t(50922);let aL=e=>{var a;let{selectedPaymentMethod:t,onClose:s}=e,{slug:l}=(0,r.g)(),{mutate:i,isLoading:o}=aP({onSuccess:()=>{var e;z.oR.success("Successfully removed payment method ending with ".concat(null==t||null==(e=t.card)?void 0:e.last4)),s()}}),d=async()=>l?t?void i({slug:l,cardId:t.id}):console.error("Card ID is required"):console.error("Slug is required");return(0,n.jsx)(ah.A,{visible:void 0!==t,size:"medium",header:"Confirm to delete payment method ending with ".concat(null==t||null==(a=t.card)?void 0:a.last4),onCancel:()=>s(),customFooter:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(ee.$,{type:"default",disabled:o,onClick:()=>s(),children:"Cancel"}),(0,n.jsx)(ee.$,{type:"primary",disabled:o,loading:o,onClick:d,children:"Confirm"})]}),"data-sentry-element":"Modal","data-sentry-component":"DeletePaymentMethodModal","data-sentry-source-file":"DeletePaymentMethodModal.tsx",children:(0,n.jsx)(ah.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"DeletePaymentMethodModal.tsx",children:(0,n.jsx)(aE.Z,{type:"default",title:"This will permanently delete your payment method.",description:"You can re-add the payment method any time.","data-sentry-element":"Admonition","data-sentry-source-file":"DeletePaymentMethodModal.tsx"})})})},aT=()=>{var e,a,t;let{slug:o}=(0,r.g)(),{data:c}=(0,d.s)(),[x,h]=(0,s.useState)(),[g,f]=(0,s.useState)(),[y,N]=(0,s.useState)(!1),{data:w}=(0,i.j5)({orgSlug:o}),{data:C,error:S,isLoading:_,isError:A,isSuccess:I}=at({slug:o}),{isSuccess:k,can:P}=(0,p.hl)(u.aG.BILLING_READ,"stripe.payment_methods"),E=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.payment_methods");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"PaymentMethods.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"PaymentMethods.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Payment Methods"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light mb-2 pr-4 m-0",children:"Payments for your subscription are made using the default card."})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"PaymentMethods.tsx",children:(null==c?void 0:c.managed_by)!==void 0&&(null==c?void 0:c.managed_by)!==D.Kf.SUPABASE?(0,n.jsx)(U.A,{managedBy:null==c?void 0:c.managed_by,resource:"Payment Methods",cta:{installationId:null==c?void 0:c.partner_id}}):k&&!P?(0,n.jsx)(m.A,{resourceText:"view this organization's payment methods"}):(0,n.jsxs)(n.Fragment,{children:[_&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),A&&(0,n.jsx)(j.A,{subject:"Failed to retrieve payment methods",error:S}),I&&(0,n.jsxs)(n.Fragment,{children:[(null==w?void 0:w.payment_method_type)==="invoice"&&(0,n.jsx)(eR.F,{withIcon:!0,variant:"info",title:"Payment is currently by invoice",actions:[(0,n.jsx)(ee.$,{asChild:!0,type:"default",children:(0,n.jsx)(v(),{href:"/support/new?category=billing&subject=Request%20to%20change%20payment%20method",target:"_blank",rel:"noreferrer",className:"ml-3",children:"Contact support"})},"payment-method-support")],children:"You get a monthly invoice and payment link via email. To change your payment method, please contact us via our support form."}),(0,n.jsx)(ey.lB,{footer:(0,n.jsxs)("div",{className:"flex items-center justify-between py-4 px-8",children:[E?(0,n.jsx)("div",{}):(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"You need additional permissions to manage payment methods"}),(0,n.jsx)(ee.$,{type:"default",icon:(0,n.jsx)(e6.A,{}),disabled:!E,onClick:()=>N(!0),children:"Add new card"})]}),children:(0,n.jsx)(ev.y9,{children:(0,n.jsx)(ev.DE,{fullWidth:!0,loading:!1,children:(null!=(t=null==C||null==(e=C.data)?void 0:e.length)?t:0)===0?(0,n.jsxs)("div",{className:"flex items-center gap-2 opacity-50",children:[(0,n.jsx)(ax,{size:16,strokeWidth:1.5}),(0,n.jsx)("p",{className:"text-sm",children:"No payment methods"})]}):(0,n.jsx)("div",{className:"space-y-3",children:null==C||null==(a=C.data)?void 0:a.map(e=>{var a;return(0,n.jsx)(aI,{paymentMethod:e,canUpdatePaymentMethods:E,paymentMethodType:null==w?void 0:w.payment_method_type,setSelectedMethodForUse:h,setSelectedMethodToDelete:f,paymentMethodCount:null!=(a=null==C?void 0:C.data.length)?a:0,subscriptionPlan:null==w?void 0:w.plan.id},e.id)})})})})})]})]})})]}),(0,n.jsx)(aw,{visible:y,returnUrl:"".concat((0,M.AP)(),"/org/").concat(o,"/billing"),onCancel:()=>N(!1),onConfirm:()=>{N(!1),z.oR.success("Successfully added new payment method")},"data-sentry-element":"AddNewPaymentMethodModal","data-sentry-source-file":"PaymentMethods.tsx"}),(0,n.jsx)(aC,{selectedPaymentMethod:x,onClose:()=>h(void 0),"data-sentry-element":"ChangePaymentMethodModal","data-sentry-source-file":"PaymentMethods.tsx"}),(0,n.jsx)(aL,{selectedPaymentMethod:g,onClose:()=>f(void 0),"data-sentry-element":"DeletePaymentMethodModal","data-sentry-source-file":"PaymentMethods.tsx"})]})};var aF=t(74239),aR=t(33312),aD=t.n(aR),aB=t(67908),az=t(58444),aU=t(64442);async function aO(e){let{organizationSlug:a,tier:t}=e;if(!a)throw Error("organizationSlug is required");if(!t)throw Error("tier is required");let{data:n,error:s}=await (0,C.bE)("/platform/organizations/{slug}/billing/subscription/preview",{params:{path:{slug:a}},body:{tier:t},headers:{Version:"2"}});return s&&(0,C.H4)(s),n}let aG=function(e){let{organizationSlug:a,tier:t}=e,{enabled:n=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,w.I)(O.O.subscriptionPreview(a,t),()=>aO({organizationSlug:a,tier:t}),{enabled:n&&void 0!==a&&void 0!==t,...s,retry:(e,a)=>("object"!=typeof a||null===a||!("code"in a)||400!==a.code)&&e<3})};async function aH(e,a){var t;let{slug:n}=e;if(!n)throw Error("Organization slug is required");let{data:s,error:r}=await (0,C.Jt)("/platform/organizations/{slug}",{params:{path:{slug:n}},signal:a});return r&&(0,C.H4)(r),{...s,billing_email:null!=(t=s.billing_email)?t:"Unknown",managed_by:s.slug.startsWith("vercel_icfg_")?"vercel-marketplace":"supabase",partner_id:s.slug.startsWith("vercel_")?s.slug.replace("vercel_",""):void 0}}let aV=function(e){let{slug:a}=e,{enabled:t=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,w.I)(O.O.detail(a),e=>{let{signal:t}=e;return aH({slug:a},t)},{enabled:t&&void 0!==a,...n,staleTime:18e5})};var aK=t(61789);async function aW(e,a){let{orgSlug:t}=e;if(!t)throw Error("orgSlug is required");let{error:n,data:s}=await (0,C.Jt)("/platform/organizations/{slug}/billing/plans",{params:{path:{slug:t}},signal:a});return n&&(0,C.H4)(n),s}let aq=function(e){let{orgSlug:a}=e,{enabled:t=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,p.SE)(u.aG.BILLING_READ,"stripe.subscriptions");return(0,w.I)(eU.s.orgPlans(a),e=>{let{signal:t}=e;return aW({orgSlug:a},t)},{enabled:t&&void 0!==a&&s,...n})};var aY=t(86992),a$=t(22098),aJ=t(87714),aZ=t(6852);let aQ=e=>{let{projectAddon:a}=e,t=a.addons.find(e=>"compute_instance"===e.type),s=a.addons.filter(e=>!["log_drain","auth_mfa_phone"].includes(e.type)).map(e=>"compute_instance"===e.type?"".concat(e.variant.name," Compute Instance"):e.variant.name);return(0,n.jsxs)("li",{className:"list-disc ml-6","data-sentry-component":"ProjectDowngradeListItem","data-sentry-source-file":"DowngradeModal.tsx",children:[a.name,": ",s.join(", ")," will be removed.",t?(0,n.jsxs)(n.Fragment,{children:[" ","Project will also ",(0,n.jsx)("span",{className:"font-bold",children:"need to be restarted"})," due to change in compute instance"]}):""]})},aX=e=>{var a;let{visible:t,subscription:r,onClose:l,onConfirm:i,projects:o}=e,d=(0,s.useMemo)(()=>a$.v.find(e=>"tier_free"===e.id),[]),c=(null==r?void 0:r.project_addons.flatMap(e=>{let a=e.addons.filter(e=>"ci_micro"!==e.variant.identifier);return a.length?{...e,addons:a}:[]}))||[],u=o.some(e=>"micro"===e.infra_compute_size);return(0,n.jsx)(ah.A,{size:"large",alignFooter:"right",variant:"warning",visible:t,onCancel:l,onConfirm:i,header:"Confirm to downgrade to ".concat(null==d?void 0:d.name," plan"),"data-sentry-element":"Modal","data-sentry-component":"DowngradeModal","data-sentry-source-file":"DowngradeModal.tsx",children:(0,n.jsxs)(ah.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"DowngradeModal.tsx",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(aE.Z,{type:"warning",title:"Downgrading to the Free Plan will lead to reductions in your organization's quota",description:"If you're already past the limits of the Free Plan, your projects could become unresponsive or enter read only mode.","data-sentry-element":"Admonition","data-sentry-source-file":"DowngradeModal.tsx"}),((null!=(a=c.length)?a:0)>0||u)&&(0,n.jsx)(aE.Z,{type:"warning",title:"Projects affected by the downgrade",children:(0,n.jsxs)("ul",{className:"space-y-1 max-h-[100px] overflow-y-auto",children:[c.map(e=>(0,n.jsx)(aQ,{projectAddon:e},e.ref)),o.filter(e=>"micro"===e.infra_compute_size).map(e=>(0,n.jsxs)("li",{className:"list-disc ml-6",children:[e.name,": Compute will be downgraded. Project will also"," ",(0,n.jsx)("span",{className:"font-bold",children:"need to be restarted"}),"."]},e.ref))]})})]}),(0,n.jsxs)("ul",{className:"mt-4 space-y-5 text-sm",children:[(0,n.jsxs)("li",{className:"flex items-center gap-3",children:[(0,n.jsx)(aJ.A,{size:18,"data-sentry-element":"PauseCircle","data-sentry-source-file":"DowngradeModal.tsx"}),(0,n.jsx)("span",{children:"Projects will be paused after a week of inactivity"})]}),(0,n.jsxs)("li",{className:"flex items-center gap-3 mb-2",children:[(0,n.jsx)(aZ.A,{size:18,"data-sentry-element":"MinusCircle","data-sentry-source-file":"DowngradeModal.tsx"}),(0,n.jsx)("span",{children:"Add ons from all projects under this organization will be removed."})]}),(0,n.jsx)("li",{className:"flex gap-3",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("strong",{children:["Before you downgrade to the ",null==d?void 0:d.name," plan, consider:"]}),(0,n.jsxs)("ul",{className:"space-y-2 mt-2",children:[(0,n.jsx)("li",{className:"list-disc ml-6 text-foreground-light",children:"Your projects no longer require their respective add ons."}),(0,n.jsxs)("li",{className:"list-disc ml-6 text-foreground-light",children:["Your resource consumption are well within the ",null==d?void 0:d.name," plan's quota."]}),(0,n.jsx)("li",{className:"list-disc ml-6 text-foreground-light",children:"Alternatively, you may also transfer projects across organizations."})]})]})})]}),(null==r?void 0:r.billing_via_partner)===!0&&"fly"===r.billing_partner&&(0,n.jsx)("p",{className:"mt-4 text-sm",children:"Your organization will be downgraded at the end of your current billing cycle."})]})})},a0=e=>{let{plan:a,isCurrentPlan:t}=e,{data:s}=(0,d.s)(),r=null==s?void 0:s.slug,l=a.features,i=null==s?void 0:s.plan.name,{mutate:o}=(0,aY.h)();return(0,n.jsxs)("div",{className:(0,c.cn)("grid grid-cols-1 md:grid-cols-3 border rounded-md bg-studio","py-4 col-span-12 justify-between gap-x-8"),"data-sentry-component":"EnterpriseCard","data-sentry-source-file":"EnterpriseCard.tsx",children:[(0,n.jsxs)("div",{className:"flex flex-col justify-center px-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("p",{className:(0,c.cn)("text-brand text-sm uppercase"),children:a.name}),t?(0,n.jsx)("div",{className:"text-xs bg-surface-300 text-foreground-light rounded px-2 py-0.5",children:"Current plan"}):a.nameBadge?(0,n.jsx)("div",{className:"text-xs bg-surface-200 text-brand rounded px-2 py-0.5",children:a.nameBadge}):null]}),(0,n.jsx)("p",{className:"text-sm mt-2 mb-4",children:a.description}),(0,n.jsx)(ee.$,{block:!0,asChild:!0,type:"default",size:"tiny",onClick:()=>o({action:"studio_pricing_plan_cta_clicked",properties:{selectedPlan:"Enterprise",currentPlan:i},groups:{organization:null!=r?r:"Unknown"}}),"data-sentry-element":"Button","data-sentry-source-file":"EnterpriseCard.tsx",children:(0,n.jsx)("a",{href:a.href,className:"hidden md:block",target:"_blank",children:a.cta})})]}),(0,n.jsxs)("div",{className:"flex flex-col justify-center col-span-2 px-4 md:px-0",children:[(0,n.jsx)("ul",{role:"list",className:"text-xs text-foreground-light md:grid md:grid-cols-2 md:gap-x-10",children:l.map(e=>(0,n.jsxs)("li",{className:"flex items-center py-2 first:mt-0",children:[(0,n.jsx)(et.A,{className:"text-brand h-4 w-4","aria-hidden":"true",strokeWidth:3}),(0,n.jsx)("span",{className:"text-foreground mb-0 ml-3 ",children:"string"==typeof e?e:e[0]})]},"string"==typeof e?e:e[0]))}),(0,n.jsx)(ee.$,{block:!0,asChild:!0,type:"default",size:"tiny",onClick:()=>o({action:"studio_pricing_plan_cta_clicked",properties:{selectedPlan:"Enterprise",currentPlan:i},groups:{organization:null!=r?r:"Unknown"}}),"data-sentry-element":"Button","data-sentry-source-file":"EnterpriseCard.tsx",children:(0,n.jsx)("a",{href:a.href,className:"visible md:hidden mt-8",target:"_blank",children:a.cta})})]})]},a.id)};var a1=t(5648),a2=t(83815),a4=t(48192);let a3=e=>{let{visible:a,projects:t,onClose:l}=e,{slug:i}=(0,r.g)(),[o,d]=(0,s.useState)(""),[u,m]=(0,s.useState)([]),p=(0,eI._P)("disableProjectCreationAndUpdate"),{mutate:x,isLoading:h}=eG({onError:e=>{z.oR.error("Failed to downgrade project: ".concat(e.message))}}),{mutateAsync:g,isLoading:f}=(0,a2.$)(),y=h||f,v=t.filter(e=>"nano"!==e.infra_compute_size),j=v.length>0,[b]=(0,s.useState)(()=>[...a1.U.sort(()=>Math.random()-.5),{value:"None of the above"}]),N=e=>{m([e])},w=(e=>{let a=a1.U.find(a=>a.value===e);return(null==a?void 0:a.label)||"What can we improve on?"})(u[0]),C=async()=>{if(0===u.length)return z.oR.error("Please select a reason for canceling your subscription");await S()},S=async()=>{if(!i)return console.error("Slug is required");x({slug:i,tier:"tier_free"},{onSuccess:async()=>{try{await g({orgSlug:i,reasons:u.reduce((e,a)=>"".concat(e,"- ").concat(a,"\n"),""),message:o,exitAction:"downgrade"})}catch(e){}finally{z.oR.success(j?"Successfully downgraded organization to the Free Plan. Your projects are currently restarting to update their compute instances.":"Successfully downgraded organization to the Free Plan",{duration:j?8e3:4e3}),l(!0),window.scrollTo({top:0,left:0,behavior:"smooth"})}}})};return(0,n.jsxs)(ah.A,{hideFooter:!0,size:"xlarge",visible:a,onCancel:l,header:"Help us improve","data-sentry-element":"Modal","data-sentry-component":"ExitSurveyModal","data-sentry-source-file":"ExitSurveyModal.tsx",children:[(0,n.jsx)(ah.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"ExitSurveyModal.tsx",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Share with us why you're downgrading your plan."}),(0,n.jsxs)("div",{className:"space-y-8 mt-6",children:[(0,n.jsx)("div",{className:"flex flex-wrap gap-2","data-toggle":"buttons",children:b.map(e=>{let a=u[0]===e.value;return(0,n.jsxs)("label",{className:(0,c.cn)("flex cursor-pointer items-center space-x-2 rounded-md py-1","pl-2 pr-3 text-center text-sm","shadow-sm transition-all duration-100",a?"bg-foreground text-background opacity-100 hover:bg-opacity-75":"bg-border-strong text-foreground opacity-75 hover:opacity-100"),children:[(0,n.jsx)("input",{type:"radio",name:"options",value:e.value,className:"hidden",checked:a,onChange:()=>N(e.value)}),(0,n.jsx)("div",{children:e.value})]},e.value)})}),(0,n.jsxs)("div",{className:"text-area-text-sm flex flex-col gap-y-2",children:[(0,n.jsx)("label",{className:"text-sm whitespace-pre-line break-words",children:w}),(0,n.jsx)(a4.A.TextArea,{id:"message",name:"message",value:o,onChange:e=>d(e.target.value),rows:3,"data-sentry-element":"Input.TextArea","data-sentry-source-file":"ExitSurveyModal.tsx"})]})]}),j&&(0,n.jsxs)(eR.F,{withIcon:!0,variant:"warning",title:"".concat(v.length," of your projects will be restarted upon clicking confirm,"),children:["This is due to changes in compute instances from the downgrade. Affected projects include ",v.map(e=>e.name).join(", "),"."]})]})}),(0,n.jsxs)("div",{className:"flex items-center justify-between border-t px-4 py-4",children:[(0,n.jsx)("p",{className:"text-xs text-foreground-lighter",children:"The unused amount for the remaining time of your billing cycle will be refunded as credits"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(ee.$,{type:"default",onClick:()=>l(),"data-sentry-element":"Button","data-sentry-source-file":"ExitSurveyModal.tsx",children:"Cancel"}),(0,n.jsx)(eD.A,{projectUpdateDisabled:p,"data-sentry-element":"ProjectUpdateDisabledTooltip","data-sentry-source-file":"ExitSurveyModal.tsx",children:(0,n.jsx)(ee.$,{type:"danger",className:"pointer-events-auto",loading:y,disabled:p||y,onClick:C,"data-sentry-element":"Button","data-sentry-source-file":"ExitSurveyModal.tsx",children:"Confirm downgrade"})})]})]})]})},a5=e=>{let{visible:a,onClose:t}=e,{data:s}=(0,d.s)(),r=null==s?void 0:s.slug,{data:l}=(0,aU.A)({slug:r},{enabled:a});return(0,n.jsxs)(ah.A,{hideFooter:!0,visible:a,size:"medium",header:"Your organization has members who have exceeded their free project limits",onCancel:t,"data-sentry-element":"Modal","data-sentry-component":"MembersExceedLimitModal","data-sentry-source-file":"MembersExceedLimitModal.tsx",children:[(0,n.jsx)(ah.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"MembersExceedLimitModal.tsx",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"The following members have reached their maximum limits for the number of active free plan projects within organizations where they are an administrator or owner:"}),(0,n.jsx)("ul",{className:"pl-5 text-sm list-disc text-foreground-light",children:(l||[]).map((e,a)=>(0,n.jsxs)("li",{children:[e.username||e.primary_email," (Limit: ",e.free_project_limit," free projects)"]},"member-".concat(a)))}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"These members will need to either delete, pause, or upgrade one or more of these projects before you're able to downgrade this project."})]})}),(0,n.jsx)(ah.A.Separator,{"data-sentry-element":"Modal.Separator","data-sentry-source-file":"MembersExceedLimitModal.tsx"}),(0,n.jsx)(ah.A.Content,{className:"flex items-center gap-2","data-sentry-element":"Modal.Content","data-sentry-source-file":"MembersExceedLimitModal.tsx",children:(0,n.jsx)(ee.$,{htmlType:"button",type:"default",onClick:t,block:!0,"data-sentry-element":"Button","data-sentry-source-file":"MembersExceedLimitModal.tsx",children:"Understood"})})]})};async function a8(e){let{payment_intent_id:a,slug:t}=e;if(!t)throw Error("Organization slug is required to confirm pending subscription change");let{data:n,error:s}=await (0,C.bE)("/platform/organizations/{slug}/billing/subscription/confirm",{params:{path:{slug:t}},body:{payment_intent_id:a}});return s&&(0,C.H4)(s),n}let a6=function(){let{onSuccess:e,onError:a,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,V.jE)();return(0,K.n)(e=>a8(e),{async onSuccess(a,t,s){let{slug:r}=t;await new Promise(e=>setTimeout(e,2e3)),await Promise.all([n.invalidateQueries(eU.s.orgSubscription(r)),n.invalidateQueries(eU.s.orgPlans(r)),n.invalidateQueries(ez.E.orgUsage(r)),n.invalidateQueries(S.x.orgUpcomingPreview(r)),n.invalidateQueries(O.O.detail(r)),n.invalidateQueries(O.O.list()),n.invalidateQueries(O.O.paymentMethods(r))]),await (null==e?void 0:e(a,t,s))},async onError(e,t,n){void 0===a?z.oR.error(e.message,{dismissible:!0,duration:1e4}):a(e,t,n)},...t})},a9=(0,eX.c)(ek.WS),a7={tier_pro:"the Pro plan to unlock unlimited projects, daily backups, and email support whenever you need it",tier_team:"the Team plan for SOC2, SSO, priority support and greater data and log retention",default:"to a new plan"},te={tier_free:"the Free plan with limited resources and active projects",tier_pro:"the Pro plan",default:"to a lower plan"},ta=e=>{var a,t,r,l,i,o,c,u,m,p;let{selectedTier:x,onClose:h,planMeta:g,subscriptionPreviewError:f,subscriptionPreviewIsLoading:y,subscriptionPreviewInitialized:N,subscriptionPreview:w,subscription:C,currentPlanMeta:S,projects:_}=e,{resolvedTheme:A}=(0,e_.D)(),{data:k}=(0,d.s)(),[E,L]=(0,s.useState)(),[T,F]=(0,s.useState)(null),[R,D]=(0,s.useState)(!1),B=(0,s.useRef)(null),U=(null==C?void 0:C.billing_via_partner)===!0,O=null==C?void 0:C.billing_partner,G=(0,s.useMemo)(()=>({clientSecret:T,appearance:(0,e9.D)(A)}),[T,A]),H=(0,s.useMemo)(()=>{var e;return(0,az.O8)(null==C||null==(e=C.plan)?void 0:e.id,null==g?void 0:g.id)},[g,C]),V=(0,s.useMemo)(()=>a$.v.find(e=>e.id===x),[x]),K=()=>{D(!1),z.oR.success("Successfully ".concat("downgrade"===H?"downgraded":"upgraded"," subscription to ").concat(null==V?void 0:V.name,"!")),h(),window.scrollTo({top:0,left:0,behavior:"smooth"})},{mutate:W,isLoading:q}=eG({onSuccess:e=>{if(e.pending_payment_intent_secret)return void F(e.pending_payment_intent_secret);K()},onError:e=>{D(!1),z.oR.error("Unable to update subscription: ".concat(e.message))}}),{mutate:Y,isLoading:$}=a6({onSuccess:()=>{K()},onError:e=>{z.oR.error("Unable to update subscription: ".concat(e.message))}}),J=async e=>{var a;F(""),(null==(a=e.paymentIntent)?void 0:a.status)==="succeeded"?await Y({slug:null==k?void 0:k.slug,payment_intent_id:e.paymentIntent.id}):(D(!1),z.oR.error("Could not confirm payment. Please try again or use a different card."))},Z=async()=>{var e,a,t,n,s;if(!(null==k?void 0:k.slug))return console.error("org slug is required");if(!x)return console.error("Selected plan is required");D(!0);let r=await (null==(e=B.current)?void 0:e.createPaymentMethod());if(r?L(r.paymentMethod.id):D(!1),!r&&(null==C?void 0:C.payment_method_type)!=="invoice"&&"upgrade"===H)return;let l=(null==C||null==(a=C.plan)?void 0:a.id)==="team"&&x===ek.V$.PRO?ek.V$.PAYG:x;W({slug:null==k?void 0:k.slug,tier:l,paymentMethod:null==r||null==(t=r.paymentMethod)?void 0:t.id,address:null==r?void 0:r.address,tax_id:null!=(n=null==r?void 0:r.taxId)?n:void 0,billing_name:null!=(s=null==r?void 0:r.customerName)?s:void 0})},Q=(null==V?void 0:V.features)||[],X=(null==S?void 0:S.features)||[],ea="downgrade"===H?X.filter(e=>{let a="string"==typeof e?e:e[0];return!Q.some(e=>("string"==typeof e?e:e[0])===a)}):[],en=Math.floor(Date.now()/1e3),es=(null==C?void 0:C.current_period_end)-en,er=(null==C?void 0:C.current_period_end)-(null==C?void 0:C.current_period_start),el=(null!=(i=null==S?void 0:S.price)?i:0)*(es/er),ei=null!=(o=Number(null==V?void 0:V.priceMonthly))?o:0,eo=-((null!=(c=null==C?void 0:C.customer_balance)?c:0)/100*1),ed=Math.max(0,ei-el-eo);return(0,n.jsx)(e5.lG,{open:void 0!==x&&"tier_free"!==x,onOpenChange:e=>{q||R||$||e||h()},"data-sentry-element":"Dialog","data-sentry-component":"SubscriptionPlanUpdateDialog","data-sentry-source-file":"SubscriptionPlanUpdateDialog.tsx",children:(0,n.jsxs)(e5.Cf,{onOpenAutoFocus:e=>e.preventDefault(),size:"xlarge",className:"p-0 overflow-y-auto max-h-[1000px]","data-sentry-element":"DialogContent","data-sentry-source-file":"SubscriptionPlanUpdateDialog.tsx",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 h-full items-stretch",children:[(0,n.jsxs)("div",{className:"p-8 pb-8 flex flex-col xl:col-span-3",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{children:[!U&&null!=w&&"upgrade"===H&&(0,n.jsx)("div",{className:"space-y-2 mb-4",children:(0,n.jsx)(ao,{ref:B,selectedPaymentMethod:E,onSelectPaymentMethod:e=>L(e),readOnly:R||$||q})}),U&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("p",{className:"text-sm",children:["This organization is billed through our partner"," ",(0,az.mS)(O),"."," ","aws"===O?(0,n.jsx)(n.Fragment,{children:"The organization's credit balance will be decreased accordingly."}):(0,n.jsx)(n.Fragment,{children:"You will be charged by them directly."})]}),U&&"fly"===O&&(null==w?void 0:w.plan_change_type)==="downgrade"&&(0,n.jsx)("p",{className:"text-sm",children:"Your organization will be downgraded at the end of your current billing cycle."})]})]}),y&&(0,n.jsxs)("div",{className:"space-y-2 mb-4 mt-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),N&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"mt-2 mb-4 text-foreground-light text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 border-b border-muted text-foreground",children:[(0,n.jsx)("div",{className:"py-2 pl-0",children:"Charge today"}),(0,n.jsxs)("div",{className:"py-2 pr-0 text-right",translate:"no",children:[(0,M.vv)(ed),(null==C||null==(a=C.plan)?void 0:a.id)!=="free"&&(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(v(),{href:"/org/".concat(null==k?void 0:k.slug,"/billing#breakdown"),className:"text-sm text-brand hover:text-brand-600 transition",target:"_blank",children:"+ current spend"})]})]})]}),(null==C||null==(t=C.plan)?void 0:t.id)!=="free"&&(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 border-b border-muted text-xs",children:[(0,n.jsxs)("div",{className:"py-2 pl-0 flex items-center gap-1",children:[(0,n.jsxs)("span",{children:["Unused Time on ",null==C||null==(r=C.plan)?void 0:r.name," Plan"]}),(0,n.jsx)(P.I,{className:"max-w-sm",children:"Your previous plan was charged upfront, so a plan change will prorate any unused time in credits. If the prorated credits exceed the new plan charge, the excessive credits are added to your organization for future use."})]}),(0,n.jsxs)("div",{className:"py-2 pr-0 text-right",translate:"no",children:["-",(0,M.vv)(el)]})]}),eo>0&&(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 border-b border-muted text-xs",children:[(0,n.jsxs)("div",{className:"py-2 pl-0 flex items-center gap-1",children:[(0,n.jsx)("span",{children:"Credits"}),(0,n.jsx)(P.I,{children:"Credits will be used first before charging your card."})]}),(0,n.jsx)("div",{className:"py-2 pr-0 text-right",translate:"no",children:(0,M.vv)(eo)})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 text-foreground-lighter text-xs",children:[(0,n.jsxs)("div",{className:"py-2 pl-0 flex items-center gap-1",children:[(0,n.jsx)("span",{children:"Monthly invoice estimate"}),(0,n.jsx)(P.I,{side:"right",children:(0,n.jsxs)("div",{className:"w-[520px] p-6",children:[(0,n.jsx)("h3",{className:"font-medium mb-2",children:"Your new monthly invoice"}),(0,n.jsxs)("p",{className:"prose text-xs mb-2",children:["Paid projects run 24/7 without pausing. First project uses Compute Credits; additional projects start at ",(0,n.jsx)("span",{translate:"no",children:"$10"}),"/month regardless of usage."," ",(0,n.jsx)(v(),{href:"https://supabase.com/docs/guides/platform/manage-your-usage/compute",target:"_blank",children:"Learn more"}),"."]}),f&&(0,n.jsx)(j.A,{error:f,subject:"Failed to preview subscription."}),y&&(0,n.jsxs)("div",{className:"space-y-2 p-6",children:[(0,n.jsx)("span",{className:"text-sm",children:"Estimating monthly costs..."}),(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),N&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(I.XI,{className:"[&_tr:last-child]:border-t font-mono text-xs",children:(0,n.jsxs)(I.BF,{children:[(()=>{var e,a,t,s,r,l;let i=(null==w||null==(e=w.breakdown)?void 0:e.filter(e=>{var a;return(null==(a=e.description)?void 0:a.toLowerCase().includes("compute"))&&e.breakdown&&e.breakdown.length>0}))||[],o=null!=(r=null==w||null==(a=w.breakdown)?void 0:a.find(e=>e.description.startsWith("Compute Credits")))?r:null,d=null==w||null==(t=w.breakdown)?void 0:t.find(e=>{var a;return null==(a=e.description)?void 0:a.toLowerCase().includes("plan")}),c=i.flatMap(e=>(e.breakdown||[]).map(a=>({...a,computeType:e.description,computeCosts:Math.round(e.total_price/e.breakdown.length)}))),u=(null==w||null==(s=w.breakdown)?void 0:s.filter(e=>{var a,t;return!(null==(a=e.description)?void 0:a.toLowerCase().includes("compute"))&&!(null==(t=e.description)?void 0:t.toLowerCase().includes("plan"))}))||[];return(0,n.jsxs)(n.Fragment,{children:[c.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(I.Hj,{className:"text-foreground-light",children:[(0,n.jsx)(I.nA,{className:"!py-2 px-0",children:null==d?void 0:d.description}),(0,n.jsx)(I.nA,{className:"text-right py-2 px-0",translate:"no",children:(0,M.vv)(null==d?void 0:d.total_price)})]}),(0,n.jsxs)(I.Hj,{className:"text-foreground-light",children:[(0,n.jsx)(I.nA,{className:"!py-2 px-0 flex items-center gap-1",children:(0,n.jsx)("span",{children:"Compute"})}),(0,n.jsx)(I.nA,{className:"text-right py-2 px-0",translate:"no",children:(0,M.vv)(i.reduce((e,a)=>e+a.total_price,0)+(null!=(l=null==o?void 0:o.total_price)?l:0))})]}),c.map(e=>(0,n.jsx)(I.Hj,{className:"text-foreground-light",children:(0,n.jsxs)(I.nA,{className:"!py-2 px-0 pl-6",translate:"no",children:[e.project_name," (",e.computeType,") |"," ",(0,M.vv)(e.computeCosts)]})},e.project_ref)),o&&(0,n.jsx)(I.Hj,{className:"text-foreground-light",children:(0,n.jsxs)(I.nA,{className:"!py-2 px-0 pl-6",translate:"no",children:["Compute Credits |"," ",(0,M.vv)(o.total_price)]})})]}),u.map(e=>{var a;return(0,n.jsxs)(I.Hj,{className:"text-foreground-light",children:[(0,n.jsx)(I.nA,{className:"text-xs py-2 px-0",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{children:null!=(a=e.description)?a:"Unknown"}),e.breakdown&&e.breakdown.length>0&&(0,n.jsxs)(P.I,{className:"max-w-sm",children:[(0,n.jsxs)("p",{children:["Projects using ",e.description,":"]}),(0,n.jsx)("ul",{className:"ml-6 list-disc",children:e.breakdown.map(a=>(0,n.jsx)("li",{children:a.project_name},"".concat(e.description,"-breakdown-").concat(a.project_ref)))})]})]})}),(0,n.jsx)(I.nA,{className:"text-right text-xs py-2 px-0",translate:"no",children:(0,M.vv)(e.total_price)})]},e.description)})]})})(),(0,n.jsxs)(I.Hj,{children:[(0,n.jsx)(I.nA,{className:"font-medium py-2 px-0",children:"Total per month (excluding other usage)"}),(0,n.jsx)(I.nA,{className:"text-right font-medium py-2 px-0",translate:"no",children:(0,M.vv)(null!=(m=Math.round(null!=(u=null==w||null==(l=w.breakdown)?void 0:l.reduce((e,a)=>e+a.total_price,0))?u:0))?m:0)})]})]})})})]})})]}),(0,n.jsx)("div",{className:"py-2 pr-0 text-right",translate:"no",children:(0,M.vv)(Math.round(null!=(p=null==w?void 0:w.breakdown.reduce((e,a)=>e+a.total_price,0))?p:0))})]})]})})]}),(0,n.jsxs)("div",{className:"pt-4",children:[5===_.filter(e=>e.status===ek.BU.ACTIVE_HEALTHY||e.status===ek.BU.COMING_UP).length&&(null==w?void 0:w.plan_change_type)!=="downgrade"&&(0,n.jsx)("div",{className:"pb-2",children:(0,n.jsx)(aE.Z,{title:"Empty organization",type:"warning",children:"This organization has no active projects. Did you select the correct organization?"})}),1===_.filter(e=>e.status===ek.BU.ACTIVE_HEALTHY||e.status===ek.BU.COMING_UP).length&&(null==V?void 0:V.planId)==="pro"&&"upgrade"===H&&(0,n.jsx)("div",{className:"pb-2",children:(0,n.jsxs)(aE.Z,{type:"note",children:[(0,n.jsxs)("div",{className:"text-sm prose",children:["Paid projects run 24/7 without pausing. First project uses Compute Credits; additional projects cost ",(0,n.jsx)("span",{translate:"no",children:"$10+"}),"/month regardless of usage."," "]}),(0,n.jsx)(v(),{href:"https://supabase.com/docs/guides/platform/manage-your-usage/compute",target:"_blank",className:"underline",children:"Learn more"})]})}),(0,n.jsx)("div",{className:"flex space-x-2",children:(0,n.jsxs)(ee.$,{loading:q||R||$,disabled:y,type:"primary",onClick:Z,className:"flex-1",size:"small","data-sentry-element":"Button","data-sentry-source-file":"SubscriptionPlanUpdateDialog.tsx",children:["Confirm ","downgrade"===H?"downgrade":"upgrade"]})})]})]}),(0,n.jsxs)("div",{className:"bg-surface-100 p-8 flex flex-col border-l xl:col-span-2",children:[(0,n.jsxs)("h3",{className:"mb-8",children:["downgrade"===H?"Downgrade":"Upgrade"," ",(0,n.jsx)("span",{className:"font-bold",children:null==k?void 0:k.name})," to"," ","downgrade"===H?te[x||"default"]:a7[x||"default"]]}),"downgrade"===H?ea.length>0&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm mb-1",children:"Features you'll lose"}),(0,n.jsx)("p",{className:"text-xs text-foreground-light mb-4",children:"Please review carefully before downgrading."}),(0,n.jsx)("div",{className:"space-y-2 mb-4 text-foreground-light",children:ea.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-4",children:(0,n.jsx)(e1.A,{className:"h-3 w-3 text-amber-900",strokeWidth:3})}),(0,n.jsx)("p",{className:"text-sm",children:"string"==typeof e?e:e[0]})]},"string"==typeof e?e:e[0]))})]}):Q.length>0&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm mb-4",children:"Upgrade features"}),(0,n.jsx)("div",{className:"space-y-2 mb-4 text-foreground-light",children:Q.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-4",children:(0,n.jsx)(et.A,{className:"h-3 w-3 text-brand",strokeWidth:3})}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("p",{children:"string"==typeof e?e:e[0]}),Array.isArray(e)&&e.length>1&&(0,n.jsx)("p",{className:"text-foreground-lighter text-xs",children:e[1]})]})]},"string"==typeof e?e:e[0]))})]})]})]}),a9&&T&&(0,n.jsx)(eQ.Elements,{stripe:a9,options:G,children:(0,n.jsx)(ad.i,{paymentIntentSecret:T,onPaymentIntentConfirm:e=>J(e),onLoadingChange:e=>D(e)})})]})})};var tt=t(86926),tn=t.n(tt),ts=t(37253),tr=t.n(ts);async function tl(e){let{orgSlug:a,prevPlan:t,currentPlan:n,reasons:s,message:r}=e,{data:l,error:i}=await (0,C.bE)("/platform/feedback/upgrade",{body:{...void 0!==a&&{orgSlug:a},...void 0!==t&&{prevPlan:t},...void 0!==n&&{currentPlan:n},reasons:s,...void 0!==r&&{additionalFeedback:r}}});return i&&(0,C.H4)(i),l}let ti=function(){let{onError:e,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,K.n)(e=>tl(e),{async onError(a,t,n){void 0===e?z.oR.error("Failed to submit upgrade survey: ".concat(a.message)):e(a,t,n)},...a})},to=e=>{let{visible:a,originalPlan:t,subscription:l,onClose:i}=e,{slug:o}=(0,r.g)(),[d,c]=(0,s.useState)(""),[u,m]=(0,s.useReducer)(function(e,a){return tn()(e,a.target.value)?tr()(e,a.target.value):[...e,a.target.value]},[]),p=(0,k.bg)(t,null==l?void 0:l.plan.id),{mutate:x,isLoading:h}=ti({onError:e=>{z.oR.error("Failed to submit survey: ".concat(e.message))},onSuccess:()=>{i(!0),window.scrollTo({top:0,left:0,behavior:"smooth"})}}),g=async()=>{var e;if(0===u.length)return z.oR.error("Please select at least one reason for upgrading your subscription");x({orgSlug:o,prevPlan:t,currentPlan:null==l||null==(e=l.plan)?void 0:e.id,reasons:u,message:d.trim()||void 0})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ah.A,{alignFooter:"right",size:"xlarge",loading:h,visible:a,onCancel:i,onConfirm:g,cancelText:"Skip",header:"We're excited for your upgrade","data-sentry-element":"Modal","data-sentry-source-file":"UpgradeModal.tsx",children:(0,n.jsxs)(ah.A.Content,{className:"space-y-4","data-sentry-element":"Modal.Content","data-sentry-source-file":"UpgradeModal.tsx",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"What reasons motivated your decision to upgrade? Your feedback helps us improve Supabase as much as we can."}),(0,n.jsxs)("div",{className:"space-y-8 mt-6",children:[(0,n.jsx)("div",{className:"flex flex-wrap gap-2","data-toggle":"buttons",children:p.map(e=>{let a=u.find(a=>a===e);return(0,n.jsxs)("label",{className:"\n                      flex cursor-pointer items-center space-x-2 rounded-md py-1 \n                      pl-2 pr-3 text-center text-sm\n                      shadow-sm transition-all duration-100\n                      ".concat(a?" bg-foreground text-background opacity-100 hover:bg-opacity-75":" bg-border-strong text-foreground opacity-25 hover:opacity-50","\n                  "),children:[(0,n.jsx)("input",{type:"checkbox",name:"options",value:e,className:"hidden",onClick:m}),(0,n.jsx)("div",{children:e})]},e)})}),(0,n.jsx)("div",{className:"text-area-text-sm",children:(0,n.jsx)(a4.A.TextArea,{id:"message",name:"message",value:d,onChange:e=>c(e.target.value),label:"Anything else that we can improve on?","data-sentry-element":"Input.TextArea","data-sentry-source-file":"UpgradeModal.tsx"})})]})]})})})},td=e=>e.managed_by===D.Kf.VERCEL_MARKETPLACE?{installationId:null==e?void 0:e.partner_id,path:"/settings",message:"Change Plan on Vercel Marketplace"}:e.managed_by===D.Kf.AWS_MARKETPLACE?{organizationSlug:null==e?void 0:e.slug}:void 0,tc=()=>{var e,a;let t=(0,aB.useRouter)(),{slug:l}=(0,r.g)(),{data:o}=(0,d.s)(),{mutate:m}=(0,aY.h)(),x=(0,s.useRef)(),[h,g]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(),C=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.subscriptions"),{data:S}=(0,aK.el)(),_=(S||[]).filter(e=>e.organization_id===(null==o?void 0:o.id)),{data:A}=aV({slug:l}),I=!!(null==A?void 0:A.has_oriole_project),k=eT(),P="subscriptionPlan"===k.panelKey,E=()=>{let{panel:e,...a}=t.query;t.push({pathname:t.pathname,query:a},void 0,{shallow:!0}),k.setPanelKey(void 0)},{data:L,isSuccess:T}=(0,i.j5)({orgSlug:l}),{data:F,isLoading:R}=aq({orgSlug:l}),{data:B}=(0,aU.A)({slug:l});null==L||L.billing_partner;let{data:z,error:O,isLoading:G,isSuccess:H}=aG({tier:N,organizationSlug:l}),V=null!=(a=null==F?void 0:F.plans)?a:[],K=(B||[]).length>0&&_.filter(e=>"INACTIVE"!==e.status&&"GOING_DOWN"!==e.status).length>0;(0,s.useEffect)(()=>{if(P){var e;w(void 0);let a=Array.isArray(t.query.source)?t.query.source[0]:t.query.source,n={currentPlan:null==L||null==(e=L.plan)?void 0:e.name};a&&(n.origin=a),m({action:"studio_pricing_side_panel_opened",properties:n,groups:{organization:null!=l?l:"Unknown"}})}},[P]),(0,s.useEffect)(()=>{P&&T&&(x.current=L.plan.id)},[P,T]);let W=N?V.find(e=>e.id===N.split("tier_")[1]):null;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eV.Ay,{hideFooter:!0,size:"xxlarge",visible:P,onCancel:()=>E(),header:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("h4",{children:["Change subscription plan for ",null==o?void 0:o.name]}),(0,n.jsx)(ee.$,{asChild:!0,type:"default",icon:(0,n.jsx)(eS.A,{}),children:(0,n.jsx)("a",{href:"https://supabase.com/pricing",target:"_blank",rel:"noreferrer",children:"Pricing"})})]}),"data-sentry-element":"SidePanel","data-sentry-source-file":"PlanUpdateSidePanel.tsx",children:[o&&o.managed_by!==D.Kf.SUPABASE&&(0,n.jsx)(U.A,{managedBy:o.managed_by,resource:"Organization plans",cta:td(o)}),(0,n.jsx)(eV.Ay.Content,{"data-sentry-element":"SidePanel.Content","data-sentry-source-file":"PlanUpdateSidePanel.tsx",children:(0,n.jsx)("div",{className:"py-6 grid grid-cols-12 gap-3",children:a$.v.map(e=>{var a,t,s,r;let i=V.find(a=>a.id===e.id.split("tier_")[1]),d=null!=(r=null==i?void 0:i.price)?r:0,u="downgrade"===(0,az.O8)(null==L?void 0:L.plan.id,null==e?void 0:e.planId),p=(null==i?void 0:i.id)===(null==L||null==(a=L.plan)?void 0:a.id),x=e.features,h=e.footer;return"tier_enterprise"===e.id?(0,n.jsx)(a0,{plan:e,isCurrentPlan:p},e.id):(0,n.jsxs)("div",{className:(0,c.cn)("px-4 py-4 flex flex-col items-start justify-between","border rounded-md col-span-12 md:col-span-4 bg-surface-200"),children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("p",{className:"text-brand text-sm uppercase",children:e.name}),p?(0,n.jsx)("div",{className:"text-xs bg-surface-300 text-foreground-light rounded px-2 py-0.5",children:"Current plan"}):e.nameBadge?(0,n.jsx)("div",{className:"text-xs bg-brand-400 text-brand-600 rounded px-2 py-0.5",children:e.nameBadge}):null]}),(0,n.jsxs)("div",{className:"mt-4 flex items-center space-x-1 mb-4",children:[(null!=d?d:0)>0&&(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"From"}),R?(0,n.jsx)("div",{className:"h-[28px] flex items-center justify-center",children:(0,n.jsx)(b.A,{className:"w-[30px] h-[24px]"})}):(0,n.jsx)("p",{className:"text-foreground text-lg",translate:"no",children:(0,M.vv)(d)}),(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:e.costUnit})]}),p?(0,n.jsx)(ee.$,{block:!0,disabled:!0,type:"default",children:"Current plan"}):(0,n.jsxs)(e2.G,{block:!0,type:u?"default":"primary",disabled:(null==L||null==(t=L.plan)?void 0:t.id)==="enterprise"||(null==o?void 0:o.managed_by)!==D.Kf.SUPABASE&&"tier_free"!==e.id||(null==o?void 0:o.managed_by)===D.Kf.AWS_MARKETPLACE||I||!C,onClick:()=>{var a;w(e.id),m({action:"studio_pricing_plan_cta_clicked",properties:{selectedPlan:e.name,currentPlan:null==L||null==(a=L.plan)?void 0:a.name},groups:{organization:null!=l?l:"Unknown"}})},tooltip:{content:{side:"bottom",className:I?"w-96 text-center":"",text:(null==L||null==(s=L.plan)?void 0:s.id)==="enterprise"?"Reach out to us via support to update your plan from Enterprise":I?"Your organization has projects that are using the OrioleDB extension which is only available on the Free plan. Remove all OrioleDB projects before changing your plan.":C?(null==o?void 0:o.managed_by)===D.Kf.AWS_MARKETPLACE?"You cannot change the plan for an organization managed by AWS Marketplace":void 0:"You do not have permission to change the subscription plan"}},children:[u?"Downgrade":"Upgrade"," to ",e.name]}),(0,n.jsx)("div",{className:"border-t my-4"}),(0,n.jsx)("ul",{role:"list",children:x.map(e=>(0,n.jsxs)("li",{className:"flex py-2",children:[(0,n.jsx)("div",{className:"w-[12px]",children:(0,n.jsx)(et.A,{className:"h-3 w-3 text-brand translate-y-[2.5px]","aria-hidden":"true",strokeWidth:3})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"ml-3 text-xs text-foreground-light",children:"string"==typeof e?e:e[0]}),aD()(e)&&(0,n.jsx)("p",{className:"ml-3 text-xs text-foreground-lighter",children:e[1]})]})]},"string"==typeof e?e:e[0]))})]}),h&&(0,n.jsx)("div",{className:"border-t pt-4 mt-4",children:(0,n.jsx)("p",{className:"text-foreground-light text-xs",children:h})})]},e.id)})})})]}),(0,n.jsx)(aX,{visible:"tier_free"===N,subscription:L,onClose:()=>w(void 0),onConfirm:()=>{w(void 0),K?j(!0):g(!0)},projects:_,"data-sentry-element":"DowngradeModal","data-sentry-source-file":"PlanUpdateSidePanel.tsx"}),(0,n.jsx)(ta,{selectedTier:N,onClose:()=>w(void 0),planMeta:W,subscriptionPreviewError:O,subscriptionPreviewIsLoading:G,subscriptionPreviewInitialized:H,subscriptionPreview:z,subscription:L,projects:_,currentPlanMeta:{...V.find(e=>{var a;return e.id===(null==L||null==(a=L.plan)?void 0:a.id)}),features:(null==(e=a$.v.find(e=>{var a;return e.id==="tier_".concat(null==L||null==(a=L.plan)?void 0:a.id)}))?void 0:e.features)||[]},"data-sentry-element":"SubscriptionPlanUpdateDialog","data-sentry-source-file":"PlanUpdateSidePanel.tsx"}),(0,n.jsx)(a5,{visible:v,onClose:()=>j(!1),"data-sentry-element":"MembersExceedLimitModal","data-sentry-source-file":"PlanUpdateSidePanel.tsx"}),(0,n.jsx)(a3,{visible:h,projects:_,onClose:e=>{g(!1),e&&E()},"data-sentry-element":"ExitSurveyModal","data-sentry-source-file":"PlanUpdateSidePanel.tsx"}),(0,n.jsx)(to,{visible:f,originalPlan:x.current,subscription:L,onClose:e=>{y(!1),e&&E()},"data-sentry-element":"UpgradeSurveyModal","data-sentry-source-file":"PlanUpdateSidePanel.tsx"})]})},tu=()=>{var e,a,t;let{slug:s}=(0,r.g)(),o=eT(),d=(0,eI._P)("disableProjectCreationAndUpdate"),{isSuccess:c,can:x}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions"),{data:h,error:g,isLoading:f,isError:y,isSuccess:N}=(0,i.j5)({orgSlug:s},{enabled:x}),w=null==h?void 0:h.plan,C=null!=(e=null==w?void 0:w.name)?e:"Unknown",S=!d&&!["enterprise"].includes(null!=(a=null==w?void 0:w.id)?a:"");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"Subscription.tsx",children:[(0,n.jsx)("div",{className:"col-span-12 pb-2",children:(0,n.jsx)(aF.R,{"data-sentry-element":"Restriction","data-sentry-source-file":"Subscription.tsx"})}),(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"Subscription.tsx",children:(0,n.jsx)("div",{className:"sticky space-y-6 top-12",children:(0,n.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Subscription Plan"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"Each organization has it's own subscription plan, billing cycle, payment methods and usage quotas."})]})})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"Subscription.tsx",children:c&&!x?(0,n.jsx)(m.A,{resourceText:"view this organization's subscription"}):(0,n.jsxs)(n.Fragment,{children:[f&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),y&&(0,n.jsx)(j.A,{subject:"Failed to retrieve subscription",error:g}),N&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{children:(0,n.jsxs)("p",{className:"text-2xl text-brand",children:[null!=(t=null==w?void 0:w.name)?t:"Unknown"," Plan"]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(eD.A,{projectUpdateDisabled:d,children:(0,n.jsx)(ee.$,{type:"default",className:"pointer-events-auto",disabled:!S,onClick:()=>o.setPanelKey("subscriptionPlan"),children:"Change subscription plan"})}),!S&&(d?(0,n.jsx)(eR.F,{className:"mt-2",withIcon:!0,variant:"info",title:"Unable to update plan from ".concat(C),children:"We have temporarily disabled project and subscription changes - our engineers are working on a fix."}):(0,n.jsx)(eR.F,{withIcon:!0,className:"mt-2",variant:"info",title:"Unable to update plan from ".concat(C),actions:[(0,n.jsx)("div",{children:(0,n.jsx)(ee.$,{asChild:!0,type:"default",children:(0,n.jsx)(v(),{href:"/support/new?category=sales&subject=Change%20plan%20away%20from%20".concat(C),children:"Contact support"})})},"contact-support")],children:"Please contact us if you'd like to change your plan."}))]}),!(null==h?void 0:h.usage_billing_enabled)&&(0,n.jsx)(aE.Z,{type:"default",title:"This organization is limited by the included usage",children:(0,n.jsxs)("div",{className:"[&>p]:!leading-normal prose text-sm",children:["Projects may become unresponsive when this organization exceeds its"," ",(0,n.jsx)(v(),{href:"/org/".concat(s,"/usage"),children:"included usage quota"}),". To scale seamlessly,"," ",(null==w?void 0:w.id)==="free"?"upgrade to a paid plan.":"you can disable Spend Cap under the Cost Control settings."]})})]})]})})]}),(0,n.jsx)(tc,{"data-sentry-element":"PlanUpdateSidePanel","data-sentry-source-file":"Subscription.tsx"})]})},tm=()=>{let{billingAccountData:e,billingPaymentMethods:a,billingCredits:t,billingInvoices:s}=(0,o.x)(["billing:account_data","billing:payment_methods","billing:credits","billing:invoices"]),{data:r}=(0,d.s)(),{data:u}=(0,i.j5)({orgSlug:null==r?void 0:r.slug}),m=!(null==u?void 0:u.billing_via_partner),p=e&&m,x=a&&m;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Vw,{"data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"BillingSettings.tsx",children:(0,n.jsx)(l.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"BillingSettings.tsx",children:"Billing"})}),(0,n.jsx)(l.eh,{id:"subscription",className:(0,c.cn)("[&>div]:!pt-0"),"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"BillingSettings.tsx",children:(0,n.jsx)(tu,{"data-sentry-element":"Subscription","data-sentry-source-file":"BillingSettings.tsx"})}),(0,n.jsx)(l.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"BillingSettings.tsx"}),(0,n.jsx)(l.eh,{id:"cost-control","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"BillingSettings.tsx",children:(0,n.jsx)(eJ,{"data-sentry-element":"CostControl","data-sentry-source-file":"BillingSettings.tsx"})}),(0,n.jsx)(l.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"BillingSettings.tsx"}),(null==r?void 0:r.plan.id)!=="free"&&(0,n.jsx)(l.eh,{id:"breakdown",children:(0,n.jsx)(B,{})}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.cJ,{}),(0,n.jsx)(l.eh,{id:"invoices",children:(0,n.jsx)(h,{})})]}),x&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.cJ,{}),(0,n.jsx)(l.eh,{id:"payment-methods",children:(0,n.jsx)(aT,{})})]}),t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.cJ,{}),(0,n.jsx)(l.eh,{id:"credits-balance",children:(0,n.jsx)(ap,{})})]}),p&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.cJ,{}),(0,n.jsx)(l.eh,{id:"email",children:(0,n.jsx)(eC,{})}),(0,n.jsx)(l.cJ,{}),(0,n.jsx)(l.eh,{id:"address",children:(0,n.jsx)(eg,{})})]})]})};var tp=t(78311),tx=t(96103),th=t(40461),tg=t(73510);let tf=()=>{let{panel:e,slug:a}=(0,r.g)(),t=eT(),l=(0,o.x)("billing:all");return((0,s.useEffect)(()=>{if(e&&"string"==typeof e&&["subscriptionPlan","costControl"].includes(e)){var a;t.setPanelKey(e),null==(a=document.getElementById("billing-page-top"))||a.scrollIntoView({behavior:"smooth"})}},[e]),l)?(0,n.jsx)(tm,{"data-sentry-element":"BillingSettings","data-sentry-component":"OrgBillingSettings","data-sentry-source-file":"billing.tsx"}):(0,n.jsx)(tg.c,{urlBack:"/org/".concat(a)})};tf.getLayout=e=>(0,n.jsx)(tp.A,{children:(0,n.jsx)(tx.A,{children:(0,n.jsx)(th.A,{children:e})})});let ty=tf},73510:(e,a,t)=>{"use strict";t.d(a,{c:()=>o});var n=t(80263),s=t(93749),r=t.n(s),l=t(22554),i=t(50922);let o=e=>{let{urlBack:a}=e;return(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center","data-sentry-component":"UnknownInterface","data-sentry-source-file":"UnknownInterface.tsx",children:(0,n.jsx)(i.Z,{type:"note",className:"max-w-xl",title:"Looking for something?",description:"We couldn't find the page that you're looking for","data-sentry-element":"Admonition","data-sentry-source-file":"UnknownInterface.tsx",children:(0,n.jsx)(l.$,{asChild:!0,type:"default",className:"mt-2","data-sentry-element":"Button","data-sentry-source-file":"UnknownInterface.tsx",children:(0,n.jsx)(r(),{href:a,"data-sentry-element":"Link","data-sentry-source-file":"UnknownInterface.tsx",children:"Head back"})})})})}},74280:(e,a,t)=>{"use strict";t.d(a,{xf:()=>g,sD:()=>j,Oe:()=>N,DG:()=>b,hw:()=>f});var n=t(80263),s=t(36839),r=t(42872),l=t(24699),i=t(53239),o=t(79279),d=t(94198),c=t(80127),u=t(34531),m=t(30569);let p=i.createContext(null),x=(0,c.cn)("relative text-foreground-lighter text-left px-2 py-1.5 rounded","hover:text-foreground hover:!bg-overlay-hover w-full flex items-center space-x-2","peer-data-[value=true]:bg-overlay-hover peer-data-[value=true]:text-strong");function h(){let e=i.useContext(p);if(!e)throw Error("useMultiSelect must be used within a MultiSelectProvider");return e}function g(e){var a;let{values:t=[],onValuesChange:s,disabled:r,dir:l,size:o,className:d,children:u,...x}=e,h=i.useRef(null),[g,f]=i.useState(!1),[y,v]=i.useState(""),[j,b]=i.useState(-1),N=i.useCallback(e=>{t.includes(e)?s(t.filter(a=>a!==e)||[]):s([...t,e])},[t]);a=()=>{g&&f(!g)},(0,i.useEffect)(()=>{let e=e=>{!h.current||h.current.contains(e.target)||a(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[h,a]);let w=i.useCallback(e=>{switch(e.key){case"Backspace":case"Delete":t.length>0&&0===y.length&&(-1!==j&&j<t.length?(s(t.filter(e=>e!==t[j])),b(j-1<0?0:j-1)):s(t.filter(e=>e!==t[t.length-1])));break;case"Escape":if(-1!==j?b(-1):f(!1),h.current){let e=h.current.querySelector('button[role="combobox"]');e&&e.focus()}break;case"Enter":f(!0)}},[t,y,j]);return(0,n.jsx)(p.Provider,{value:{values:t,toggleValue:N,onValuesChange:s,open:g,setOpen:f,inputValue:y,setInputValue:v,activeIndex:j,setActiveIndex:b,size:o||"small",disabled:r},"data-sentry-element":"MultiSelectContext.Provider","data-sentry-component":"MultiSelector","data-sentry-source-file":"multi-select.tsx",children:(0,n.jsx)(m.uB,{ref:h,onKeyDown:w,className:(0,c.cn)("relative w-auto overflow-visible bg-transparent flex flex-col",d),dir:l,...x,"data-sentry-element":"Command","data-sentry-source-file":"multi-select.tsx",children:u})})}(0,o.F)("",{variants:{size:{...d.vs}},defaultVariants:{size:d.FE}});let f=i.forwardRef((e,a)=>{let{label:t,persistLabel:l=!1,className:o,deletableBadge:d=!0,badgeLimit:m=9999,showIcon:p=!0,mode:x="combobox",children:g,...f}=e,{activeIndex:y,values:j,setInputValue:b,toggleValue:N,disabled:w,setOpen:C}=h(),S=i.useRef(null);i.useImperativeHandle(a,()=>S.current);let _=i.useRef(null),A=i.useRef(null),[M,I]=i.useState([]),[k,P]=i.useState(0),[E,L]=i.useState(!1),T="wrap"===m,F="number"==typeof m,R="inline-combobox"===x;i.useEffect(()=>{(null==S?void 0:S.current)&&A.current&&(T?(I(j),P(0)):(I(j.slice(0,m)),P(Math.max(0,j.length-m))))},[j,m]);let D="rounded shrink-0 px-1.5",B=i.useCallback(e=>{C(!0),b(""),R&&(e.stopPropagation(),e.preventDefault(),setTimeout(()=>{var e;null==(e=_.current)||e.focus()},100))},[]);return(0,n.jsxs)("button",{ref:S,onClick:e=>!E&&B(e),disabled:w,type:"button",role:"combobox",className:(0,c.cn)("flex w-full min-w-[200px] min-h-[40px] items-center justify-between rounded-md border","border-alternative bg-foreground/[.026] px-3 py-2 text-sm","ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","hover:border-primary transition-colors duration-200",o),...f,children:[(0,n.jsxs)("div",{ref:A,className:(0,c.cn)("flex gap-1 -ml-1 overflow-hidden flex-1",T&&"flex-wrap",!T&&"overflow-x-auto scrollbar-thin scrollbar-track-transparent transition-colors scrollbar-thumb-muted-foreground dark:scrollbar-thumb-muted scrollbar-thumb-rounded-lg"),children:[M.map(e=>(0,n.jsxs)(u.E,{className:D,children:[e,d&&(0,n.jsx)("div",{onMouseEnter:()=>L(!0),onMouseLeave:()=>L(!1),onClick:a=>{a.stopPropagation(),N(e),L(!1)},className:"ml-1 text-foreground-lighter hover:text-foreground-light transition-colors pointer-events-auto",children:(0,n.jsx)(s.A,{size:12})})]},e)),k>0&&(0,n.jsx)(u.E,{className:D,children:F&&m<1?"".concat(k," item").concat(k>1?"s":""," selected"):"+".concat(k)}),(0,n.jsx)("span",{className:(0,c.cn)("text-foreground-muted whitespace-nowrap leading-[1.375rem] ml-1 opacity-0 transition-opacity hidden",!R&&(l||0===j.length)&&"opacity-100 visible inline"),children:t}),R&&(0,n.jsx)(v,{ref:_,showSearchIcon:!1,onValueChange:-1===y?b:void 0,placeholder:t,autoFocus:!1,wrapperClassName:(0,c.cn)("px-0 flex-1 border-none truncate",T&&"min-w-[85px]"),className:"py-0 px-1 truncate"})]}),p&&(0,n.jsx)(r.A,{size:16,strokeWidth:2,className:"text-foreground-lighter shrink-0 ml-1.5"})]})});f.displayName="MultiSelectorTrigger",g.Trigger=f;let y=(0,o.F)("bg-control border",{variants:{size:{...d.vs}},defaultVariants:{size:d.FE}}),v=i.forwardRef((e,a)=>{let{className:t,wrapperClassName:s,showResetIcon:r,showSearchIcon:l,...o}=e,{open:d,setOpen:u,inputValue:p,setInputValue:x,activeIndex:g,setActiveIndex:f,size:v,disabled:j}=h(),b=i.useRef(null);i.useImperativeHandle(a,()=>b.current);let N=()=>{setTimeout(()=>{(null==b?void 0:b.current)&&d&&b.current.focus()},100)};return(0,i.useEffect)(()=>{if(N(),!d){var e;null==(e=b.current)||e.blur()}},[d]),(0,n.jsx)(m.G7,{ref:b,value:p,onValueChange:-1===g?x:void 0,onFocus:()=>u(!0),onClick:()=>f(-1),tabIndex:d?0:-1,disabled:j,showSearchIcon:l,showResetIcon:r,handleReset:()=>{x(""),N()},wrapperClassName:s,className:(0,c.cn)(y({size:v}),"text-sm bg-transparent h-full flex-grow border-none outline-none placeholder:text-foreground-muted flex-1",-1!==g&&"caret-transparent",t),...o})});v.displayName="MultiSelectorInput",g.Input=v;let j=i.forwardRef((e,a)=>{let{className:t,children:s}=e,{open:r}=h();return(0,n.jsx)("div",{ref:a,className:(0,c.cn)("absolute w-full bg-overlay shadow-md z-10 border border-overlay top-[calc(100%+0.25rem)] rounded-md transition-all -translate-y-3",r?"opacity-100 translate-y-0 visible duration-150 ease-[.76,0,.23,1]":"opacity-0 -translate-y-3 invisible duration-0",t),children:r&&s})});j.displayName="MultiSelectorContent",g.Content=j;let b=i.forwardRef((e,a)=>{let{className:t,children:s,creatable:r=!1}=e,{open:l,inputValue:i,setInputValue:o,toggleValue:d}=h(),u=s?Array.isArray(s)?s:"object"==typeof s&&"props"in s?s.props.children:[]:[],p=u.filter(e=>!!e.props.value).map(e=>e.props.value.toLowerCase()).some(e=>e===i.toLowerCase());return(0,n.jsxs)(m.oI,{ref:a,className:(0,c.cn)("p-2 flex flex-col gap-2 scrollbar-thin scrollbar-track-transparent transition-colors","scrollbar-thumb-muted-foreground dark:scrollbar-thumb-muted","scrollbar-thumb-rounded-lg w-full max-h-[300px] overflow-y-auto",t),children:[s,r&&i.length>0&&!p?(0,n.jsxs)(m.h_,{role:"option",onSelect:()=>{l&&d(i),o("")},className:x,children:['Create "',i,'"']}):r&&0===u.length?(0,n.jsx)("div",{className:"p-2 py-1.5 text-xs text-foreground-lighter font-italic",children:"Type to add a value"}):(0,n.jsx)(m.xL,{children:(0,n.jsx)("span",{className:"text-foreground-muted",children:"No results found"})})]})});b.displayName="MultiSelectorList",g.List=b;let N=i.forwardRef((e,a)=>{let{className:t,value:s,children:r,...i}=e,{values:o,setInputValue:d,toggleValue:u,open:p}=h(),g=o.includes(s);return(0,n.jsxs)(m.h_,{ref:a,tabIndex:p?0:-1,role:"option",onSelect:()=>{p&&u(s),d("")},className:(0,c.cn)(x,t),...i,children:[(0,n.jsx)("div",{className:(0,c.cn)("flex items-center justify-center","peer h-4 w-4 shrink-0 rounded border border-control bg-control/25 ring-offset-background","transition-colors duration-150 ease-in-out","hover:border-strong","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-foreground data-[state=checked]:text-background",g?"bg-foreground text-background":"[&_svg]:invisible"),children:(0,n.jsx)(l.A,{className:"h-3 w-3",strokeWidth:4})}),(0,n.jsx)("div",{className:"text-xs flex-grow leading-none pointer-events-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:pointer-events-none peer-disabled:opacity-50",children:r})]})});N.displayName="MultiSelectorItem",g.Item=N},74512:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var n=t(80263);t(53239);var s=t(92413),r=t(37838);let l={tiny:14,small:16,medium:20,large:24,xlarge:32};function i(e){let{style:a,size:t="medium"}=e,i=(0,s.A)("inputErrorIcon");return(0,n.jsx)("div",{className:i.base,style:a,"data-sentry-component":"InputErrorIcon","data-sentry-source-file":"InputErrorIcon.tsx",children:(0,n.jsx)(r.A,{size:l[t],strokeWidth:2,"data-sentry-element":"AlertCircle","data-sentry-source-file":"InputErrorIcon.tsx"})})}},80551:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});let n=(0,t(81915).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},80797:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});let n=(0,t(81915).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},80832:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>d});var n=t(80263),s=t(39383);t(53239);var r=t(22554),l=t(35741),i=t(92413);let o=e=>{let{id:a,disabled:t,className:o,children:d,header:c,visible:u,open:m,size:p="medium",loading:x,align:h="right",hideFooter:g=!1,customFooter:f,onConfirm:y,onCancel:v,confirmText:j="Confirm",cancelText:b="Cancel",triggerElement:N,defaultOpen:w,tooltip:C,...S}=e,_=(0,i.A)("sidepanel"),A=f||(0,n.jsxs)("div",{className:_.footer,children:[(0,n.jsx)("div",{children:(0,n.jsx)(r.$,{disabled:x,type:"default",onClick:()=>v?v():null,children:b})}),void 0!==y&&(0,n.jsxs)(l.m_,{children:[(0,n.jsx)(l.k$,{asChild:!0,children:(0,n.jsx)("span",{className:"inline-block",children:(0,n.jsx)(r.$,{htmlType:"submit",disabled:t||x,loading:x,onClick:()=>y?y():null,children:j})})}),void 0!==C&&(0,n.jsx)(l.ZI,{side:"bottom",children:C})]})]});return m=m||u,(0,n.jsxs)(s.bL,{open:m,onOpenChange:function(e){void 0!==u&&!e&&v&&v()},defaultOpen:w,"data-sentry-element":"Dialog.Root","data-sentry-component":"SidePanel","data-sentry-source-file":"SidePanel.tsx",children:[N&&(0,n.jsx)(s.l9,{asChild:!0,className:_.trigger,children:N}),(0,n.jsxs)(s.ZL,{"data-sentry-element":"Dialog.Portal","data-sentry-source-file":"SidePanel.tsx",children:[(0,n.jsx)(s.hJ,{className:_.overlay,"data-sentry-element":"Dialog.Overlay","data-sentry-source-file":"SidePanel.tsx"}),(0,n.jsxs)(s.UC,{className:[_.base,_.size[p],_.align[h],o&&o].join(" "),onOpenAutoFocus:S.onOpenAutoFocus,onCloseAutoFocus:S.onCloseAutoFocus,onEscapeKeyDown:S.onEscapeKeyDown,onPointerDownOutside:S.onPointerDownOutside,onInteractOutside:e=>{var a;(null==(a=e.target)?void 0:a.closest("#toast"))&&e.preventDefault(),S.onInteractOutside&&S.onInteractOutside(e)},"data-sentry-element":"Dialog.Content","data-sentry-source-file":"SidePanel.tsx",children:[c&&(0,n.jsx)("header",{className:_.header,children:c}),(0,n.jsx)("div",{className:_.contents,children:d}),!g&&A]})]})]})};o.Content=function(e){let{children:a,className:t}=e,s=(0,i.A)("sidepanel");return(0,n.jsx)("div",{className:[s.content,t].join(" ").trim(),"data-sentry-component":"Content","data-sentry-source-file":"SidePanel.tsx",children:a})},o.Separator=function(){let e=(0,i.A)("sidepanel");return(0,n.jsx)("div",{className:e.separator,"data-sentry-component":"Separator","data-sentry-source-file":"SidePanel.tsx"})};let d=o},83815:(e,a,t)=>{"use strict";t.d(a,{$:()=>i});var n=t(80251),s=t(73969),r=t(70938);async function l(e){let{projectRef:a,orgSlug:t,reasons:n,message:s,exitAction:l}=e,{data:i,error:o}=await (0,r.bE)("/platform/feedback/downgrade",{body:{...void 0!==a&&{projectRef:a},...void 0!==t&&{orgSlug:t},reasons:n,additionalFeedback:s,exitAction:l}});return o&&(0,r.H4)(o),i}let i=function(){let{onError:e,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.n)(e=>l(e),{async onError(a,t,n){void 0===e?s.oR.error("Failed to submit exit survey: ".concat(a.message)):e(a,t,n)},...a})}},86926:(e,a,t)=>{var n=t(35902),s=t(89527),r=t(22442),l=t(80544),i=t(61741),o=Math.max;e.exports=function(e,a,t,d){e=s(e)?e:i(e),t=t&&!d?l(t):0;var c=e.length;return t<0&&(t=o(c+t,0)),r(e)?t<=c&&e.indexOf(a,t)>-1:!!c&&n(e,a,t)>-1}},87714:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});let n=(0,t(81915).A)("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]])},95142:(e,a,t)=>{"use strict";t.d(a,{BS:()=>i,Dm:()=>c,HJ:()=>v,Rf:()=>f,Uw:()=>d,Vw:()=>N,Xr:()=>b,aw:()=>h,bV:()=>l,cJ:()=>p,dX:()=>u,eh:()=>o,fh:()=>j,gu:()=>m,sZ:()=>x,tn:()=>y,xp:()=>g});var n=t(80263),s=t(53239),r=t(80127);let l="mx-auto w-full max-w-[1200px]",i="px-4 @lg:px-6 @xl:px-12 @2xl:px-20 @3xl:px-24",o=(0,s.forwardRef)((e,a)=>{let{className:t,bottomPadding:s,size:l="default",...o}=e;return(0,n.jsx)("div",{ref:a,...o,className:(0,r.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[l],i,s&&"pb-16",t)})}),d=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("header",{...s,ref:a,className:(0,r.cn)("w-full","flex-col gap-3 py-6",t)})}),c=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("h1",{ref:a,...s,className:(0,r.cn)(t)})}),u=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("p",{ref:a,...s,className:(0,r.cn)("text-sm text-foreground-light",t)})}),m=(0,s.forwardRef)((e,a)=>{let{className:t,isFullWidth:s,topPadding:l,...i}=e;return(0,n.jsx)("div",{ref:a,...i,className:(0,r.cn)("flex flex-col first:pt-12 py-6",s?"w-full":"gap-3 lg:grid md:grid-cols-12",t)})}),p=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:a,...s,className:(0,r.cn)("w-full h-px bg-border",t)})}),x=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("h3",{ref:a,...s,className:(0,r.cn)("text-foreground text-xl",t)})}),h=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("p",{ref:a,...s,className:(0,r.cn)("text-sm text-foreground-light",t)})}),g=(0,s.forwardRef)((e,a)=>{let{className:t,children:s,title:l,...i}=e;return(0,n.jsxs)("div",{ref:a,...i,className:(0,r.cn)("col-span-4 xl:col-span-5 prose text-sm",t),children:[l&&(0,n.jsx)("h2",{children:l}),s]})}),f=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:a,...s,className:(0,r.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",t)})}),y=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:a,...s,className:(0,r.cn)("flex flex-col gap-3 items-center",t)})}),v=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:a,...s,className:(0,r.cn)("flex w-full items-center",t)})}),j=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:a,...s,className:(0,r.cn)("flex flex-row gap-3",t)})}),b=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:a,...s,className:(0,r.cn)("flex flex-col gap-3","min-w-[420px]",t)})}),N=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:a,...s,className:(0,r.cn)(l,i,"my-8 flex flex-col gap-8",t)})});d.displayName="ScaffoldHeader",c.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",o.displayName="ScaffoldContainer",p.displayName="ScaffoldDivider",m.displayName="ScaffoldSection",b.displayName="ScaffoldColumn",g.displayName="ScaffoldSectionDetail",f.displayName="ScaffoldSectionContent",y.displayName="ScaffoldFilterAndContent",v.displayName="ScaffoldActionsContainer",j.displayName="ScaffoldActionsGroup",N.displayName="ScaffoldContainerLegacy",x.displayName="ScaffoldSectionTitle",h.displayName="ScaffoldSectionDescription"},96103:(e,a,t)=>{"use strict";t.d(a,{A:()=>g});var n=t(80263),s=t(63121),r=t(94766),l=t(8572),i=t(40716),o=t(52445),d=t(53405),c=t(80127),u=t(38112),m=t(22554),p=t(30264),x=t(23035);let h=e=>{let{children:a}=e,{data:t}=(0,o.s)(),d=(0,i.X)({installationId:null==t?void 0:t.partner_id},{enabled:(null==t?void 0:t.managed_by)===x.Kf.VERCEL_MARKETPLACE}),h=(0,p.x)({organizationSlug:null==t?void 0:t.slug},{enabled:(null==t?void 0:t.managed_by)===x.Kf.AWS_MARKETPLACE}),{data:g,isSuccess:f}=(null==t?void 0:t.managed_by)===x.Kf.AWS_MARKETPLACE?h:d;return(0,n.jsxs)("div",{className:(0,c.cn)("h-full w-full flex flex-col overflow-hidden"),"data-sentry-component":"OrganizationLayoutContent","data-sentry-source-file":"OrganizationLayout.tsx",children:[t&&(null==t?void 0:t.managed_by)!=="supabase"&&(0,n.jsxs)(u.Fc,{variant:"default",className:"flex items-center gap-4 border-t-0 border-x-0 rounded-none",children:[(0,n.jsx)(r.A,{organization:t,showTooltip:!1,size:"medium"}),(0,n.jsxs)(u.XL,{className:"flex-1",children:["This organization is managed by ",l.N[t.managed_by],"."]}),(0,n.jsx)(m.$,{asChild:!0,type:"default",iconRight:(0,n.jsx)(s.A,{}),disabled:!f,children:(0,n.jsx)("a",{href:null==g?void 0:g.url,target:"_blank",rel:"noopener noreferrer",children:"Manage"})})]}),(0,n.jsx)("main",{className:"h-full w-full overflow-y-auto",children:a})]})},g=(0,d.r)(e=>{let{children:a}=e;return(0,n.jsx)(h,{"data-sentry-element":"OrganizationLayoutContent","data-sentry-component":"OrganizationLayout","data-sentry-source-file":"OrganizationLayout.tsx",children:a})})},96334:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});let n=(0,t(81915).A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},96827:(e,a,t)=>{"use strict";t.d(a,{A:()=>i,y:()=>l});var n=t(80263),s=t(80127);let r=e=>{let{className:a,delayIndex:t=0,animationDelay:r=150}=e;return(0,n.jsx)("div",{className:(0,s.cn)("shimmering-loader rounded py-3",a),style:{animationFillMode:"backwards",animationDelay:"".concat(t*r,"ms")},"data-sentry-component":"ShimmeringLoader","data-sentry-source-file":"index.tsx"})},l=e=>{let{className:a}=e;return(0,n.jsxs)("div",{className:(0,s.cn)(a,"space-y-2"),"data-sentry-component":"GenericSkeletonLoader","data-sentry-source-file":"index.tsx",children:[(0,n.jsx)(r,{"data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"index.tsx"}),(0,n.jsx)(r,{className:"w-3/4","data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"index.tsx"}),(0,n.jsx)(r,{className:"w-1/2","data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"index.tsx"})]})},i=r}},e=>{var a=a=>e(e.s=a);e.O(0,[89,673,7494,726,5476,4915,7074,4560,2735,8444,6110,3895,1168,7795,9587,5348,5175,4654,3258,4185,6393,4352,304,6416,8311,3494,636,6593,8792],()=>a(62287)),_N_E=e.O()}]);