try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="093bb8c4-341a-483b-bbba-f537831e8ab3",e._sentryDebugIdIdentifier="sentry-dbid-093bb8c4-341a-483b-bbba-f537831e8ab3")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6266,8819],{3049:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(81915).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},6533:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(81915).A)("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]])},13322:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(81915).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},15419:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(80263),r=s(93749),n=s.n(r),l=s(98615),i=s(34531),o=s(22554);let c=e=>{let{name:t="",isActive:s,isExternal:r,icon:c,rightIcon:d,url:u="",target:m="_self",onClick:x,textClassName:h="",hoverText:p="",label:f}=e,y=(0,a.jsx)(l.Ay.Item,{icon:c,rounded:!0,active:s,onClick:x,children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,a.jsxs)("div",{title:p||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+h,children:[(0,a.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==f&&(0,a.jsx)(i.E,{variant:"warning",className:"py-0 px-1.5 capitalize",children:f})]}),d&&(0,a.jsx)("div",{children:d})]})});return u?r?(0,a.jsx)(o.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:(0,a.jsx)(n(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,a.jsx)(n(),{href:u,className:"block",target:m,children:y}):y}},21260:(e,t,s)=>{"use strict";s.d(t,{M:()=>l});var a=s(80263),r=s(80127),n=s(86252);let l=e=>{let{title:t,description:s,docsUrl:l,actions:i,className:o}=e;return(0,a.jsxs)("div",{className:(0,r.cn)("w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ".concat(o)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"text-foreground text-xl prose",children:t}),s&&(0,a.jsx)("div",{className:"prose text-sm max-w-2xl",children:s})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==l&&(0,a.jsx)(n.A,{href:l}),i]})]})}},25062:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(81915).A)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]])},29503:(e,t,s)=>{"use strict";s.d(t,{p:()=>m});var a=s(80263),r=s(50960),n=s(53239),l=s(70979),i=s(80127),o=s(20838),c=s(22554),d=s(92413);function u(e){let{icon:t,className:s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-foreground-light",s),"data-sentry-component":"InputIconContainer","data-sentry-source-file":"InputIconContainer.tsx",children:t})}let m=(0,n.forwardRef)((e,t)=>{let{copy:s,showCopyOnHover:m=!1,icon:x,reveal:h=!1,actions:p,onCopy:f,iconContainerClassName:y,containerClassName:v,...g}=e,[j,w]=(0,n.useState)("Copy"),[b,_]=(0,n.useState)(!0),N=(0,d.A)("input"),S=[];return x&&S.push(N.with_icon),(0,a.jsxs)("div",{className:(0,i.cn)("relative group",v),children:[(0,a.jsx)(o.p,{ref:t,...g,onCopy:f,value:h&&b?"**** **** **** ****":g.value,className:(0,i.cn)(...S,g.className)}),x&&(0,a.jsx)(u,{icon:x,className:y}),s||p?(0,a.jsxs)("div",{className:N.actions_container,children:[s&&!(h&&b)?(0,a.jsx)(c.$,{size:"tiny",type:"default",className:(0,i.cn)(m&&"opacity-0 group-hover:opacity-100 transition"),icon:(0,a.jsx)(r.A,{size:16,className:"text-foreground-muted"}),onClick:()=>{var e;return e=g.value,void(0,l.l)(e,()=>{w("Copied"),setTimeout(function(){w("Copy")},3e3),null==f||f()})},children:j}):null,h&&b?(0,a.jsx)(c.$,{size:"tiny",type:"default",onClick:function(){_(!1)},children:"Reveal"}):null,p&&p]}):null]})})},30237:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/auth/users",function(){return s(92185)}])},34160:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var a=s(17702),r=s(56947),n=s(53434),l=s.n(n),i=s(53239),o=s(56390),c=s(37578),d=s(70938),u=s(86337),m=s(49300);let x=(e,t)=>(0,i.useMemo)(()=>0!==e.length&&(0,c.l8)(e[0][t])?null==e?void 0:e.map(e=>(e[t]=(0,c.RT)(e[t]),e)):e,[JSON.stringify(e)]),h=function(e){var t,s,n,h,p;let{projectRef:f,table:y,filterOverride:v,limit:g}=e,j=(0,o.Et)(o.Z8),[w,b]=(0,i.useState)(new Date().toISOString()),{timestampStart:_,timestampEnd:N,filters:S,search:C}=(0,m.B)(),A=(0,i.useMemo)(()=>_||j.calcFrom(),[_,j]),k=(0,i.useMemo)(()=>N||j.calcTo(),[N,j]),U=(0,i.useMemo)(()=>({...S,...v,...C?{search_query:C}:{}}),[JSON.stringify(S),JSON.stringify(v),C]),M=(0,i.useMemo)(()=>({iso_timestamp_start:A,iso_timestamp_end:k,sql:(0,c.qr)(y,U,g)}),[A,k,y,U,g]),T=(0,i.useMemo)(()=>["projects",f,"logs",M],[f,M]),{data:I,isSuccess:L,isLoading:E,isRefetching:z,error:P,fetchNextPage:D,isFetchingNextPage:F,refetch:R}=(0,a.q)(T,async e=>{let{signal:t,pageParam:s}=e,{data:a,error:r}=await (0,d.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:f},query:{...M,iso_timestamp_end:s||M.iso_timestamp_end}},signal:t});if(r)throw r;return a},{refetchOnWindowFocus:!1,getNextPageParam(e){var t,s;if((null!=(s=null==(t=e.result)?void 0:t.length)?s:0)===0)return;let a=e.result.length,{timestamp:r}=e.result[a-1];return l().utc(Number(r/1e3)).toISOString()}}),{logData:O,error:H,oldestTimestamp:V}=(0,i.useMemo)(()=>{var e,t;let s=[],a=P?P.message:null;null==I||null==(e=I.pages)||e.forEach(e=>{(null==e?void 0:e.result)&&(s=[...s,...e.result]),!a&&(null==e?void 0:e.error)&&(a=e.error)});let r=s.length>0?null==(t=s[s.length-1])?void 0:t.timestamp:void 0;return{logData:s,error:a,oldestTimestamp:r}},[null==I?void 0:I.pages]),q=(0,i.useMemo)(()=>(0,c.oZ)(y,U),[y,U]),B=(0,i.useMemo)(()=>["projects",f,"logs-count",{projectRef:f,sql:q,iso_timestamp_start:w,iso_timestamp_end:k,table:y,mergedFilters:U}],[f,q,w,k,y,U]),{data:Z}=(0,r.I)(B,async e=>{let{signal:t}=e,{data:s,error:a}=await (0,d.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:f},query:{sql:q,iso_timestamp_start:w,iso_timestamp_end:k}},signal:t});if(a)throw a;return s},{refetchOnWindowFocus:!1,refetchInterval:6e4,enabled:!H&&!!I&&(null==I||null==(t=I.pages)?void 0:t.length)>0}),$=null!=(h=null==Z||null==(n=Z.result)||null==(s=n[0])?void 0:s.count)?h:0,G=(0,i.useMemo)(()=>(0,c.tS)(y,M,U),[y,M,U]),J=(0,i.useMemo)(()=>["projects",f,"logs-chart",{projectRef:f,sql:G,iso_timestamp_start:A,iso_timestamp_end:k}],[f,G,A,k]),{data:W,refetch:K}=(0,r.I)(J,async e=>{let{signal:t}=e,{data:s,error:a}=await (0,d.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:f},query:{iso_timestamp_start:A,iso_timestamp_end:k,sql:G}},signal:t});if(a)throw a;return s},{refetchOnWindowFocus:!1}),X=(0,i.useCallback)(async()=>{b(new Date().toISOString()),K(),R()},[R,K]),Q=x(null!=(p=null==W?void 0:W.result)?p:[],"timestamp"),{data:Y,error:ee}=(0,u.m)(Q,"timestamp","count",0,A,k||new Date().toISOString());return{newCount:$,logData:O,isSuccess:L,isLoading:E||z,isLoadingOlder:F,error:H||ee,filters:U,params:M,oldestTimestamp:V?String(V):void 0,eventChartData:Y,refresh:X,loadOlder:()=>D()}}},41807:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(80263);s(53239);let r=function(e){let{children:t,target:s="_blank",href:r,className:n,onClick:l,style:i}=e;return(0,a.jsx)("a",{onClick:l,href:r,target:s,rel:"noopener noreferrer",style:i,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})}},49300:(e,t,s)=>{"use strict";s.d(t,{B:()=>i});var a=s(49629);let r={search:"",timestampStart:"",timestampEnd:"",filters:{}},n=e=>(0,a.Cp)({parse:t=>null!=t?t:e,serialize:e=>e||""}),l=e=>(0,a.Cp)({parse:t=>{if(!t)return e;try{return JSON.parse(t)}catch(t){return e}},serialize:e=>{if(!e)return"";try{return JSON.stringify(e)}catch(e){return""}}});function i(){let[e,t]=(0,a.ZA)("s",n(r.search)),[s,i]=(0,a.ZA)("its",n(r.timestampStart)),[o,c]=(0,a.ZA)("ite",n(r.timestampEnd)),[d,u]=(0,a.ZA)("log",n("")),[m,x]=(0,a.ZA)("f",l(r.filters)),h=e||r.search,p=s||r.timestampStart,f=o||r.timestampEnd,y=m||r.filters,v=e=>{t(e||r.search)},g=e=>{x(e||r.filters)};return{search:h,timestampStart:p,timestampEnd:f,selectedLogId:d||null,filters:y,setSearch:v,setTimeRange:(e,t)=>{i(e||r.timestampStart),c(t||r.timestampEnd)},setSelectedLogId:e=>{u(e||"")},setFilters:g,updateFilter:(e,t)=>{g({...y,[e]:t})},reset:()=>{v(r.search),i(r.timestampStart),c(r.timestampEnd),u(""),x(r.filters)}}}},51502:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(81915).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},54004:(e,t,s)=>{"use strict";s.d(t,{aq:()=>c});var a=s(17702),r=s(20305),n=s(16703),l=s(74144),i=s(75322);let o=e=>{let{page:t=0,verified:s,keywords:a,providers:r,sort:n,order:l}=e,i=[];if(a&&""!==a){let e=a.replaceAll("'","''");i.push("id::text like '%".concat(e,"%' or email like '%").concat(e,"%' or phone like '%").concat(e,"%' or raw_user_meta_data->>'full_name' ilike '%").concat(e,"%' or raw_user_meta_data->>'first_name' ilike '%").concat(e,"%' or raw_user_meta_data->>'last_name' ilike '%").concat(e,"%' or raw_user_meta_data->>'display_name' ilike '%").concat(e,"%'"))}"verified"===s?i.push("email_confirmed_at IS NOT NULL or phone_confirmed_at IS NOT NULL"):"anonymous"===s?i.push("is_anonymous is true"):"unverified"===s&&i.push("email_confirmed_at IS NULL AND phone_confirmed_at IS NULL"),r&&r.length>0&&(r.includes("saml 2.0")?i.push("(select jsonb_agg(case when value ~ '^sso' then 'sso' else value end) from jsonb_array_elements_text((raw_app_meta_data ->> 'providers')::jsonb)) ?| array[".concat(r.map(e=>"saml 2.0"===e?"'sso'":"'".concat(e,"'")).join(", "),"]").trim()):i.push("(raw_app_meta_data->>'providers')::jsonb ?| array[".concat(r.map(e=>"'".concat(e,"'")).join(", "),"]")));let o=i.map(e=>"(".concat(e,")")).join(" and ");return"".concat("\n  select *, coalesce((select array_agg(distinct i.provider) from auth.identities i where i.user_id = auth.users.id), '{}'::text[]) as providers from auth.users\n  ".trim()).concat(i.length>0?" where ".concat(o):"",' order by "').concat(null!=n?n:"created_at",'" ').concat(null!=l?l:"desc"," nulls last limit ").concat(50," offset ").concat(50*t,";")},c=function(e){let{projectRef:t,connectionString:s,keywords:c,filter:d,providers:u,sort:m,order:x}=e,{enabled:h=!0,...p}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:f}=(0,n.YA)(),y=(null==f?void 0:f.status)===l.BU.ACTIVE_HEALTHY;return(0,a.q)(i.Z.usersInfinite(t,{keywords:c,filter:d,providers:u,sort:m,order:x}),e=>{let{signal:a,pageParam:n}=e;return(0,r.E)({projectRef:t,connectionString:s,sql:o({page:n,verified:d,keywords:c,providers:u,sort:null!=m?m:"created_at",order:null!=x?x:"desc"}),queryKey:i.Z.usersInfinite(t)},a)},{enabled:h&&void 0!==t&&y,getNextPageParam(e,t){let s=t.length;if(e.result.length>=50)return s},...p})}},60905:(e,t,s)=>{"use strict";s.d(t,{l:()=>i});var a=s(80263),r=s(98615),n=s(34531),l=s(15419);let i=e=>{let{page:t,menu:s}=e;return(0,a.jsx)("div",{className:"flex flex-col space-y-8","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,a.jsx)(r.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:s.map((e,i)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"my-6 space-y-8",children:(0,a.jsxs)("div",{className:"mx-3",children:[(0,a.jsx)(r.Ay.Group,{title:e.title?(0,a.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,a.jsx)("span",{children:e.title}),e.isPreview&&(0,a.jsx)(n.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,a.jsx)("div",{children:e.items.map(e=>{let s=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,a.jsx)(l.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:s,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),i!==s.length-1&&(0,a.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},61646:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(80263),r=s(90944),n=s(19335),l=s(22554);let i=e=>{let{section:t}=e,s=(0,n.qM)();return(0,a.jsx)(l.$,{size:"tiny",type:"default",onClick:()=>{t&&s.setActiveDocsSection(t),s.setShowProjectApiDocs(!0)},icon:(0,a.jsx)(r.A,{strokeWidth:1.5,className:"text-foreground-muted"}),"data-sentry-element":"Button","data-sentry-component":"APIDocsButton","data-sentry-source-file":"APIDocsButton.tsx",children:"API Docs"})}},86337:(e,t,s)=>{"use strict";s.d(t,{m:()=>n});var a=s(37578),r=s(53239);let n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.useMemo)(()=>{var e;let[s,r]=t;if(!(null==(e=s[0])?void 0:e[r]))return{data:s,error:void 0,isError:!1};try{return{data:(0,a.mu)(...t).sort((e,s)=>new Date(e[t[1]])-new Date(s[t[1]])),error:void 0,isError:!1}}catch(e){return{data:[],error:e,isError:!0}}},[JSON.stringify(t[0]),...t])}},91951:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var a=s(80263),r=s(67908),n=s(46491),l=s(60905),i=s(46380),o=s(64084),c=s(53405),d=s(33444),u=s(44487);let m=()=>{let e=(0,r.useRouter)(),{ref:t="default"}=(0,n.g)(),{authenticationSignInProviders:s,authenticationRateLimits:c,authenticationEmails:d,authenticationMultiFactor:m,authenticationAttackProtection:x,authenticationAdvanced:h}=(0,o.x)(["authentication:sign_in_providers","authentication:rate_limits","authentication:emails","authentication:multi_factor","authentication:attack_protection","authentication:advanced"]);(0,i.$E)({projectRef:t});let p=e.pathname.split("/")[4];return(0,a.jsx)(l.l,{page:p,menu:(0,u.B)(t,{authenticationSignInProviders:s,authenticationRateLimits:c,authenticationEmails:d,authenticationMultiFactor:m,authenticationAttackProtection:x,authenticationAdvanced:h}),"data-sentry-element":"ProductMenu","data-sentry-component":"AuthProductMenu","data-sentry-source-file":"AuthLayout.tsx"})},x=(0,c.r)(e=>{let{children:t}=e;return(0,a.jsx)(d.A,{title:"Authentication",product:"Authentication",productMenu:(0,a.jsx)(m,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"AuthLayout","data-sentry-source-file":"AuthLayout.tsx",children:t})})},91982:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(80263),r=s(53239),n=s(94844),l=s(38583);function i(e,t){if(!t.error)return delete e[t.key],e;if(t)return{...e,[t.key]:t.error};throw Error()}function o(e){let{validate:t,...s}=e,[o,c]=(0,r.useReducer)(i,null),d=(0,n.Wx)({validateOnBlur:!0,...s,validationSchema:s.validationSchema,initialValues:s.initialValues,onSubmit:s.onSubmit,validate:t||function(){return o}});return(0,a.jsx)("form",{id:s.id,name:s.name,onSubmit:d.handleSubmit,className:s.className,style:s.style,method:"POST","data-sentry-component":"Form","data-sentry-source-file":"Form.tsx",children:(0,a.jsx)(l.h,{values:d.values,errors:d.errors,formContextOnChange:d.handleChange,handleBlur:d.handleBlur,touched:d.touched,fieldLevelValidation:function(e,t){c({key:e,error:t})},"data-sentry-element":"FormContextProvider","data-sentry-source-file":"Form.tsx",children:s.children({errors:d.errors,touched:d.touched,isSubmitting:d.isSubmitting,isValidating:d.isValidating,submitCount:d.submitCount,initialValues:d.initialValues,values:d.values,handleReset:d.handleReset,resetForm:d.resetForm,setFieldValue:d.setFieldValue})})})}},92185:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eV});var a=s(80263),r=s(32144),n=s(2827),l=s(80949),i=s(36839),o=s(27969),c=s(93569),d=s(50336),u=s(3049),m=s(7007),x=s(21749),h=s(53239),p=s(24560),f=s(73969),y=s(46491),v=s(4487),g=s(92589),j=s(61646),w=s(84558),b=s(72666),_=s(21260),N=s(75322),S=s(67013),C=s(56947),A=s(20305);let k=e=>{let{filter:t,keywords:s,providers:a}=e,r=[];if(s&&""!==s){let e=s.replaceAll("'","''");r.push("id::text ilike '%".concat(e,"%' or email ilike '%").concat(e,"%' or phone ilike '%").concat(e,"%'"))}"verified"===t?r.push("email_confirmed_at IS NOT NULL or phone_confirmed_at IS NOT NULL"):"anonymous"===t?r.push("is_anonymous is true"):"unverified"===t&&r.push("email_confirmed_at IS NULL AND phone_confirmed_at IS NULL"),a&&a.length>0&&(a.includes("saml 2.0")?r.push("(select jsonb_agg(case when value ~ '^sso' then 'sso' else value end) from jsonb_array_elements_text((raw_app_meta_data ->> 'providers')::jsonb)) ?| array[".concat(a.map(e=>"saml 2.0"===e?"'sso'":"'".concat(e,"'")).join(", "),"]").trim()):r.push("(raw_app_meta_data->>'providers')::jsonb ?| array[".concat(a.map(e=>"'".concat(e,"'")).join(", "),"]")));let n=r.map(e=>"(".concat(e,")")).join(" and ");return"".concat("select count(*) from auth.users").concat(r.length>0?" where ".concat(n):"",";")};async function U(e,t){var s;let{projectRef:a,connectionString:r,keywords:n,filter:l,providers:i}=e,o=k({filter:l,keywords:n,providers:i}),{result:c}=await (0,A.E)({projectRef:a,connectionString:r,sql:o,queryKey:["users-count"]},t),d=null==c||null==(s=c[0])?void 0:s.count;if("number"!=typeof d)throw Error("Error fetching users count");return d}let M=function(e){let{projectRef:t,connectionString:s,keywords:a,filter:r,providers:n}=e,{enabled:l=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,C.I)(N.Z.usersCount(t,{keywords:a,filter:r,providers:n}),e=>{let{signal:l}=e;return U({projectRef:t,connectionString:s,keywords:a,filter:r,providers:n},l)},{enabled:l&&void 0!==t,...i})};var T=s(54004),I=s(64084),L=s(59347),E=s(16703),z=s(46895),P=s(22554),D=s(59130),F=s(80127),R=s(64495),O=s(37656),H=s(85469),V=s(29503),q=s(86336),B=s(96827),Z=s(60045),$=s(83759),G=s(16586);let J=(0,s(81915).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var W=s(60123),K=s(75831),X=s(32981),Q=s(13322),Y=s(87494),ee=s(10663),et=s(80251),es=s(70938);async function ea(e){let{projectRef:t,user:s}=e,{data:a,error:r}=await (0,es.bE)("/platform/auth/{ref}/users",{params:{path:{ref:t}},body:{email:s.email,password:s.password,email_confirm:s.autoConfirmUser}});return r&&(0,es.H4)(r),a}let er=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,r.jE)();return(0,et.n)(e=>ea(e),{async onSuccess(t,s,r){let{projectRef:n}=s;await Promise.all([a.invalidateQueries(N.Z.usersInfinite(n)),a.invalidateQueries(N.Z.usersCount(n))]),await (null==e?void 0:e(t,s,r))},async onError(e,s,a){void 0===t?f.oR.error("Failed to create user: ".concat(e.message)):t(e,s,a)},...s})};var en=s(19506),el=s(20704),ei=s(20838),eo=s(15745);let ec=ee.Ik({email:ee.Yj().min(1,"Email is required").email("Must be a valid email address"),password:ee.Yj().min(1,"Password is required"),autoConfirmUser:ee.zM()}),ed=e=>{let{visible:t,setVisible:s}=e,{ref:r}=(0,y.g)(),{can:n}=(0,K.hl)(Z.aG.AUTH_EXECUTE,"create_user"),{mutate:l,isLoading:i}=er({onSuccess(e){f.oR.success("Successfully created user: ".concat(e.email)),c.reset({email:"",password:"",autoConfirmUser:!0}),s(!1)}}),o=async e=>{if(!r)return console.error("Project ref is required");l({projectRef:r,user:e})},c=(0,Y.mN)({resolver:(0,X.u)(ec),defaultValues:{email:"",password:"",autoConfirmUser:!0}});return(0,a.jsx)(en.lG,{open:t,onOpenChange:s,"data-sentry-element":"Dialog","data-sentry-component":"CreateUserModal","data-sentry-source-file":"CreateUserModal.tsx",children:(0,a.jsxs)(en.Cf,{size:"small","data-sentry-element":"DialogContent","data-sentry-source-file":"CreateUserModal.tsx",children:[(0,a.jsx)(en.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"CreateUserModal.tsx",children:(0,a.jsx)(en.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"CreateUserModal.tsx",children:"Create a new user"})}),(0,a.jsx)(en.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"CreateUserModal.tsx"}),(0,a.jsx)(el.lV,{...c,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx",children:(0,a.jsxs)("form",{id:"create-user",className:"flex flex-col gap-y-4 p-6",onSubmit:c.handleSubmit(o),children:[(0,a.jsx)(el.zB,{name:"email",control:c.control,render:e=>{let{field:t}=e;return(0,a.jsxs)(el.eI,{className:"flex flex-col gap-1",children:[(0,a.jsx)(el.lR,{children:"Email address"}),(0,a.jsx)(el.MJ,{children:(0,a.jsxs)("div",{className:"items-center relative",children:[(0,a.jsx)(G.A,{size:18,className:"absolute left-2 top-1/2 transform -translate-y-1/2",strokeWidth:1.5}),(0,a.jsx)(ei.p,{autoFocus:!0,...t,autoComplete:"off",type:"email",name:"email",placeholder:"user@example.com",disabled:i,className:"pl-8"})]})}),(0,a.jsx)(el.C5,{})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx"}),(0,a.jsx)(el.zB,{name:"password",control:c.control,render:e=>{let{field:t}=e;return(0,a.jsxs)(el.eI,{className:"flex flex-col gap-1",children:[(0,a.jsx)(el.lR,{children:"User Password"}),(0,a.jsx)(el.MJ,{children:(0,a.jsxs)("div",{className:"items-center relative",children:[(0,a.jsx)(Q.A,{size:18,className:"absolute left-2 top-1/2 transform -translate-y-1/2",strokeWidth:1.5}),(0,a.jsx)(ei.p,{...t,autoComplete:"new-password",type:"password",name:"password",placeholder:"••••••••",disabled:i,className:"pl-8"})]})}),(0,a.jsx)(el.C5,{})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx"}),(0,a.jsx)(el.zB,{name:"autoConfirmUser",control:c.control,render:e=>{let{field:t}=e;return(0,a.jsxs)(el.eI,{className:"flex items-center gap-x-2",children:[(0,a.jsx)(el.MJ,{children:(0,a.jsx)(eo.S,{checked:t.value,onCheckedChange:e=>t.onChange(e)})}),(0,a.jsx)(el.lR,{children:"Auto Confirm User?"})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx"}),(0,a.jsx)(el.lR,{"data-sentry-element":"FormLabel_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx",children:(0,a.jsx)("p",{className:"text-sm text-foreground-lighter",children:"A confirmation email will not be sent when creating a user via this form."})}),(0,a.jsx)(P.$,{block:!0,size:"small",htmlType:"submit",loading:i,disabled:!n||i,"data-sentry-element":"Button","data-sentry-source-file":"CreateUserModal.tsx",children:"Create user"})]})})]})})};async function eu(e){let{projectRef:t,email:s}=e,{data:a,error:r}=await (0,es.bE)("/platform/auth/{ref}/invite",{params:{path:{ref:t}},body:{email:s}});return r&&(0,es.H4)(r),a}let em=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,r.jE)();return(0,et.n)(e=>eu(e),{async onSuccess(t,s,r){let{projectRef:n}=s;await Promise.all([a.invalidateQueries(N.Z.usersInfinite(n)),a.invalidateQueries(N.Z.usersCount(n))]),await (null==e?void 0:e(t,s,r))},async onError(e,s,a){void 0===t?f.oR.error("Failed to invite user: ".concat(e.message)):t(e,s,a)},...s})};var ex=s(33924),eh=s(91982),ep=s(48192);let ef=e=>{let{visible:t,setVisible:s}=e,{ref:r}=(0,y.g)(),{mutate:n,isLoading:l}=em({onSuccess:(e,t)=>{f.oR.success("Sent invite email to ".concat(t.email)),s(!1)}}),{can:i}=(0,K.hl)(Z.aG.AUTH_EXECUTE,"invite_user"),o=async e=>{if(!r)return console.error("Project ref is required");n({projectRef:r,email:e.email})};return(0,a.jsx)(ex.A,{hideFooter:!0,size:"small",visible:t,header:"Invite a new user",onCancel:()=>s(!t),"data-sentry-element":"Modal","data-sentry-component":"InviteUserModal","data-sentry-source-file":"InviteUserModal.tsx",children:(0,a.jsx)(eh.A,{validateOnBlur:!1,initialValues:{email:""},validate:e=>{let t={};return 0===e.email.length?t.email="Please enter a valid email":/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)||(t.email="".concat(e.email," is an invalid email")),t},onSubmit:o,"data-sentry-element":"Form","data-sentry-source-file":"InviteUserModal.tsx",children:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ex.A.Content,{children:(0,a.jsx)(ep.A,{id:"email",className:"w-full",label:"User email",icon:(0,a.jsx)(G.A,{}),type:"email",name:"email",placeholder:"User email"})}),(0,a.jsx)(ex.A.Content,{children:(0,a.jsx)(P.$,{block:!0,size:"small",htmlType:"submit",loading:l,disabled:!i||l,children:"Invite user"})})]})})},"invite-user-modal")},ey=()=>{let e=(0,I.x)("authentication:show_send_invitation"),{can:t}=(0,K.hl)(Z.aG.AUTH_EXECUTE,"invite_user"),{can:s}=(0,K.hl)(Z.aG.AUTH_EXECUTE,"create_user"),[r,n]=(0,h.useState)(!1),[l,i]=(0,h.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(R.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,a.jsx)(R.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"AddUserDropdown.tsx",children:(0,a.jsx)(P.$,{type:"primary",iconRight:(0,a.jsx)($.A,{size:14,strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"AddUserDropdown.tsx",children:"Add user"})}),(0,a.jsxs)(R.SQ,{side:"bottom",align:"end",className:"w-40","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"AddUserDropdown.tsx",children:[e&&(0,a.jsxs)(W.x,{className:"gap-x-2",disabled:!t,onClick:()=>{t&&n(!0)},tooltip:{content:{side:"left",text:"You need additional permissions to invite users"}},children:[(0,a.jsx)(G.A,{size:14}),(0,a.jsx)("p",{children:"Send invitation"})]}),(0,a.jsxs)(W.x,{className:"space-x-2 !pointer-events-auto",disabled:!s,onClick:()=>{s&&i(!0)},tooltip:{content:{side:"left",text:"You need additional permissions to create users"}},"data-sentry-element":"DropdownMenuItemTooltip","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,a.jsx)(J,{size:14,"data-sentry-element":"UserPlus","data-sentry-source-file":"AddUserDropdown.tsx"}),(0,a.jsx)("p",{children:"Create new user"})]})]})]}),(0,a.jsx)(ef,{visible:r,setVisible:n,"data-sentry-element":"InviteUserModal","data-sentry-source-file":"AddUserDropdown.tsx"}),(0,a.jsx)(ed,{visible:l,setVisible:i,"data-sentry-element":"CreateUserModal","data-sentry-source-file":"AddUserDropdown.tsx"})]})};var ev=s(64194),eg=s(47134),ej=s(98050),ew=s(63121),eb=s(93749),e_=s.n(eb),eN=s(56390),eS=s(14132),eC=s(34160),eA=s(49300),ek=s(39119),eU=s(68506),eM=s(50922),eT=s(92737),eI=s(76369),eL=s(23953);let eE=e=>{let{user:t}=e,{ref:s}=(0,y.g)(),{filters:r,setFilters:n}=(0,eA.B)(),{logData:l,isSuccess:i,isLoading:o,refresh:c}=(0,eC.A)({projectRef:s,table:eN.eV.auth,filterOverride:{search_query:t.id},limit:5});return(0,h.useEffect)(()=>{t.id&&n({...r,search_query:t.id})},[t.id]),(0,a.jsxs)("div",{"data-sentry-component":"UserLogs","data-sentry-source-file":"UserLogs.tsx",children:[(0,a.jsx)(eI.x,{user:t,"data-sentry-element":"UserHeader","data-sentry-source-file":"UserLogs.tsx"}),(0,a.jsx)(ek.w,{"data-sentry-element":"Separator","data-sentry-source-file":"UserLogs.tsx"}),(0,a.jsxs)("div",{className:(0,F.cn)("flex flex-col gap-y-3",eL.jU),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Authentication logs"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Latest logs from authentication for this user in the past hour"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(P.$,{type:"status_code"in r?"default":"secondary",className:"rounded-r-none border-r-0",disabled:o,onClick:()=>n({search_query:t.id}),"data-sentry-element":"Button","data-sentry-source-file":"UserLogs.tsx",children:"Show all"}),(0,a.jsx)("div",{className:"border-button border border-l-0 py-3"}),(0,a.jsx)(P.$,{type:"status_code"in r?"secondary":"default",className:"rounded-l-none border-l-0",disabled:o,onClick:()=>n({search_query:t.id,status_code:{client_error:!0,server_error:!0}}),"data-sentry-element":"Button","data-sentry-source-file":"UserLogs.tsx",children:"Error only"})]}),(0,a.jsx)(P.$,{type:"default",loading:o,disabled:o,icon:(0,a.jsx)(u.A,{}),onClick:()=>c(),"data-sentry-element":"Button","data-sentry-source-file":"UserLogs.tsx",children:"Refresh"})]}),o&&!i?(0,a.jsx)(eS.y,{}):0===l.length?(0,a.jsx)(eM.Z,{type:"note",title:"No authentication logs available for this user",description:"Auth events such as logging in will be shown here"}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"border border-b-0 rounded-t-md divide-y overflow-hidden",children:l.map(e=>{var t;let r=(null!=(t=e.status)?t:"-").toString(),n=r.startsWith("4"),l=r.startsWith("5");return(0,a.jsxs)("div",{className:"flex items-center transition font-mono px-2 py-1.5 bg-surface-100 divide-x",children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light min-w-[125px] w-[125px] px-1",children:(0,a.jsx)(eT.T,{utcTimestamp:e.timestamp/1e3})}),(0,a.jsx)("div",{className:"flex items-center text-xs text-foreground-light h-[22px] min-w-[70px] w-[70px] px-2",children:(0,a.jsxs)("div",{className:(0,F.cn)("flex items-center justify-center gap-x-1",!!e.status&&"border px-1 py-0.5 rounded",n?"text-warning border-warning bg-warning-300":l?"text-destructive border-destructive bg-destructive-300":""),children:[(n||l)&&(0,a.jsx)(eU.HV,{hideBackground:!0,className:(0,F.cn)(n&&"text-warning-600")}),r]})}),(0,a.jsxs)("p",{className:"group relative flex items-center py-1.5 text-xs text-foreground-light px-2 truncate w-full",children:["".concat(e.path," | ").concat(e.msg),(0,a.jsx)(w.G,{type:"outline",asChild:!0,tooltip:{content:{text:"Open in logs"}},className:"px-1.5 absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition bg-background focus-visible:opacity-100",children:(0,a.jsx)(e_(),{href:"/project/".concat(s,"/logs/auth-logs?log=").concat(e.id),children:(0,a.jsx)(ew.A,{size:"12",className:"text-foreground-light"})})})]})]},e.id)})}),(0,a.jsx)(P.$,{block:!0,asChild:!0,type:"outline",className:"transition rounded-t-none text-foreground-light hover:text-foreground",children:(0,a.jsx)(e_(),{href:"/project/".concat(s,"/logs/auth-logs?s=").concat(t.id),children:"See more logs"})})]})]})]})};var ez=s(88069);let eP=e=>{let{selectedUser:t,onClose:s}=e,[r,n]=(0,h.useState)("overview"),[l,o]=(0,h.useState)(""),c=t?Object.entries(t).filter(e=>{let[t,s]=e;return t.toLowerCase().includes(l.toLowerCase())||"string"==typeof s&&s.toLowerCase().includes(l.toLowerCase())}).reduce((e,t)=>{let[s,a]=t;return void 0!==a&&(e[s]=a),e},{}):{};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H.WM,{withHandle:!0,"data-sentry-element":"ResizableHandle","data-sentry-source-file":"UserPanel.tsx"}),(0,a.jsxs)(H.wV,{defaultSize:30,maxSize:45,minSize:30,className:"bg-studio border-t","data-sentry-element":"ResizablePanel","data-sentry-source-file":"UserPanel.tsx",children:[(0,a.jsx)(P.$,{type:"text",className:"absolute top-3 right-3 px-1",icon:(0,a.jsx)(i.A,{}),onClick:()=>s(),"data-sentry-element":"Button","data-sentry-source-file":"UserPanel.tsx"}),(0,a.jsxs)(eg.tU,{value:r,className:"flex flex-col h-full",onValueChange:e=>n(e),"data-sentry-element":"Tabs_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:[(0,a.jsxs)(eg.j7,{className:"px-5 flex gap-x-4 min-h-[46px]","data-sentry-element":"TabsList_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:[(0,a.jsx)(eg.Xi,{value:"overview",className:"px-0 pb-0 h-full text-xs  data-[state=active]:bg-transparent !shadow-none","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:"Overview"}),(0,a.jsx)(eg.Xi,{value:"logs",className:"px-0 pb-0 h-full text-xs data-[state=active]:bg-transparent !shadow-none","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:"Logs"}),(0,a.jsx)(eg.Xi,{value:"raw",className:"px-0 pb-0 h-full text-xs data-[state=active]:bg-transparent !shadow-none","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:"Raw JSON"})]}),(0,a.jsx)(eg.av,{value:"overview",className:(0,F.cn)("mt-0 flex-grow min-h-0 overflow-y-auto"),"data-sentry-element":"TabsContent_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:t&&(0,a.jsx)(ez.nz,{user:t,onDeleteSuccess:s})}),(0,a.jsx)(eg.av,{value:"logs",className:(0,F.cn)("mt-0 flex-grow min-h-0 overflow-y-auto"),"data-sentry-element":"TabsContent_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:t&&(0,a.jsx)(eE,{user:t})}),(0,a.jsxs)(eg.av,{value:"raw",className:(0,F.cn)("mt-0 flex-grow min-h-0 overflow-y-auto",eL.jU),"data-sentry-element":"TabsContent_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(ei.p,{autoFocus:!0,type:"text",placeholder:"Filter...",value:l,onChange:e=>o(e.target.value),className:"mr-2","data-sentry-element":"Input_Shadcn_","data-sentry-source-file":"UserPanel.tsx"}),(0,a.jsx)(P.$,{type:"text",disabled:!l,onClick:()=>o(""),className:"text-xs","data-sentry-element":"Button","data-sentry-source-file":"UserPanel.tsx",children:"Clear"})]}),(0,a.jsx)(ej.X,{className:"javascript","data-sentry-element":"SimpleCodeBlock","data-sentry-source-file":"UserPanel.tsx",children:JSON.stringify(c,null,2)})]})]})]})]})};var eD=s(97897);let eF=()=>{var e,t;let s=(0,r.jE)(),{ref:C}=(0,y.g)(),{data:A}=(0,E.YA)(),k=(0,h.useRef)(null),U=(0,h.useRef)(0),Z=(0,v.hx)(),{authenticationShowProviderFilter:$,authenticationShowSortByEmail:G,authenticationShowSortByPhone:J,authenticationShowUserTypeFilter:W}=(0,I.x)(["authentication:show_provider_filter","authentication:show_sort_by_email","authentication:show_sort_by_phone","authentication:show_user_type_filter"]),[K,X]=(0,h.useState)([]),[Q,Y]=(0,h.useState)(""),[ee,et]=(0,h.useState)("all"),[es,ea]=(0,h.useState)(""),[er,en]=(0,h.useState)([]),[el,ei]=(0,h.useState)([]),[eo,ec]=(0,h.useState)("created_at:desc"),[ed,eu]=(0,h.useState)(),[em,ex]=(0,h.useState)(new Set([])),[eh,ep]=(0,h.useState)(),[ef,eg]=(0,h.useState)(!1),[ej,ew]=(0,h.useState)(!1),[eb,e_,{isSuccess:eN,isError:eS,error:eC}]=(0,L.U)(y.rS.AUTH_USERS_COLUMNS_CONFIGURATION(null!=C?C:""),null),[eA,ek]=eo.split(":"),{data:eU,error:eM,isSuccess:eT,isLoading:eI,isRefetching:eE,isError:ez,isFetchingNextPage:eF,refetch:eR,hasNextPage:eO,fetchNextPage:eH}=(0,T.aq)({projectRef:C,connectionString:null==A?void 0:A.connectionString,keywords:es,filter:"all"===ee?void 0:ee,providers:el,sort:eA,order:ek},{keepPreviousData:!!es,staleTime:1/0}),{data:eV,refetch:eq}=M({projectRef:C,connectionString:null==A?void 0:A.connectionString,keywords:es,filter:"all"===ee?void 0:ee,providers:el}),{mutateAsync:eB}=(0,S.X)(),eZ=(0,h.useMemo)(()=>{var e;return null!=(e=null==eU?void 0:eU.pages.flatMap(e=>e.result))?e:[]},[null==eU?void 0:eU.pages]),e$=eZ.find(e=>e.id===[...em][0]),eG=()=>{Y(""),ea("")},eJ=(e,t,s)=>{let a=e.slice(),[r]=a.splice(t,1);return a.splice(s,0,r),a},eW=(0,n.A)((e,t)=>{"toggle"===e?e_(t.columns.map(e=>({id:e.key,width:e.width}))):"resize"===e?e_(K.map((e,s)=>({id:e.key,width:s===t.idx?t.width:e.width}))):"reorder"===e&&e_(t.columns.map(e=>({id:e.key,width:e.width})))},500),eK=async()=>{if(!C)return console.error("Project ref is required");let e=[...em];ew(!0);try{await Promise.all(e.map(e=>eB({projectRef:C,userId:e,skipInvalidation:!0}))),await Promise.all([s.invalidateQueries(N.Z.usersInfinite(C)),s.invalidateQueries(N.Z.usersCount(C))]),f.oR.success("Successfully deleted the selected ".concat(em.size," user").concat(em.size>1?"s":"")),eg(!1),ex(new Set([])),e.includes(ed)&&eu(void 0)}catch(e){f.oR.error("Failed to delete selected users: ".concat(e.message))}finally{ew(!1)}};return(0,h.useEffect)(()=>{if(!eE&&(eN||eS&&eC.message.includes("data is undefined"))){let e=(0,eD.yA)({config:null!=eb?eb:[],users:null!=eZ?eZ:[],visibleColumns:er,setSortByValue:ec,onSelectDeleteUser:ep});X(e),e.length<eL.AF.length&&en(e.filter(e=>"img"!==e.key).map(e=>e.key))}},[eT,eE,eN,eS,eC,eZ,em]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsx)(_.M,{className:"py-4 px-6 !mb-0",title:"Users","data-sentry-element":"FormHeader","data-sentry-source-file":"UsersV2.tsx"}),(0,a.jsx)("div",{className:"bg-surface-200 py-3 px-4 md:px-6 flex flex-col lg:flex-row lg:items-center justify-between gap-2 border-t",children:em.size>0?(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsxs)(P.$,{type:"default",icon:(0,a.jsx)(l.A,{}),onClick:()=>eg(!0),children:["Delete ",em.size," users"]}),(0,a.jsx)(w.G,{type:"default",icon:(0,a.jsx)(i.A,{}),className:"px-1.5",onClick:()=>ex(new Set([])),tooltip:{content:{side:"bottom",text:"Cancel selection"}}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsx)(V.p,{size:"tiny",className:"w-52 pl-7 bg-transparent",iconContainerClassName:"pl-2",icon:(0,a.jsx)(o.A,{size:14,className:"text-foreground-lighter"}),placeholder:"Search email, phone or UID",value:Q,onChange:e=>Y(e.target.value),onKeyDown:e=>{"Enter"===e.code&&(Y(Q.trim()),ea(Q.trim().toLocaleLowerCase()))},actions:[Q&&(0,a.jsx)(P.$,{size:"tiny",type:"text",icon:(0,a.jsx)(i.A,{}),onClick:()=>eG(),className:"p-0 h-5 w-5"})]}),W&&(0,a.jsxs)(D.l6,{value:ee,onValueChange:e=>et(e),children:[(0,a.jsx)(D.bq,{size:"tiny",className:(0,F.cn)("w-[140px] !bg-transparent","all"===ee&&"border-dashed"),children:(0,a.jsx)(D.yv,{})}),(0,a.jsx)(D.gC,{children:(0,a.jsxs)(D.s3,{children:[(0,a.jsx)(D.eb,{value:"all",className:"text-xs",children:"All users"}),(0,a.jsx)(D.eb,{value:"verified",className:"text-xs",children:"Verified users"}),(0,a.jsx)(D.eb,{value:"unverified",className:"text-xs",children:"Unverified users"}),(0,a.jsx)(D.eb,{value:"anonymous",className:"text-xs",children:"Anonymous users"})]})})]}),$&&(0,a.jsx)(b.I,{name:"Provider",options:eL.UC,labelKey:"name",valueKey:"value",iconKey:"icon",activeOptions:el,labelClass:"text-xs",maxHeightClass:"h-[190px]",className:"w-52",onSaveFilters:ei}),(0,a.jsx)("div",{className:"border-r border-strong h-6"}),(0,a.jsx)(b.I,{name:0===er.length?"All columns":"Columns",title:"Select columns to show",buttonType:0===er.length?"dashed":"default",options:eL.AF.slice(1),labelKey:"name",valueKey:"id",labelClass:"text-xs",maxHeightClass:"h-[190px]",clearButtonText:"Reset",activeOptions:er,onSaveFilters:e=>{let t=(null!=eb?eb:[]).slice();0===e.length?t=eL.AF.map(e=>({id:e.id,width:e.width})):e.forEach(e=>{var s;t.find(t=>t.id===e)||t.push({id:e,width:null==(s=eL.AF.find(t=>t.id===e))?void 0:s.width})});let s=(0,eD.yA)({config:t,users:null!=eZ?eZ:[],visibleColumns:e,setSortByValue:ec,onSelectDeleteUser:ep});en(e),X(s),eW("toggle",{columns:s})}}),(0,a.jsxs)(R.rI,{children:[(0,a.jsx)(R.ty,{asChild:!0,children:(0,a.jsxs)(P.$,{icon:"desc"===ek?(0,a.jsx)(c.A,{}):(0,a.jsx)(d.A,{}),children:["Sorted by ",eA.replaceAll("_"," ")]})}),(0,a.jsx)(R.SQ,{className:"w-44",align:"start",children:(0,a.jsxs)(R.Hr,{value:eo,onValueChange:ec,children:[(0,a.jsxs)(R.lv,{children:[(0,a.jsx)(R.nV,{children:"Sort by created at"}),(0,a.jsxs)(R.M5,{children:[(0,a.jsx)(R.Ht,{value:"created_at:asc",children:"Ascending"}),(0,a.jsx)(R.Ht,{value:"created_at:desc",children:"Descending"})]})]}),(0,a.jsxs)(R.lv,{children:[(0,a.jsx)(R.nV,{children:"Sort by last sign in at"}),(0,a.jsxs)(R.M5,{children:[(0,a.jsx)(R.Ht,{value:"last_sign_in_at:asc",children:"Ascending"}),(0,a.jsx)(R.Ht,{value:"last_sign_in_at:desc",children:"Descending"})]})]}),G&&(0,a.jsxs)(R.lv,{children:[(0,a.jsx)(R.nV,{children:"Sort by email"}),(0,a.jsxs)(R.M5,{children:[(0,a.jsx)(R.Ht,{value:"email:asc",children:"Ascending"}),(0,a.jsx)(R.Ht,{value:"email:desc",children:"Descending"})]})]}),J&&(0,a.jsxs)(R.lv,{children:[(0,a.jsx)(R.nV,{children:"Sort by phone"}),(0,a.jsxs)(R.M5,{children:[(0,a.jsx)(R.Ht,{value:"phone:asc",children:"Ascending"}),(0,a.jsx)(R.Ht,{value:"phone:desc",children:"Descending"})]})]})]})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[Z&&(0,a.jsx)(j.A,{section:["user-management"]}),(0,a.jsx)(P.$,{size:"tiny",icon:(0,a.jsx)(u.A,{}),type:"default",loading:eE&&!eF,onClick:()=>{eR(),eq()},children:"Refresh"}),(0,a.jsx)(ey,{})]})]})}),(0,a.jsx)(O.$,{loading:eI||eE||eF,"data-sentry-element":"LoadingLine","data-sentry-source-file":"UsersV2.tsx"}),(0,a.jsxs)(H.HK,{direction:"horizontal",className:"relative flex flex-grow bg-alternative min-h-0",autoSaveId:"query-performance-layout-v1","data-sentry-element":"ResizablePanelGroup","data-sentry-source-file":"UsersV2.tsx",children:[(0,a.jsx)(H.wV,{defaultSize:1,"data-sentry-element":"ResizablePanel","data-sentry-source-file":"UsersV2.tsx",children:(0,a.jsx)("div",{className:"flex flex-col w-full h-full",children:(0,a.jsx)(p.Ay,{ref:k,className:"flex-grow border-t-0",rowHeight:44,headerRowHeight:36,columns:K,rows:(0,eD.uJ)(null!=eZ?eZ:[]),rowClass:e=>{let t=e.id===ed;return["".concat(t?"bg-surface-300 dark:bg-surface-300":"bg-200"," cursor-pointer"),"[&>.rdg-cell]:border-box [&>.rdg-cell]:outline-none [&>.rdg-cell]:shadow-none","[&>.rdg-cell:first-child>div]:ml-4"].join(" ")},rowKeyGetter:e=>e.id,selectedRows:em,onScroll:e=>{let t=U.current!==e.currentTarget.scrollLeft;U.current=e.currentTarget.scrollLeft,!eI&&!eF&&!t&&(0,z.vY)(e)&&eO&&eH()},onSelectedRowsChange:e=>{e.size>eL.GS?(0,f.oR)("Only up to ".concat(eL.GS," users can be selected at a time")):ex(e)},onColumnResize:(e,t)=>eW("resize",{idx:e,width:t}),onColumnsReorder:(e,t)=>{let s=K.findIndex(t=>t.key===e),a=K.findIndex(e=>e.key===t),r=eJ(K,s,a);X(r),eW("reorder",{columns:r})},renderers:{renderRow:(e,t)=>(0,a.jsx)(p.fI,{...t,onClick:()=>{let s=eZ.find(t=>t.id===e);if(s){let e=eZ.indexOf(s);if(t.row.id){var a;eu(t.row.id),null==(a=k.current)||a.scrollToCell({idx:0,rowIdx:e})}}}}),noRowsFallback:eI?(0,a.jsx)("div",{className:"absolute top-14 px-6 w-full",children:(0,a.jsx)(B.y,{})}):ez?(0,a.jsx)("div",{className:"absolute top-14 px-6 flex flex-col items-center justify-center w-full",children:(0,a.jsx)(g.A,{subject:"Failed to retrieve users",error:eM})}):(0,a.jsxs)("div",{className:"absolute top-20 px-6 flex flex-col items-center justify-center w-full gap-y-2",children:[(0,a.jsx)(m.A,{className:"text-foreground-lighter",strokeWidth:1}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-foreground",children:"all"!==ee||es.length>0?"No users found":"No users in your project"}),(0,a.jsx)("p",{className:"text-foreground-light",children:"all"!==ee||es.length>0?"There are currently no users based on the filters applied":"There are currently no users who signed up to your project"})]})]})},"data-sentry-element":"DataGrid","data-sentry-source-file":"UsersV2.tsx"})})}),void 0!==ed&&(0,a.jsx)(eP,{selectedUser:eZ.find(e=>e.id===ed),onClose:()=>eu(void 0)})]}),(0,a.jsxs)("div",{className:"flex justify-between min-h-9 h-9 overflow-hidden items-center px-6 w-full border-t text-xs text-foreground-light",children:[eI||eE?"Loading users...":"Total: ".concat(null!=eV?eV:0," users"),(eI||eE||eF)&&(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{size:14,className:"animate-spin"})," Loading..."]})]})]}),(0,a.jsx)(q.A,{visible:ef,variant:"destructive",title:"Confirm to delete ".concat(em.size," user").concat(em.size>1?"s":""),loading:ej,confirmLabel:"Delete",onCancel:()=>eg(!1),onConfirm:()=>eK(),alert:{title:"Deleting ".concat(1===em.size?"a user":"users"," is irreversible"),description:"This will remove the selected ".concat(1===em.size?"":"".concat(em.size," "),"user").concat(em.size>1?"s":""," from the project and all associated data.")},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"UsersV2.tsx",children:(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:["This is permanent! Are you sure you want to delete the"," ",1===em.size?"":"selected ".concat(em.size," "),"user",em.size>1?"s":"",1===em.size?(0,a.jsxs)("span",{className:"text-foreground",children:[" ",null!=(t=null!=(e=null==e$?void 0:e$.email)?e:null==e$?void 0:e$.phone)?t:"this user"]}):null,"?"]})}),(0,a.jsx)(ev.i,{visible:!!eh,selectedUser:eh,onClose:()=>ep(void 0),onDeleteSuccess:()=>{(null==eh?void 0:eh.id)===ed&&eu(void 0),ep(void 0)},"data-sentry-element":"DeleteUserModal","data-sentry-source-file":"UsersV2.tsx"})]})};var eR=s(91951),eO=s(78311);let eH=()=>(0,a.jsx)(eF,{"data-sentry-element":"UsersV2","data-sentry-component":"UsersPage","data-sentry-source-file":"users.tsx"});eH.getLayout=e=>(0,a.jsx)(eO.A,{children:(0,a.jsx)(eR.A,{children:e})});let eV=eH},92737:(e,t,s)=>{"use strict";s.d(t,{K:()=>f,T:()=>g});var a=s(80263),r=s(53239),n=s(70979),l=s(80127),i=s(35741),o=s(53434),c=s.n(o),d=s(27344),u=s.n(d),m=s(37361),x=s.n(m);c().extend(u()),c().extend(x());let h=e=>c().unix(Number(e)/1e3/1e3).toISOString(),p=e=>{let t=16===String(e).length;return!Number.isNaN(Number(e))&&t},f=e=>{let{utcTimestamp:t,format:s}=e,a=p(t)?h(t):t;return c().utc(a).local().format(s)},y=e=>{let{utcTimestamp:t,format:s}=e,a=p(t)?h(t):t;return c().utc(a).format(s)},v=e=>{let{utcTimestamp:t}=e,s=p(t)?h(t):t;return c().utc(s).fromNow()},g=e=>{let{utcTimestamp:t,className:s,displayAs:o="local",format:c="DD MMM  HH:mm:ss",labelFormat:d="DD MMM HH:mm:ss"}=e,u=f({utcTimestamp:t,format:c}),m=y({utcTimestamp:t,format:c}),x=v({utcTimestamp:t}),[h,p]=(0,r.useState)("start"),g=(0,r.useRef)(null),j=Intl.DateTimeFormat().resolvedOptions().timeZone;(0,r.useEffect)(()=>{let e=()=>{if(g.current){let e=g.current.getBoundingClientRect(),t=window.innerHeight;p(e.top<t/2?"start":"end")}};return e(),window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[]);let w=e=>{let{label:t,value:s}=e,[i,o]=(0,r.useState)(!1);return(0,a.jsxs)("div",{onPointerDown:e=>{e.stopPropagation()},onMouseDown:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),e.preventDefault(),(0,n.l)(s,()=>{o(!0),setTimeout(()=>{o(!1)},1e3)})},className:(0,l.cn)("relative cursor-pointer flex gap-y-2 gap-x-0.5 hover:bg-surface-100 px-2 py-1 group",{"bg-surface-100":i}),"data-sentry-component":"TooltipRow","data-sentry-source-file":"index.tsx",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2 text-left truncate",children:[(0,a.jsx)("p",{children:t}),(0,a.jsx)("div",{className:"border-t w-full border-dashed"})]}),(0,a.jsxs)("div",{className:"relative flex items-center gap-x-2 flex-grow",children:[(0,a.jsx)("div",{className:"border-t w-full border-dashed z-10"}),i&&(0,a.jsx)("span",{className:"flex items-center justify-end w-full absolute inset-0 flex items-right text-brand-600 bg-surface-100",children:"Copied!"}),(0,a.jsx)("span",{className:"flex items-center gap-x-2 justify-end whitespace-nowrap",children:s})]})]})};return(0,a.jsxs)(i.m_,{"data-sentry-element":"Tooltip","data-sentry-component":"TimestampInfo","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(i.k$,{asChild:!0,ref:g,className:"text-xs ".concat(s," border-b border-transparent hover:border-dashed hover:border-foreground-light"),"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"index.tsx",children:(0,a.jsx)("span",{children:"local"===o?f({utcTimestamp:t,format:d}):y({utcTimestamp:t,format:d})})}),(0,a.jsxs)(i.ZI,{align:h,side:"right",className:"font-mono p-0 py-1 min-w-80","data-sentry-element":"TooltipContent","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(w,{label:"UTC",value:m,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(w,{label:j,value:u,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(w,{label:"Relative",value:x,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(w,{label:"Timestamp",value:String(t),"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"})]})]})}},95280:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(81915).A)("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]])},95536:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(81915).A)("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]])},98615:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>x});var a=s(80263),r=s(53239),n=s(92413),l=s(80127),i=s(41807);function o(e){let{children:t,className:s,tag:r="div",style:n}=e;return(0,a.jsx)("".concat(r),{style:n,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}o.Title=function(e){let{className:t,level:s=1,children:r,style:n}=e;return(0,a.jsx)("h".concat(s),{style:n,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:r})},o.Text=function(e){let{className:t,children:s,style:r,type:n,disabled:l,mark:i,code:o,keyboard:c,underline:d,strikethrough:u,strong:m,small:x}=e;return o?(0,a.jsx)("code",{style:r,children:s}):i?(0,a.jsx)("mark",{style:r,children:s}):c?(0,a.jsx)("kbd",{style:r,children:s}):m?(0,a.jsx)("strong",{style:r,children:s}):(0,a.jsx)("span",{style:r,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:s})},o.Link=i.A;let c=(0,r.createContext)({type:"text"}),d=e=>{let{type:t}=e;return(0,a.jsx)(c.Provider,{value:{type:t},"data-sentry-element":"MenuContext.Provider","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},u=()=>{let e=(0,r.useContext)(c);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function m(e){let{children:t,className:s,ulClassName:r,style:n,type:l="text"}=e;return(0,a.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:s,style:n,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)(d,{type:l,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)("ul",{className:r,children:t})})})}m.Item=function(e){let{children:t,icon:s,active:r,rounded:i,onClick:o,doNotCloseOverlay:c=!1,showActiveBar:d=!1,style:m}=e,x=(0,n.A)("menu"),{type:h}=u(),p=[x.item.base];p.push(x.item.variants[h].base),r?p.push(x.item.variants[h].active):p.push(x.item.variants[h].normal);let f=[x.item.content.base];r?f.push(x.item.content.active):f.push(x.item.content.normal);let y=[x.item.icon.base];return r?y.push(x.item.icon.active):y.push(x.item.icon.normal),(0,a.jsxs)("li",{role:"menuitem",className:(0,l.cn)("outline-none",p),style:m,onClick:o,"aria-current":r?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[s&&(0,a.jsx)("div",{className:"".concat(y.join(" ")," min-w-fit"),children:s}),(0,a.jsx)("span",{className:f.join(" "),children:t})]})},m.Group=function(e){let{children:t,icon:s,title:r}=e,l=(0,n.A)("menu"),{type:i}=u();return(0,a.jsxs)("div",{className:[l.group.base,l.group.variants[i]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[s&&(0,a.jsx)("span",{className:l.group.icon,children:s}),(0,a.jsx)("span",{className:l.group.content,children:r}),t]})},m.Misc=function(e){let{children:t}=e;return(0,a.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)(o.Text,{"data-sentry-element":"Typography.Text","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)("span",{children:t})})})};let x=m}},e=>{var t=t=>e(e.s=t);e.O(0,[89,2313,673,7494,726,5476,4915,7074,4560,2735,8444,6110,3895,1168,7795,9587,5348,5175,4654,3258,3923,3013,9147,3144,1830,4844,6692,4352,304,6416,8311,1041,5983,3444,3792,6482,636,6593,8792],()=>t(30237)),_N_E=e.O()}]);