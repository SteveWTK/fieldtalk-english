try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="db34fa26-73ca-4c59-b3be-2a8f99c177b5",e._sentryDebugIdIdentifier="sentry-dbid-db34fa26-73ca-4c59-b3be-2a8f99c177b5")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2333],{2333:(e,t,s)=>{s.d(t,{je:()=>F,jj:()=>ei,Ii:()=>eF,I9:()=>e6,ZN:()=>tb,It:()=>sn,mr:()=>eV,_U:()=>sK});var a=s(80263),r=s(60045),n=s(46491),i=s(53434),l=s.n(i),o=s(3049),d=s(93569),c=s(50336),u=s(51502),m=s(25476),p=s.n(m),x=s(93749),h=s.n(x),g=s(53239),y=s(15530),f=s(95142),j=s(58633),b=s(92589),v=s(84558),S=s(72666),A=s(66933),_=s(14132),N=s(8841),C=s(56947),w=s(70938),E=s(6042);async function R(e,t){let{slug:s,iso_timestamp_start:a,iso_timestamp_end:r}=e;if(!s)throw Error("slug is required");let{data:n,error:i}=await (0,w.Jt)("/platform/organizations/{slug}/audit",{params:{path:{slug:s},query:{iso_timestamp_start:a,iso_timestamp_end:r}},signal:t});return i&&(0,w.H4)(i),n}let T=function(e){let{enabled:t=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{slug:a,iso_timestamp_start:r,iso_timestamp_end:n}=e;return(0,C.I)(E.O.auditLogs(a,{date_start:r,date_end:n}),t=>{let{signal:s}=t;return R(e,s)},{enabled:t&&void 0!==a,...s})};var I=s(26858),k=s(87283),O=s(61789),D=s(75831),P=s(22554),M=s(38112),z=s(68506),L=s(70603);let F=()=>{var e,t,s,i,m,x,C,w;let{slug:E}=(0,n.g)(),R=l()().utc().set("millisecond",0),[F,U]=(0,g.useState)(!0),[G,H]=(0,g.useState)({from:R.subtract(1,"day").toISOString(),to:R.toISOString()}),[B,q]=(0,g.useState)(),[Y,W]=(0,g.useState)({users:[],projects:[]}),V=(0,D.SE)(r.aG.READ,"notifications"),{data:Z}=(0,O.el)(),{data:$}=(0,k.Ad)(),{data:J}=(0,I.Q)({slug:E}),{data:K}=(0,N.KQ)({slug:E}),{data:X,error:Q,isLoading:ee,isSuccess:et,isError:es,isRefetching:ea,refetch:er}=T({slug:E,iso_timestamp_start:G.from,iso_timestamp_end:G.to},{enabled:V,retry:!1}),en=(null!=J?J:[]).filter(e=>!e.invited_at),ei=[...null!=(s=null==K?void 0:K.org_scoped_roles)?s:[],...null!=(i=null==K?void 0:K.project_scoped_roles)?i:[]],el=null!=(m=null==X?void 0:X.retention_period)?m:0,eo=null!=(x=null==X?void 0:X.result)?x:[],ed=null==eo||null==(t=eo.sort((e,t)=>F?Number(new Date(t.occurred_at))-Number(new Date(e.occurred_at)):Number(new Date(e.occurred_at))-Number(new Date(t.occurred_at))))||null==(e=t.filter(e=>Y.users.length>0?Y.users.includes(e.actor.id):e))?void 0:e.filter(e=>Y.projects.length>0?Y.projects.includes(e.target.metadata.project_ref||""):e),ec=null==$?void 0:$.find(e=>e.slug===E);return(l()().subtract(el,"days"),l()(),(0,g.useEffect)(()=>{let e=l()(G.from).diff(l()(G.to)),t=setInterval(()=>{let t=l()().utc().set("millisecond",0);H({from:t.add(e).toISOString(),to:t.toISOString()})},3e5);return()=>clearInterval(t)},[G.from,G.to]),V)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Vw,{"data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"AuditLogs.tsx",children:(0,a.jsxs)("div",{className:"space-y-4 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-xs prose",children:"Filter by"}),(0,a.jsx)(S.I,{name:"Users",options:en,labelKey:"username",valueKey:"gotrue_id",activeOptions:Y.users,onSaveFilters:e=>W({...Y,users:e}),"data-sentry-element":"FilterPopover","data-sentry-source-file":"AuditLogs.tsx"}),(0,a.jsx)(S.I,{name:"Projects",options:null!=(C=null==Z?void 0:Z.filter(e=>e.organization_id===(null==ec?void 0:ec.id)))?C:[],labelKey:"name",valueKey:"ref",activeOptions:Y.projects,onSaveFilters:e=>W({...Y,projects:e}),"data-sentry-element":"FilterPopover","data-sentry-source-file":"AuditLogs.tsx"}),(0,a.jsx)(L.O,{hideWarnings:!0,value:G,onSubmit:e=>H(e),helpers:[{text:"Last 1 hour",calcFrom:()=>l()().subtract(1,"hour").toISOString(),calcTo:()=>l()().toISOString()},{text:"Last 3 hours",calcFrom:()=>l()().subtract(3,"hour").toISOString(),calcTo:()=>l()().toISOString()},{text:"Last 6 hours",calcFrom:()=>l()().subtract(6,"hour").toISOString(),calcTo:()=>l()().toISOString()},{text:"Last 12 hours",calcFrom:()=>l()().subtract(12,"hour").toISOString(),calcTo:()=>l()().toISOString()},{text:"Last 24 hours",calcFrom:()=>l()().subtract(1,"day").toISOString(),calcTo:()=>l()().toISOString()}],"data-sentry-element":"LogsDatePicker","data-sentry-source-file":"AuditLogs.tsx"}),et&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-[20px] border-r border-strong !ml-4 !mr-2"}),(0,a.jsxs)("p",{className:"prose text-xs",children:["Viewing ",ed.length," logs in total"]})]})]}),(0,a.jsx)(P.$,{type:"default",disabled:ee||ea,icon:(0,a.jsx)(o.A,{className:ea?"animate-spin":""}),onClick:()=>er(),"data-sentry-element":"Button","data-sentry-source-file":"AuditLogs.tsx",children:ea?"Refreshing":"Refresh"})]}),ee&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(_.A,{}),(0,a.jsx)(_.A,{className:"w-3/4"}),(0,a.jsx)(_.A,{className:"w-1/2"})]}),es?Q.message.endsWith("upgrade to Team or Enterprise Plan to access audit logs.")?(0,a.jsxs)(M.Fc,{variant:"default",title:"Organization Audit Logs are not available on Free or Pro plans",children:[(0,a.jsx)(z.id,{}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row pt-1 gap-4",children:[(0,a.jsxs)("div",{className:"grow",children:[(0,a.jsx)(M.XL,{children:"Organization Audit Logs are not available on Free or Pro plans"}),(0,a.jsx)(M.TN,{className:"flex flex-row justify-between gap-3",children:(0,a.jsx)("p",{children:"Upgrade to Team or Enterprise to view up to 28 days of Audit Logs for your organization."})})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(P.$,{type:"primary",asChild:!0,children:(0,a.jsx)(h(),{href:"/org/".concat(E,"/billing?panel=subscriptionPlan&source=auditLogs"),children:"Upgrade subscription"})})})]})]}):Q.message.includes("range exceeded")?(0,a.jsxs)(M.Fc,{variant:"destructive",title:"Date range too large",children:[(0,a.jsx)(z.id,{}),(0,a.jsx)(M.XL,{children:"Date range too large"}),(0,a.jsx)(M.TN,{children:"The selected date range exceeds the maximum allowed period. Please select a smaller time range."})]}):(0,a.jsx)(b.A,{error:Q,subject:"Failed to retrieve audit logs"}):null,et&&(0,a.jsx)(a.Fragment,{children:0===eo.length?(0,a.jsx)("div",{className:"bg-surface-100 border rounded p-4 flex items-center justify-between",children:(0,a.jsx)("p",{className:"prose text-sm",children:"Your organization does not have any audit logs available yet"})}):eo.length>0&&0===ed.length?(0,a.jsx)("div",{className:"bg-surface-100 border rounded p-4 flex items-center justify-between",children:(0,a.jsx)("p",{className:"prose text-sm",children:"No audit logs found based on the filters applied"})}):(0,a.jsx)(j.A,{head:[(0,a.jsx)(j.A.th,{className:"py-2",children:"User"},"user"),(0,a.jsx)(j.A.th,{className:"py-2",children:"Action"},"action"),(0,a.jsx)(j.A.th,{className:"py-2",children:"Target"},"target"),(0,a.jsx)(j.A.th,{className:"py-2",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{children:"Date"}),(0,a.jsx)(v.G,{type:"text",className:"px-1",icon:F?(0,a.jsx)(d.A,{strokeWidth:1.5,size:14}):(0,a.jsx)(c.A,{strokeWidth:1.5,size:14}),onClick:()=>U(!F),tooltip:{content:{side:"bottom",text:F?"Sort latest first":"Sort earliest first"}}})]})},"date"),(0,a.jsx)(j.A.th,{className:"py-2"},"actions")],body:null!=(w=null==ed?void 0:ed.map(e=>{var t,s,r,n,i,o,d,c,m;let x=(null!=J?J:[]).find(t=>t.gotrue_id===e.actor.id),h=ei.find(e=>{var t;return(null==x||null==(t=x.role_ids)?void 0:t[0])===e.id}),g=null==Z?void 0:Z.find(t=>t.ref===e.target.metadata.project_ref),y=null==$?void 0:$.find(t=>t.slug===e.target.metadata.org_slug),f=(null==(t=e.action.metadata[0])?void 0:t.status)!==void 0,b=void 0===x?(0,a.jsx)("div",{className:"flex h-[30px] w-[30px] items-center justify-center border-2 rounded-full border-strong",children:(0,a.jsx)("p",{children:"?"})}):(null==x?void 0:x.invited_id)||(null==x?void 0:x.username)===(null==x?void 0:x.primary_email)?(0,a.jsx)("div",{className:"flex h-[30px] w-[30px] items-center justify-center border-2 rounded-full border-strong",children:(0,a.jsx)(u.A,{size:18,strokeWidth:2})}):(0,a.jsx)(p(),{alt:null==x?void 0:x.username,src:"https://github.com/".concat(null!=(s=null==x?void 0:x.username)?s:"",".png?size=80"),width:"30",height:"30",className:"border rounded-full"});return(0,a.jsxs)(j.A.tr,{onClick:()=>q(e),className:"cursor-pointer hover:!bg-alternative transition duration-100",children:[(0,a.jsx)(j.A.td,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{children:b}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-foreground-light",children:null!=(r=null==x?void 0:x.username)?r:"-"}),h&&(0,a.jsx)("p",{className:"mt-0.5 text-xs text-foreground-light",children:null==h?void 0:h.name})]})]})}),(0,a.jsx)(j.A.td,{className:"max-w-[250px]",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[f&&(0,a.jsx)("p",{className:"bg-surface-200 rounded px-1 flex items-center justify-center text-xs font-mono border",children:e.action.metadata[0].status}),(0,a.jsx)("p",{className:"truncate",title:e.action.name,children:e.action.name})]})}),(0,a.jsxs)(j.A.td,{children:[(0,a.jsxs)("p",{className:"text-foreground-light max-w-[230px] truncate",title:null!=(i=null!=(n=null==g?void 0:g.name)?n:null==y?void 0:y.name)?i:"-",children:[(null==g?void 0:g.name)?"Project: ":(null==y?void 0:y.name)?"Organization: ":null,null!=(d=null!=(o=null==g?void 0:g.name)?o:null==y?void 0:y.name)?d:"Unknown"]}),(0,a.jsxs)("p",{className:"text-foreground-light text-xs mt-0.5 truncate",title:null!=(c=e.target.metadata.project_ref)?c:e.target.metadata.org_slug,children:[e.target.metadata.project_ref?"Ref: ":e.target.metadata.org_slug?"Slug: ":null,null!=(m=e.target.metadata.project_ref)?m:e.target.metadata.org_slug]})]}),(0,a.jsx)(j.A.td,{children:l()(e.occurred_at).format("DD MMM YYYY, HH:mm:ss")}),(0,a.jsx)(j.A.td,{align:"right",children:(0,a.jsx)(P.$,{type:"default",children:"View details"})})]},e.occurred_at)}))?w:[]})})]})}),(0,a.jsx)(y.f,{selectedLog:B,onClose:()=>q(void 0),"data-sentry-element":"LogDetailsPanel","data-sentry-source-file":"AuditLogs.tsx"})]}):(0,a.jsx)(f.Vw,{children:(0,a.jsx)(A.A,{resourceText:"view organization audit logs"})})};var U=s(64112),G=s(63121);let H=e=>{let{doc:t}=e;return(0,a.jsx)(f.eh,{id:t.id,"data-sentry-element":"ScaffoldContainer","data-sentry-component":"CustomDocument","data-sentry-source-file":"CustomDocument.tsx",children:(0,a.jsxs)(f.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"CustomDocument.tsx",children:[(0,a.jsxs)(f.xp,{className:"sticky top-12 flex flex-col gap-y-8","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"CustomDocument.tsx",children:[(0,a.jsx)("p",{className:"text-base m-0",children:t.name}),(0,a.jsx)("p",{className:"text-sm text-foreground-light m-0",children:t.description})]}),(0,a.jsx)(f.Rf,{className:"flex items-center justify-center h-full","data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"CustomDocument.tsx",children:(0,a.jsx)(P.$,{asChild:!0,type:"default",iconRight:(0,a.jsx)(G.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"CustomDocument.tsx",children:(0,a.jsx)("a",{download:!0,href:t.action.url,target:"_blank",rel:"noreferrer noopener",children:t.action.text})})})]})})};var B=s(73969),q=s(89422),Y=s(80251);async function W(e){let{recipient_email:t,slug:s}=e,{data:a,error:r}=await (0,w.bE)("/platform/organizations/".concat(s,"/documents/dpa"),{body:{recipient_email:t}});return r&&(0,w.H4)(r),a}let V=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,Y.n)(e=>W(e),{async onSuccess(t,s,a){await (null==e?void 0:e(t,s,a))},async onError(e,s,a){void 0===t?B.oR.error("Failed to request DPA: ".concat(e.message)):t(e,s,a)},...s})};var Z=s(86992),$=s(52445),J=s(67285),K=s(2772);let X=()=>{var e;let{profile:t}=(0,J.xc)(),{data:s}=(0,$.s)(),r=null==s?void 0:s.slug,[n,i]=(0,g.useState)(!1),{mutate:l}=(0,Z.h)(),{mutate:o,isLoading:d}=V({onSuccess:()=>{B.oR.success("DPA request sent successfully"),i(!1)}}),c=async()=>r?(null==t?void 0:t.primary_email)?void o({recipient_email:null==t?void 0:t.primary_email,slug:r}):B.oR.error("Profile email not found."):B.oR.error("Organization not found.");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(f.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"DPA.tsx",children:[(0,a.jsxs)(f.xp,{className:"sticky space-y-6 top-12","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"DPA.tsx",children:[(0,a.jsx)("p",{className:"text-base m-0",children:"Data Processing Addendum (DPA)"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-foreground-light m-0",children:[(0,a.jsx)("p",{children:'All organizations can sign our Data Processing Addendum ("DPA") as part of their GDPR compliance.'}),(0,a.jsxs)("p",{children:["You can review a static PDF version of our latest DPA document"," ",(0,a.jsx)(q.g,{href:"https://supabase.com/downloads/docs/Supabase+DPA+250805.pdf",onClick:()=>l({action:"dpa_pdf_opened",properties:{source:"studio"}}),"data-sentry-element":"InlineLink","data-sentry-source-file":"DPA.tsx",children:"here"}),"."]})]})]}),(0,a.jsx)(f.Rf,{className:"flex items-center justify-center h-full","data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"DPA.tsx",children:(0,a.jsx)(P.$,{onClick:()=>{i(!0),l({action:"dpa_request_button_clicked"})},type:"default","data-sentry-element":"Button","data-sentry-source-file":"DPA.tsx",children:"Request DPA"})})]}),(0,a.jsx)(K.A,{visible:n,title:"Request executable DPA to sign",loading:d,confirmPlaceholder:"Enter your email address",confirmString:null!=(e=null==t?void 0:t.primary_email)?e:"",confirmLabel:"Send DPA request",errorMessage:"Email must match your account email.",onCancel:()=>i(!1),onConfirm:()=>c(),"data-sentry-element":"TextConfirmModal","data-sentry-source-file":"DPA.tsx",children:(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsx)("p",{children:"To make the DPA legally binding, you need to sign and complete the details through a PandaDoc document that we prepare."}),(0,a.jsx)("p",{children:"Please enter your email address to request an executable version of the DPA. You will receive a document link via PandaDoc in the next 24 hours."}),(0,a.jsx)("p",{children:"Once signed, the DPA will be considered executed and you'll be notified of any future updates via this email."})]})})]})},Q=()=>{let{data:e}=(0,$.s)(),{mutate:t}=(0,Z.h)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(f.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"HIPAA.tsx",children:[(0,a.jsxs)(f.xp,{className:"sticky space-y-6 top-12","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"HIPAA.tsx",children:[(0,a.jsx)("p",{className:"text-base m-0",children:"HIPAA"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-foreground-light m-0",children:[(0,a.jsx)("p",{children:"This is only for HIPAA requests. Please ignore this if you already have HIPAA enabled."}),(0,a.jsx)("p",{children:"Organizations on the Team Plan or above are eligible for a paid HIPAA compliance add-on. You can submit a request here and we will get back to you on the pricing and process for your use case."}),(0,a.jsx)("p",{children:"Organizations on the Free or Pro Plan can also submit a request for HIPAA. Note that you are still required to upgrade to the Team Plan after your request is approved."})]})]}),(0,a.jsx)(f.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"HIPAA.tsx",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)(P.$,{asChild:!0,type:"default",iconRight:(0,a.jsx)(G.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"HIPAA.tsx",children:(0,a.jsx)("a",{href:"https://forms.supabase.com/hipaa2",target:"_blank",rel:"noreferrer noopener",onClick:()=>{var s;return t({action:"hipaa_request_button_clicked",groups:{organization:null!=(s=null==e?void 0:e.slug)?s:"Unknown"}})},children:"Request HIPAA"})})})})]})})};var ee=s(35485);async function et(e,t){let{orgSlug:s,docType:a}=e;if(!s)throw Error("orgSlug is required");if("standard-security-questionnaire"===a){let{data:e,error:a}=await (0,w.Jt)("/platform/organizations/{slug}/documents/standard-security-questionnaire",{params:{path:{slug:s}},signal:t});return a&&(0,w.H4)(a),e}if("soc2-type-2-report"===a){let{data:e,error:a}=await (0,w.Jt)("/platform/organizations/{slug}/documents/soc2-type-2-report",{params:{path:{slug:s}},signal:t});if(a)throw a;return e}}let es=()=>{let{data:e}=(0,$.s)(),t=null==e?void 0:e.slug,{mutate:s}=(0,Z.h)(),n=(0,D.SE)(r.aG.BILLING_READ,"stripe.subscriptions"),i=null==e?void 0:e.plan,l=async e=>{try{let t=await et({orgSlug:e,docType:"standard-security-questionnaire"});(null==t?void 0:t.fileUrl)&&window.open(t.fileUrl,"_blank")}catch(e){B.oR.error("Failed to download Security Questionnaire: ".concat(e.message))}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(f.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"SecurityQuestionnaire.tsx",children:[(0,a.jsxs)(f.xp,{className:"sticky space-y-6 top-12","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"SecurityQuestionnaire.tsx",children:[(0,a.jsx)("p",{className:"text-base m-0",children:"Standard Security Questionnaire"}),(0,a.jsx)("div",{className:"space-y-2 text-sm text-foreground-light m-0",children:(0,a.jsx)("p",{children:"Organizations on Team Plan or above have access to our standard security questionnaire."})})]}),(0,a.jsx)(f.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"SecurityQuestionnaire.tsx",children:n?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(null==i?void 0:i.id)==="free"||(null==i?void 0:i.id)==="pro"?(0,a.jsx)(h(),{href:"/org/".concat(t,"/billing?panel=subscriptionPlan&source=securityQuestionnaire"),children:(0,a.jsx)(P.$,{type:"default",children:"Upgrade to Team"})}):(0,a.jsx)(P.$,{type:"default",icon:(0,a.jsx)(ee.A,{}),onClick:()=>{var a;s({action:"document_view_button_clicked",properties:{documentName:"Standard Security Questionnaire"},groups:{organization:null!=(a=null==e?void 0:e.slug)?a:"Unknown"}}),t&&l(t)},children:"Download Questionnaire"})})}):(0,a.jsx)(A.A,{resourceText:"access our security questionnaire"})})]})})};var ea=s(86336);let er=()=>{let{data:e}=(0,$.s)(),t=null==e?void 0:e.slug,{mutate:s}=(0,Z.h)(),n=(0,D.SE)(r.aG.BILLING_READ,"stripe.subscriptions"),i=null==e?void 0:e.plan,[l,o]=(0,g.useState)(!1),d=async e=>{try{let t=await et({orgSlug:e,docType:"soc2-type-2-report"});(null==t?void 0:t.fileUrl)&&window.open(t.fileUrl,"_blank"),o(!1)}catch(e){B.oR.error("Failed to download SOC2 report: ".concat(e.message))}};return(0,a.jsxs)(f.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"SOC2","data-sentry-source-file":"SOC2.tsx",children:[(0,a.jsxs)(f.xp,{className:"sticky space-y-6 top-12","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"SOC2.tsx",children:[(0,a.jsx)("p",{className:"text-base m-0",children:"SOC2 Type 2"}),(0,a.jsx)("div",{className:"space-y-2 text-sm text-foreground-light m-0",children:(0,a.jsx)("p",{children:"Organizations on Team Plan or above have access to our most recent SOC2 Type 2 report."})})]}),(0,a.jsxs)(f.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"SOC2.tsx",children:[n?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(null==i?void 0:i.id)==="free"||(null==i?void 0:i.id)==="pro"?(0,a.jsx)(h(),{href:"/org/".concat(t,"/billing?panel=subscriptionPlan&source=soc2"),children:(0,a.jsx)(P.$,{type:"default",children:"Upgrade to Team"})}):(0,a.jsx)(P.$,{type:"default",icon:(0,a.jsx)(ee.A,{}),onClick:()=>{var t;s({action:"document_view_button_clicked",properties:{documentName:"SOC2"},groups:{organization:null!=(t=null==e?void 0:e.slug)?t:"Unknown"}}),o(!0)},children:"Download SOC2 Type 2 Report"})}):(0,a.jsx)(A.A,{resourceText:"access our SOC2 Type 2 report"}),(0,a.jsx)(ea.A,{visible:l,size:"large",title:"Non-Disclosure Agreement to access Supabase's SOC2 Report",confirmLabel:"I agree",confirmLabelLoading:"Downloading",onCancel:()=>o(!1),onConfirm:()=>{t&&d(t)},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"SOC2.tsx",children:(0,a.jsxs)("ol",{className:"list-decimal list-inside text-sm text-foreground-light pl-30",children:[(0,a.jsx)("li",{children:"The information that you are about to access is confidential."}),(0,a.jsx)("li",{children:'Your access to our SOC 2 materials is governed by confidentiality obligations contained in the agreement between Supabase, Inc ("Supabase", "we", "our" or "us") and the Supabase customer that has authorized you to access our platform to obtain this information (our "Customer").'}),(0,a.jsx)("li",{children:"You must ensure that you treat the information in our SOC 2 materials in accordance with those confidentiality obligations, as communicated to you by the Customer."}),(0,a.jsxs)("li",{children:['By clicking "I agree" below or otherwise accessing our SOC 2 materials, you:',(0,a.jsxs)("ol",{className:"list-[lower-roman] list-inside pl-4",children:[(0,a.jsx)("li",{children:"acknowledge that you have read and understood this Confidentiality Notice;"}),(0,a.jsx)("li",{children:"confirm that you have been authorized by the Customer to access this information, and your use of our SOC 2 materials is subject to the confidentiality obligations owed by the Customer to us."})]})]}),(0,a.jsx)("li",{children:"This Confidentiality Notice does not substitute or supersede any agreement between us and the Customer, or any internal rules or policies that the Customer requires you to comply with in your access to and use of confidential information. However, your failure to comply with this Confidentiality Notice may be used to determine whether the Customer has complied with its confidentiality obligations to us."})]})})]})]})},en=()=>{let{data:e}=(0,$.s)(),{mutate:t}=(0,Z.h)();return(0,a.jsxs)(f.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"TIA","data-sentry-source-file":"TIA.tsx",children:[(0,a.jsxs)(f.xp,{className:"sticky space-y-6 top-12","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"TIA.tsx",children:[(0,a.jsx)("p",{className:"text-base m-0",children:"Transfer Impact Assessment (TIA)"}),(0,a.jsx)("div",{className:"space-y-2 text-sm text-foreground-light m-0",children:(0,a.jsx)("p",{children:"All organizations can access and use our TIA as part of their GDPR-compliant data transfer process."})})]}),(0,a.jsx)(f.Rf,{className:"flex items-center justify-center h-full","data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"TIA.tsx",children:(0,a.jsx)(P.$,{asChild:!0,type:"default",iconRight:(0,a.jsx)(G.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"TIA.tsx",children:(0,a.jsx)("a",{href:"https://supabase.com/downloads/docs/Supabase+TIA+250314.pdf",target:"_blank",rel:"noreferrer noopener",download:!0,onClick:()=>{var s;return t({action:"document_view_button_clicked",properties:{documentName:"TIA"},groups:{organization:null!=(s=null==e?void 0:e.slug)?s:"Unknown"}})},children:"View TIA"})})})]})},ei=()=>{let{organizationLegalDocuments:e}=(0,U.g)(["organization:legal_documents"]);return Array.isArray(e)?e.map((t,s)=>(0,a.jsxs)(g.Fragment,{children:[(0,a.jsx)(H,{doc:t}),s!==e.length-1&&(0,a.jsx)(f.cJ,{})]},t.id)):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.eh,{id:"dpa","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Documents.tsx",children:(0,a.jsx)(X,{"data-sentry-element":"DPA","data-sentry-source-file":"Documents.tsx"})}),(0,a.jsx)(f.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"Documents.tsx"}),(0,a.jsx)(f.eh,{id:"tia","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Documents.tsx",children:(0,a.jsx)(en,{"data-sentry-element":"TIA","data-sentry-source-file":"Documents.tsx"})}),(0,a.jsx)(f.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"Documents.tsx"}),(0,a.jsx)(f.eh,{id:"soc2","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Documents.tsx",children:(0,a.jsx)(er,{"data-sentry-element":"SOC2","data-sentry-source-file":"Documents.tsx"})}),(0,a.jsx)(f.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"Documents.tsx"}),(0,a.jsx)(f.eh,{id:"hipaa","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Documents.tsx",children:(0,a.jsx)(Q,{"data-sentry-element":"HIPAA","data-sentry-source-file":"Documents.tsx"})}),(0,a.jsx)(f.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"Documents.tsx"}),(0,a.jsx)(f.eh,{id:"security-questionnaire","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Documents.tsx",children:(0,a.jsx)(es,{"data-sentry-element":"SecurityQuestionnaire","data-sentry-source-file":"Documents.tsx"})}),(0,a.jsx)(f.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"Documents.tsx"}),(0,a.jsx)(f.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Documents.tsx",children:(0,a.jsx)(f.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"Documents.tsx",children:(0,a.jsxs)("p",{className:"sticky space-y-6 top-12 text-sm text-foreground-light m-0 whitespace-nowrap",children:[(0,a.jsx)(h(),{href:"/support/new",className:"hover:underline","data-sentry-element":"Link","data-sentry-source-file":"Documents.tsx",children:"Submit a support request"})," ","if you require additional documents for financial or tax reasons, such as a W-9 form."]})})})]})};var el=s(50922);let eo=e=>{var t;let{organization:s}=e,{data:r}=(0,O.el)({});return(null!=(t=null==r?void 0:r.filter(e=>e.organization_id===(null==s?void 0:s.id)).length)?t:0)>0||(null==s?void 0:s.plan)===void 0||"free"===s.plan.id||"enterprise"===s.plan.id?null:(0,a.jsx)(el.Z,{type:"default",title:"Your organization is on the ".concat(s.plan.name," plan with no projects running"),description:(0,a.jsxs)("div",{className:"!max-w-full prose text-sm",children:["The monthly fees for the paid plan still apply. To cancel your subscription, head over to your"," ",(0,a.jsx)(h(),{href:"/org/".concat(null==s?void 0:s.slug,"/billing"),children:"organization billing settings"})]}),"data-sentry-element":"Admonition","data-sentry-component":"NoProjectsOnPaidOrgInfo","data-sentry-source-file":"NoProjectsOnPaidOrgInfo.tsx"})};var ed=s(64084),ec=s(8572),eu=s(67908),em=s(32144),ep=s(1594);async function ex(e){let{slug:t}=e,{data:s,error:a}=await (0,w.yH)("/platform/organizations/{slug}",{params:{path:{slug:t}}});return a&&(0,w.H4)(a),s}let eh=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,em.jE)();return(0,Y.n)(e=>ex(e),{async onSuccess(t,s,r){await Promise.all([a.invalidateQueries(E.O.list()),a.invalidateQueries(ep.Q.list())]),await (null==e?void 0:e(t,s,r))},async onError(e,s,a){void 0===t?B.oR.error("Failed to delete organization: ".concat(e.message)):t(e,s,a)},...s})};var eg=s(59347),ey=s(33924),ef=s(91982),ej=s(48192);let eb=()=>{let e=(0,eu.useRouter)(),{data:t}=(0,$.s)(),{slug:s,name:i}=null!=t?t:{},[l,o]=(0,g.useState)(!1),[d,c]=(0,g.useState)(""),[u,m]=(0,eg.U)(n.rS.LAST_VISITED_ORGANIZATION,""),p=(0,D.SE)(r.aG.UPDATE,"organizations"),{mutate:x,isLoading:h}=eh({onSuccess:()=>{B.oR.success("Successfully deleted ".concat(i)),m(""),e.push("/organizations")}}),y=async e=>p?s?void x({slug:s}):console.error("Org slug is required"):B.oR.error("You do not have the required permissions to delete this organization");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(P.$,{loading:!s,onClick:()=>o(!0),type:"danger","data-sentry-element":"Button","data-sentry-source-file":"DeleteOrganizationButton.tsx",children:"Delete organization"})}),(0,a.jsx)(ey.A,{hideFooter:!0,size:"small",visible:l,onCancel:()=>o(!1),header:(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsx)("span",{children:"Delete organization"}),(0,a.jsx)("span",{className:"text-xs text-foreground-lighter",children:"Are you sure?"})]}),"data-sentry-element":"Modal","data-sentry-source-file":"DeleteOrganizationButton.tsx",children:(0,a.jsx)(ef.A,{validateOnBlur:!0,initialValues:{orgName:""},onSubmit:y,validate:e=>{let t={};return e.orgName||(t.orgName="Enter the name of the organization."),e.orgName.trim()!==(null==s?void 0:s.trim())&&(t.orgName="Value entered does not match the value above."),t},"data-sentry-element":"Form","data-sentry-source-file":"DeleteOrganizationButton.tsx",children:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ey.A.Content,{children:(0,a.jsxs)("p",{className:"text-sm text-foreground-lighter",children:["This action ",(0,a.jsx)("span",{className:"text-foreground",children:"cannot"})," be undone. This will permanently delete the ",(0,a.jsx)("span",{className:"text-foreground",children:i})," ","organization and remove all of its projects."]})}),(0,a.jsx)(ey.A.Separator,{}),(0,a.jsx)(ey.A.Content,{children:(0,a.jsx)(ej.A,{id:"orgName",label:(0,a.jsxs)("span",{children:["Please type ",(0,a.jsx)("span",{className:"font-bold",children:s})," to confirm"]}),onChange:e=>c(e.target.value),value:d,placeholder:"Enter the string above",className:"w-full"})}),(0,a.jsx)(ey.A.Separator,{}),(0,a.jsx)(ey.A.Content,{children:(0,a.jsx)(P.$,{block:!0,size:"small",type:"danger",htmlType:"submit",loading:h,disabled:h,children:"I understand, delete this organization"})})]})})})]})};var ev=s(23035);let eS=()=>{let{data:e}=(0,$.s)();return(0,a.jsxs)(f.gu,{isFullWidth:!0,"data-sentry-element":"ScaffoldSection","data-sentry-component":"OrganizationDeletePanel","data-sentry-source-file":"OrganizationDeletePanel.tsx",children:[(0,a.jsx)(f.sZ,{className:"mb-4","data-sentry-element":"ScaffoldSectionTitle","data-sentry-source-file":"OrganizationDeletePanel.tsx",children:"Danger Zone"}),(null==e?void 0:e.managed_by)!=="vercel-marketplace"?(0,a.jsx)(el.Z,{type:"destructive",title:"Deleting this organization will also remove its projects",description:"Make sure you have made a backup of your projects if you want to keep your data",children:(0,a.jsx)(eb,{})}):(0,a.jsx)(ec.A,{managedBy:ev.Kf.VERCEL_MARKETPLACE,resource:"Organizations",cta:{installationId:null==e?void 0:e.partner_id,path:"/settings",message:"Delete organization in Vercel Marketplace"}})]})};var eA=s(24600),e_=s(42440),eN=s(20704),eC=s(36152),ew=s(46422);let eE=()=>{let{form:e,onSubmit:t,isUpdating:s,currentOptInLevel:n}=(0,e_.G)(),i=(0,D.SE)(r.aG.UPDATE,"organizations");return(0,g.useEffect)(()=>{e.reset({aiOptInLevel:n})},[n,e]),(0,a.jsx)(eN.lV,{...e,"data-sentry-element":"Form_Shadcn_","data-sentry-component":"DataPrivacyForm","data-sentry-source-file":"DataPrivacyForm.tsx",children:(0,a.jsx)("form",{id:"org-privacy-form",onSubmit:e.handleSubmit(t),children:(0,a.jsxs)(eC.Zp,{"data-sentry-element":"Card","data-sentry-source-file":"DataPrivacyForm.tsx",children:[(0,a.jsx)(eC.Wu,{className:"pt-6","data-sentry-element":"CardContent","data-sentry-source-file":"DataPrivacyForm.tsx",children:(0,a.jsx)(ew.c,{control:e.control,disabled:!i||s,layout:"flex-row-reverse",label:"Supabase Assistant Opt-in Level","data-sentry-element":"AIOptInLevelSelector","data-sentry-source-file":"DataPrivacyForm.tsx"})}),(0,a.jsx)(eC.wL,{className:"flex justify-end p-4 md:px-8","data-sentry-element":"CardFooter","data-sentry-source-file":"DataPrivacyForm.tsx",children:(0,a.jsx)(eA.I,{form:"org-privacy-form",isSubmitting:s,hasChanges:e.formState.isDirty,handleReset:()=>e.reset(),helper:i?void 0:"You need additional permissions to manage this organization's settings",disabled:!i,"data-sentry-element":"FormActions","data-sentry-source-file":"DataPrivacyForm.tsx"})})]})})})};var eR=s(32981),eT=s(87494),eI=s(10663),ek=s(60042),eO=s(14523),eD=s(20838),eP=s(22258),eM=s(57374);let ez=eI.Ik({name:eI.Yj().min(1,"Organization name is required")}),eL=()=>{var e,t,s;let{slug:i}=(0,n.g)(),l=(0,em.jE)(),{data:o}=(0,$.s)(),d=(0,D.SE)(r.aG.UPDATE,"organizations"),{mutate:c,isLoading:u}=(0,eO.N)(),m=(0,eT.mN)({resolver:(0,eR.u)(ez),defaultValues:{name:null!=(e=null==o?void 0:o.name)?e:""}}),p=async e=>d?i?void c({slug:i,name:e.name},{onSuccess:()=>{(0,k.Ul)(l),B.oR.success("Successfully updated organization name")},onError:e=>{B.oR.error("Failed to update organization name: ".concat(e.message))}}):console.error("Slug is required"):B.oR.error("You do not have the required permissions to update this organization");return(0,g.useEffect)(()=>{if(o&&!u){var e;m.reset({name:null!=(e=o.name)?e:""})}},[o,m,u]),(0,a.jsx)(eN.lV,{...m,"data-sentry-element":"Form_Shadcn_","data-sentry-component":"OrganizationDetailsForm","data-sentry-source-file":"OrganizationDetailsForm.tsx",children:(0,a.jsx)("form",{id:"org-details-form",onSubmit:m.handleSubmit(p),children:(0,a.jsxs)(eC.Zp,{"data-sentry-element":"Card","data-sentry-source-file":"OrganizationDetailsForm.tsx",children:[(0,a.jsx)(eC.Wu,{className:"pt-6","data-sentry-element":"CardContent","data-sentry-source-file":"OrganizationDetailsForm.tsx",children:(0,a.jsx)(eN.zB,{control:m.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsx)(eM.M,{label:"Organization name",layout:"flex-row-reverse",children:(0,a.jsx)(eN.MJ,{children:(0,a.jsx)(eD.p,{...t,className:"w-96 max-w-full",disabled:!d||u})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"OrganizationDetailsForm.tsx"})}),(0,a.jsx)(eC.Wu,{"data-sentry-element":"CardContent","data-sentry-source-file":"OrganizationDetailsForm.tsx",children:(0,a.jsx)(eM.M,{label:"Organization slug",layout:"flex-row-reverse","data-sentry-element":"FormItemLayout","data-sentry-source-file":"OrganizationDetailsForm.tsx",children:(0,a.jsx)(eP.j,{postTab:(0,a.jsx)(ek.A,{type:"text",iconOnly:!0,text:null!=(t=null==o?void 0:o.slug)?t:""}),"data-sentry-element":"PrePostTab","data-sentry-source-file":"OrganizationDetailsForm.tsx",children:(0,a.jsx)(eD.p,{disabled:!0,className:"w-64 max-w-full",id:"slug",value:null!=(s=null==o?void 0:o.slug)?s:"","data-sentry-element":"Input","data-sentry-source-file":"OrganizationDetailsForm.tsx"})})})}),(0,a.jsx)(eC.wL,{className:"flex justify-end p-4 md:px-8","data-sentry-element":"CardFooter","data-sentry-source-file":"OrganizationDetailsForm.tsx",children:(0,a.jsx)(eA.I,{form:"org-details-form",isSubmitting:u,hasChanges:m.formState.isDirty,handleReset:()=>m.reset(),helper:d?void 0:"You need additional permissions to manage this organization's settings",disabled:!d,"data-sentry-element":"FormActions","data-sentry-source-file":"OrganizationDetailsForm.tsx"})})]})})})},eF=()=>{let e=(0,ed.x)("organizations:delete"),t=(0,D.SE)(r.aG.UPDATE,"organizations");return(0,a.jsxs)(f.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-component":"GeneralSettings","data-sentry-source-file":"GeneralSettings.tsx",children:[(0,a.jsx)(eo,{"data-sentry-element":"NoProjectsOnPaidOrgInfo","data-sentry-source-file":"GeneralSettings.tsx"}),(0,a.jsxs)(f.gu,{isFullWidth:!0,"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"GeneralSettings.tsx",children:[(0,a.jsx)(f.sZ,{className:"mb-4","data-sentry-element":"ScaffoldSectionTitle","data-sentry-source-file":"GeneralSettings.tsx",children:"Organization Details"}),(0,a.jsx)(eL,{"data-sentry-element":"OrganizationDetailsForm","data-sentry-source-file":"GeneralSettings.tsx"})]}),(0,a.jsxs)(f.gu,{isFullWidth:!0,"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"GeneralSettings.tsx",children:[(0,a.jsx)(f.sZ,{className:"mb-4","data-sentry-element":"ScaffoldSectionTitle","data-sentry-source-file":"GeneralSettings.tsx",children:"Data Privacy"}),(0,a.jsx)(eE,{"data-sentry-element":"DataPrivacyForm","data-sentry-source-file":"GeneralSettings.tsx"})]}),e&&t&&(0,a.jsx)(eS,{})]})};async function eU(e){let{slug:t,setEnforced:s}=e;if(!t)throw Error("Slug is required");let{data:a,error:r}=await (0,w.F6)("/platform/organizations/{slug}/members/mfa/enforcement",{params:{path:{slug:t}},body:{enforced:s}});return r&&(0,w.H4)(r),a}let eG=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,em.jE)();return(0,Y.n)(e=>eU(e),{async onSuccess(t,s,r){let{slug:n}=s;a.setQueryData(E.O.mfa(n),t.enforced),await (null==e?void 0:e(t,s,r))},async onError(e,s,a){void 0===t?B.oR.error("Failed to update MFA enforcement: ".concat(e.message)):t(e,s,a)},...s})};async function eH(e,t){let{slug:s}=e;if(!s)throw Error("slug is required");let{data:a,error:r}=await (0,w.Jt)("/platform/organizations/{slug}/members/mfa/enforcement",{params:{path:{slug:s}},signal:t});return r&&(0,w.H4)(r),null==a?void 0:a.enforced}let eB=function(e){let{slug:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,C.I)(E.O.mfa(t),e=>{let{signal:s}=e;return eH({slug:t},s)},{enabled:s&&void 0!==t,...a})};var eq=s(35741),eY=s(75118);let eW=eI.Ik({enforceMfa:eI.zM()}),eV=()=>{var e;let{slug:t}=(0,n.g)(),{profile:s}=(0,J.xc)(),{data:i}=(0,$.s)(),{data:l}=(0,I.Q)({slug:t}),o=(0,D.SE)(r.aG.READ,"organizations"),d=(0,D.SE)(r.aG.UPDATE,"organizations"),{mutate:c}=(0,Z.h)(),u=(null==i?void 0:i.plan.id)!=="free",{data:m,error:p,isLoading:x,isError:y,isSuccess:j}=eB({slug:t},{enabled:o}),{mutate:v,isLoading:S}=eG({onError:e=>{B.oR.error("Failed to update MFA enforcement: ".concat(e.message)),void 0!==m&&N.reset({enforceMfa:m})},onSuccess:e=>{B.oR.success("Successfully updated organization MFA settings"),c({action:"organization_mfa_enforcement_updated",properties:{mfaEnforced:e.enforced},groups:{organization:null!=t?t:"Unknown"}})}}),N=(0,eT.mN)({resolver:(0,eR.u)(eW),defaultValues:{enforceMfa:!1}});(0,g.useEffect)(()=>{void 0!==m&&N.reset({enforceMfa:m})},[m,N]);let C=(null==l||null==(e=l.find(e=>e.primary_email==(null==s?void 0:s.primary_email)))?void 0:e.mfa_enabled)||!1;return o?(0,a.jsxs)(f.Vw,{"data-sentry-element":"ScaffoldContainerLegacy","data-sentry-component":"SecuritySettings","data-sentry-source-file":"SecuritySettings.tsx",children:[!u&&(0,a.jsxs)(M.Fc,{variant:"default",title:"Organization MFA enforcement is not available on Free plan",children:[(0,a.jsx)(z.id,{}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row pt-1 gap-4",children:[(0,a.jsxs)("div",{className:"grow",children:[(0,a.jsx)(M.XL,{children:"Organization MFA enforcement is not available on Free plan"}),(0,a.jsx)(M.TN,{className:"flex flex-row justify-between gap-3",children:(0,a.jsx)("p",{children:"Upgrade to Pro or above to enforce MFA requirements for your organization."})})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(P.$,{type:"primary",asChild:!0,children:(0,a.jsx)(h(),{href:"/org/".concat(t,"/billing?panel=subscriptionPlan&source=mfa"),children:"Upgrade subscription"})})})]})]}),(y||p)&&u&&(0,a.jsx)(b.A,{error:p,subject:"Failed to retrieve MFA enforcement status"}),x&&(0,a.jsx)(eC.Zp,{children:(0,a.jsx)(eC.Wu,{children:(0,a.jsx)(_.y,{})})}),j&&u&&(0,a.jsx)(eN.lV,{...N,children:(0,a.jsx)("form",{onSubmit:N.handleSubmit(e=>{t&&u&&v({slug:t,setEnforced:e.enforceMfa})}),children:(0,a.jsxs)(eC.Zp,{children:[(0,a.jsx)(eC.Wu,{children:(0,a.jsx)(eN.zB,{control:N.control,name:"enforceMfa",render:e=>{let{field:t}=e;return(0,a.jsx)(eM.M,{layout:"flex-row-reverse",label:"Require MFA to access organization",description:"Team members must have MFA enabled and a valid MFA session to access the organization and any projects.",children:(0,a.jsx)(eN.MJ,{children:(0,a.jsxs)(eq.m_,{children:[(0,a.jsx)(eq.k$,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsx)(eY.d,{checked:t.value,onCheckedChange:t.onChange,disabled:!u||!d||!C||S})})}),(!d||!C)&&(0,a.jsx)(eq.ZI,{side:"bottom",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.g,{href:"/account/security",children:"Enable MFA"})," on your own account first"]}):"You don't have permission to update MFA settings"})]})})})}})}),(0,a.jsxs)(eC.wL,{className:"justify-end space-x-2",children:[N.formState.isDirty&&(0,a.jsx)(P.$,{type:"default",disabled:x||S,onClick:()=>N.reset({enforceMfa:!!u&&m}),children:"Cancel"}),(0,a.jsx)(P.$,{type:"primary",htmlType:"submit",disabled:!u||!d||S||x||!N.formState.isDirty,loading:S,children:"Save changes"})]})]})})})]}):(0,a.jsx)(f.Vw,{children:(0,a.jsx)(A.A,{resourceText:"view organization security settings"})})};var eZ=s(25287),e$=s(73980),eJ=s(35587),eK=s(94131),eX=s(76877),eQ=s(8891),e0=s(74144),e1=s(30805),e2=s(65573),e4=s(77012),e3=s(37659);let e5=e=>{let{title:t}=e;return(0,a.jsx)("img",{className:"border rounded-lg shadow w-full sm:w-48 mt-6 border-body",src:"".concat(e0.o2,"/img/integrations/covers/").concat(t,"-cover.png"),alt:"".concat(t," cover"),"data-sentry-component":"IntegrationImageHandler","data-sentry-source-file":"IntegrationSettings.tsx"})},e6=()=>{let e=(0,eu.useRouter)(),{data:t}=(0,$.s)(),s=(0,ed.x)("integrations:vercel"),n=(0,D.SE)(r.aG.READ,"integrations.github_connections"),i=(0,D.SE)(r.aG.CREATE,"integrations.github_connections"),l=(0,D.SE)(r.aG.UPDATE,"integrations.github_connections"),{data:o}=(0,eK.m)(),{data:d}=(0,eQ.O)({organizationId:null==t?void 0:t.id}),{mutate:c}=(0,eX.L)({onSuccess:()=>{B.oR.success("Successfully deleted GitHub connection")}}),u=(0,e2.bZ)(),m=(0,g.useCallback)(()=>{e.push("/project/_/settings/integrations")},[u]),p=(0,g.useCallback)(async e=>{if(!(null==t?void 0:t.id))return void B.oR.error("Organization not found");c({connectionId:e.id,organizationId:t.id})},[c,null==t?void 0:t.id]),x=o?"You are authorized with Supabase GitHub App. You can configure your GitHub App installations and repository access [here](".concat(e1.CH,"). You can revoke your authorization [here](").concat(e1.oC,")."):"";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Vw,{"data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"IntegrationSettings.tsx",children:(0,a.jsx)(f.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"IntegrationSettings.tsx",children:"Integrations"})}),(0,a.jsx)(()=>(0,a.jsx)(f.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-component":"GitHubSection","data-sentry-source-file":"IntegrationSettings.tsx",children:(0,a.jsxs)(f.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"IntegrationSettings.tsx",children:[(0,a.jsxs)(f.xp,{title:"GitHub Connections","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"IntegrationSettings.tsx",children:[(0,a.jsx)(e$.o,{content:"\nConnect any of your GitHub repositories to a project.\n","data-sentry-element":"Markdown","data-sentry-source-file":"IntegrationSettings.tsx"}),(0,a.jsx)(e5,{title:"github","data-sentry-element":"IntegrationImageHandler","data-sentry-source-file":"IntegrationSettings.tsx"})]}),(0,a.jsx)(f.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"IntegrationSettings.tsx",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e$.o,{content:"\n\n### How will GitHub connections work?\n\nYou will be able to connect a GitHub repository to a Supabase project.\nThe GitHub app will watch for changes in your repository such as file changes, branch changes as well as pull request activity.\n"}),(0,a.jsx)("ul",{className:"flex flex-col gap-y-2",children:null==d?void 0:d.map(e=>{var t,s,r,n,i;return(0,a.jsx)(e4.S,{disabled:!l,connection:{id:String(e.id),added_by:{id:String(null==(t=e.user)?void 0:t.id),primary_email:null!=(n=null==(s=e.user)?void 0:s.primary_email)?n:"",username:null!=(i=null==(r=e.user)?void 0:r.username)?i:""},foreign_project_id:String(e.repository.id),supabase_project_ref:e.project.ref,organization_integration_id:"unused",inserted_at:e.inserted_at,updated_at:e.updated_at,metadata:{name:e.repository.name}},type:"GitHub",onDeleteConnection:p},e.id)})}),(0,a.jsx)(eZ.MJ,{onClick:m,showNode:!1,disabled:!i,children:"Add new project connection"}),x&&(0,a.jsx)(e$.o,{extLinks:!0,content:x,className:"text-foreground-lighter"})]}):(0,a.jsx)(A.A,{resourceText:"view this organization's GitHub connections"})})]})}),{"data-sentry-element":"GitHubSection","data-sentry-source-file":"IntegrationSettings.tsx"}),s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.cJ,{}),(0,a.jsx)(eJ.A,{isProjectScoped:!1}),(0,a.jsx)(e3.A,{})]})]})};s(35128);var e8=s(99265),e9=s(33202),e7=s.n(e9),te=s(70891),tt=s(49629),ts=s(86252),ta=s(11094);let tr=e=>{let{visible:t,onHide:s}=e;return(0,a.jsxs)(ey.A,{hideFooter:!0,visible:t,size:"xlarge",header:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:"Spend Cap"}),(0,a.jsx)(ts.A,{href:"https://supabase.com/docs/guides/platform/cost-control#spend-cap"})]}),showCloseButton:!1,onCancel:()=>s(),"data-sentry-element":"Modal","data-sentry-component":"SpendCapModal","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(ey.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"SpendCapModal.tsx",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm",children:"Enabling the Spend Cap limits your usage to your plan's quota, which controls costs but can restrict your service. Disabling the spend cap removes these limits, but any extra usage beyond the plan's limit will be charged per usage."}),(0,a.jsx)("p",{className:"text-sm",children:"Launching additional projects or enabling project add-ons will incur additional monthly fees independent of your Spend Cap."}),(0,a.jsxs)(ta.XI,{"data-sentry-element":"Table","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(ta.A0,{className:"[&_th]:h-7","data-sentry-element":"TableHeader","data-sentry-source-file":"SpendCapModal.tsx",children:(0,a.jsxs)(ta.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(ta.nd,{className:"w-[50%]","data-sentry-element":"TableHead","data-sentry-source-file":"SpendCapModal.tsx",children:"Item"}),(0,a.jsx)(ta.nd,{className:"w-[25%]","data-sentry-element":"TableHead","data-sentry-source-file":"SpendCapModal.tsx",children:"Limit"}),(0,a.jsx)(ta.nd,{className:"w-[25%]","data-sentry-element":"TableHead","data-sentry-source-file":"SpendCapModal.tsx",children:"Rate"})]})}),(0,a.jsxs)(ta.BF,{className:"[&_td]:py-2","data-sentry-element":"TableBody","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsxs)(ta.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Disk Size"}),(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"8 GB per project"}),(0,a.jsx)(ta.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.125 per GB"})]}),(0,a.jsxs)(ta.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Egress"}),(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"250 GB"}),(0,a.jsx)(ta.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.09 per GB"})]}),(0,a.jsxs)(ta.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Auth MAUs"}),(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"100,000"}),(0,a.jsx)(ta.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.00325 per user"})]}),(0,a.jsxs)(ta.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Auth Third-Party MAUs"}),(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"100,000"}),(0,a.jsx)(ta.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.00325 per user"})]}),(0,a.jsxs)(ta.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Auth Single Sign-On MAUs"}),(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"50"}),(0,a.jsx)(ta.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.015 per user"})]}),(0,a.jsxs)(ta.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Storage Size"}),(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"100 GB"}),(0,a.jsx)(ta.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.021 per GB"})]}),(0,a.jsxs)(ta.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Storage Image Transformations"}),(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"100 origin images"}),(0,a.jsx)(ta.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$5 per 1000 images"})]}),(0,a.jsxs)(ta.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Realtime Concurrent Peak Connections"}),(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"500"}),(0,a.jsx)(ta.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$10 per 1000"})]}),(0,a.jsxs)(ta.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Realtime Messages"}),(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"5 Million"}),(0,a.jsx)(ta.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$2.50 per Million"})]}),(0,a.jsxs)(ta.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Function Invocations"}),(0,a.jsx)(ta.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"2 Million"}),(0,a.jsx)(ta.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$2 per Million"})]})]})]})]})}),(0,a.jsx)(ey.A.Separator,{"data-sentry-element":"Modal.Separator","data-sentry-source-file":"SpendCapModal.tsx"}),(0,a.jsx)(ey.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"SpendCapModal.tsx",children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(P.$,{block:!0,type:"primary",onClick:()=>s(),"data-sentry-element":"Button","data-sentry-source-file":"SpendCapModal.tsx",children:"Understood"})})})]})};var tn=s(91437),ti=s(2944),tl=s(77376),to=s(59130);async function td(e){let{payment_intent_id:t,name:s,kind:a,size:r}=e,{data:n,error:i}=await (0,w.bE)("/platform/organizations/confirm-subscription",{body:{payment_intent_id:t,name:s,kind:a,size:r}});return i&&(0,w.H4)(i),n}let tc=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,em.jE)();return(0,Y.n)(e=>td(e),{async onSuccess(t,s,r){a.setQueriesData({queryKey:E.O.list(),exact:!0},e=>e?[...e,(0,k.i0)(t)]:e),await a.invalidateQueries(ep.Q.list()),await (null==e?void 0:e(t,s,r))},async onError(e,s,a){void 0===t?B.oR.error(e.message,{dismissible:!0,duration:1e4}):t(e,s,a)},...s})};var tu=s(91419),tm=s(796),tp=s(63031),tx=s(91116),th=s(18400);let tg={PERSONAL:"Personal",EDUCATIONAL:"Educational",STARTUP:"Startup",AGENCY:"Agency",COMPANY:"Company",UNDISCLOSED:"N/A"},ty={1:"1 - 10",10:"10 - 49",50:"50 - 99",100:"100 - 299",300:"More than 300"},tf=["FREE","PRO","TEAM"];eI.Ik({plan:eI.Yj().transform(e=>e.toUpperCase()).pipe(eI.k5(tf)),name:eI.Yj().min(1),kind:eI.Yj().transform(e=>e.toUpperCase()).pipe(eI.k5(["PERSONAL","EDUCATIONAL","STARTUP","AGENCY","COMPANY","UNDISCLOSED"])),size:eI.k5(["1","10","50","100","300"]),spend_cap:eI.zM()});let tj=(0,tu.c)(e0.WS),tb=e=>{var t;let{onPaymentMethodReset:s,setupIntent:r,onPlanSelected:i}=e,l=(0,eu.useRouter)(),o=(0,J.xc)(),{data:d,isSuccess:c}=(0,k.Ad)(),{data:u}=(0,O.el)(),{resolvedTheme:m}=(0,tm.D)(),[p]=(0,eg.U)(n.rS.LAST_VISITED_ORGANIZATION,""),x=(d||[]).filter(e=>"free"===e.plan.id),y=(0,g.useMemo)(()=>e7().groupBy(u||[],"organization_slug"),[u]),[f,j]=(0,g.useState)(!1),b=(0,g.useMemo)(()=>({clientSecret:r?r.client_secret:"",appearance:(0,tx.D)(m),paymentMethodCreation:"manual"}),[r,m]),[v,S]=(0,g.useState)({plan:"FREE",name:"",kind:"PERSONAL",size:"1",spend_cap:!0}),[A]=(0,tt.ab)({returnTo:tt.tU.withDefault(""),auth_id:tt.tU.withDefault("")}),_=(e,t)=>{S(s=>({...s,[e]:t}))};(0,g.useEffect)(()=>{if(!l.isReady)return;let{name:e,kind:t,plan:s,size:a,spend_cap:r}=l.query;if("string"==typeof e&&_("name",e),"string"==typeof t&&_("kind",t),"string"==typeof s&&tf.includes(s.toUpperCase())){let e=s.toUpperCase();_("plan",e),i(e)}"string"==typeof a&&_("size",a),"string"==typeof r&&_("spend_cap","true"===r)},[l.isReady]),(0,g.useEffect)(()=>{if(!v.name&&(null==d?void 0:d.length)===0&&!o.isLoading){var e;_("name",(null==(e=o.profile)?void 0:e.username)?o.profile.username+"'s Org":"My Org")}},[c]);let[N,C]=(0,g.useState)(!1),[w,E]=(0,g.useState)(),[R,T]=(0,g.useState)(!1),[I,D]=(0,g.useState)(!1),[M,z]=(0,g.useState)(null),{mutate:L}=(0,ti.Y1)({onSuccess:async e=>{"pending_payment_intent_secret"in e&&e.pending_payment_intent_secret?z(e.pending_payment_intent_secret):H(e)},onError:e=>{B.oR.error(e.message,{duration:1e4}),Z(),C(!1)}}),{mutate:F}=tc({onSuccess:e=>{e&&"slug"in e&&H({slug:e.slug})}}),U=async e=>{var t;z(""),(null==(t=e.paymentIntent)?void 0:t.status)==="succeeded"?await F({payment_intent_id:e.paymentIntent.id,name:v.name,kind:v.kind,size:v.size}):(B.oR.error("Could not confirm payment. Please try again or use a different card.",{duration:1e4}),Z(),C(!1))},H=e=>{var t;let s=(null==(t=o.profile)?void 0:t.username)?o.profile.username+"'s Project":"My Project";A.returnTo&&A.auth_id?l.push("".concat(A.returnTo,"?auth_id=").concat(A.auth_id),void 0,{shallow:!1}):l.push("/new/".concat(e.slug,"?projectName=").concat(s))},q=(0,g.useMemo)(()=>({clientSecret:M,appearance:(0,tx.D)(m)}),[M,m]);async function Y(e,t){var s;let a="PRO"!==v.plan||v.spend_cap?v.plan:"PAYG";L({name:v.name,kind:v.kind,tier:"tier_"+a.toLowerCase(),..."COMPANY"==v.kind?{size:v.size}:{},payment_method:e,billing_name:"FREE"===a||null==t?void 0:t.billing_name,address:"FREE"===a?null:null==t?void 0:t.address,tax_id:"FREE"===a?void 0:null!=(s=null==t?void 0:t.tax_id)?s:void 0})}let W=(0,g.useRef)(null),V=async()=>{if(C(!0),"FREE"===v.plan)await Y();else if(w)Y(w.id);else{var e;let t=await (null==(e=W.current)?void 0:e.createPaymentMethod());if(t){E(t.paymentMethod);let e={address:t.address,billing_name:t.customerName,tax_id:t.taxId};Y(t.paymentMethod.id,e)}else C(!1)}},Z=()=>(E(void 0),s()),$=async e=>{if(e.preventDefault(),!function(e){return(e?e.trim():"").length>=1}(v.name))return B.oR.error("Organization name is empty");x.some(e=>{var t;return(null==(t=y[e.slug])?void 0:t.length)>0})&&"FREE"!==v.plan?j(!0):await V()};return(0,a.jsxs)("form",{onSubmit:$,"data-sentry-component":"NewOrgForm","data-sentry-source-file":"NewOrgForm.tsx",children:[(0,a.jsxs)(tn.A,{title:(0,a.jsx)("div",{children:(0,a.jsx)("h4",{children:"Create a new organization"})},"panel-title"),footer:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,a.jsx)(P.$,{type:"default",disabled:N||R,onClick:()=>{p?l.push("/org/".concat(p)):l.push("/organizations")},children:"Cancel"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("p",{className:"text-xs text-foreground-lighter",children:"You can rename your organization later"}),(0,a.jsx)(P.$,{htmlType:"submit",type:"primary",loading:N,disabled:N,children:"Create organization"})]})]},"panel-footer"),className:"overflow-visible","data-sentry-element":"Panel","data-sentry-source-file":"NewOrgForm.tsx",children:[(0,a.jsxs)(tn.A.Content,{"data-sentry-element":"Panel.Content","data-sentry-source-file":"NewOrgForm.tsx",children:[(0,a.jsx)("p",{className:"text-sm",children:"This is your organization within Supabase."}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"For example, you can use the name of your company or department."})]}),(0,a.jsx)(tn.A.Content,{className:"Form section-block--body has-inputs-centered","data-sentry-element":"Panel.Content","data-sentry-source-file":"NewOrgForm.tsx",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 w-full",children:[(0,a.jsx)("div",{children:(0,a.jsx)(tl.J,{htmlFor:"name","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:"Name"})}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)(eD.p,{id:"name",autoFocus:!0,type:"text",placeholder:"Organization name",value:v.name,onChange:e=>_("name",e.target.value),"data-sentry-element":"Input_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(tl.J,{htmlFor:"name",className:"text-foreground-lighter leading-normal text-sm","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:"What's the name of your company or team?"})})]})]})}),(0,a.jsx)(tn.A.Content,{className:"Form section-block--body has-inputs-centered","data-sentry-element":"Panel.Content","data-sentry-source-file":"NewOrgForm.tsx",children:(0,a.jsxs)("div",{className:"grid grid-cols-3",children:[(0,a.jsx)("div",{children:(0,a.jsx)(tl.J,{htmlFor:"kind","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:"Type"})}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsxs)(to.l6,{value:v.kind,onValueChange:e=>_("kind",e),"data-sentry-element":"Select_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:[(0,a.jsx)(to.bq,{id:"kind",className:"w-full","data-sentry-element":"SelectTrigger_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:(0,a.jsx)(to.yv,{"data-sentry-element":"SelectValue_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx"})}),(0,a.jsx)(to.gC,{"data-sentry-element":"SelectContent_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:Object.entries(tg).map(e=>{let[t,s]=e;return(0,a.jsx)(to.eb,{value:t,children:s},t)})})]}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(tl.J,{htmlFor:"kind",className:"text-foreground-lighter leading-normal text-sm","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:"What would best describe your organization?"})})]})]})}),"COMPANY"==v.kind&&(0,a.jsx)(tn.A.Content,{className:"Form section-block--body has-inputs-centered",children:(0,a.jsxs)("div",{className:"grid grid-cols-3",children:[(0,a.jsx)("div",{children:(0,a.jsx)(tl.J,{htmlFor:"size",children:"Company size"})}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsxs)(to.l6,{value:v.size,onValueChange:e=>_("size",e),children:[(0,a.jsx)(to.bq,{id:"size",className:"w-full",children:(0,a.jsx)(to.yv,{})}),(0,a.jsx)(to.gC,{children:Object.entries(ty).map(e=>{let[t,s]=e;return(0,a.jsx)(to.eb,{value:t,children:s},t)})})]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(tl.J,{htmlFor:"size",className:"text-foreground-lighter leading-normal text-sm",children:"How many people are in your company?"})})]})]})}),(0,a.jsx)(tn.A.Content,{"data-sentry-element":"Panel.Content","data-sentry-source-file":"NewOrgForm.tsx",children:(0,a.jsxs)("div",{className:"grid grid-cols-3",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(tl.J,{htmlFor:"plan",className:" text-sm","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:"Plan"}),(0,a.jsxs)("a",{href:"https://supabase.com/pricing",target:"_blank",rel:"noreferrer noopener",className:"text-sm flex items-center gap-2 opacity-75 hover:opacity-100 transition",children:["Pricing",(0,a.jsx)(G.A,{size:16,strokeWidth:1.5,"data-sentry-element":"ExternalLink","data-sentry-source-file":"NewOrgForm.tsx"})]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsxs)(to.l6,{value:v.plan,onValueChange:e=>{_("plan",e),i(e)},"data-sentry-element":"Select_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:[(0,a.jsx)(to.bq,{id:"plan",className:"w-full","data-sentry-element":"SelectTrigger_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:(0,a.jsx)(to.yv,{"data-sentry-element":"SelectValue_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx"})}),(0,a.jsx)(to.gC,{"data-sentry-element":"SelectContent_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:Object.entries(e0.ho).map(e=>{let[t,s]=e;return(0,a.jsx)(to.eb,{value:t,translate:"no",children:s},t)})})]}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(tl.J,{htmlFor:"plan",className:"text-foreground-lighter leading-normal text-sm","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:"The Plan applies to your new organization."})})]})]})}),"PRO"===v.plan&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tn.A.Content,{className:"border-b border-panel-border-interior-light dark:border-panel-border-interior-dark",children:(0,a.jsxs)("div",{className:"grid grid-cols-3",children:[(0,a.jsxs)("div",{className:"col-span-1 flex space-x-2 text-sm",children:[(0,a.jsx)(tl.J,{htmlFor:"spend-cap",className:" leading-normal",children:"Spend Cap"}),(0,a.jsx)(te.A,{size:16,strokeWidth:1.5,className:"transition opacity-50 cursor-pointer hover:opacity-100",onClick:()=>D(!0)})]}),(0,a.jsxs)("div",{className:"col-span-2 flex items-center space-x-2",children:[(0,a.jsx)(eY.d,{id:"spend-cap",checked:v.spend_cap,onCheckedChange:()=>_("spend_cap",!v.spend_cap)}),(0,a.jsx)(tl.J,{htmlFor:"spend-cap",children:v.spend_cap?"Usage is limited to the plan's quota.":"You pay for overages beyond the plan's quota."})]})]})}),(0,a.jsx)(tr,{visible:I,onHide:()=>D(!1)})]}),r&&"FREE"!==v.plan&&(0,a.jsx)(tn.A.Content,{children:(0,a.jsx)(e8.Elements,{stripe:tj,options:b,children:(0,a.jsx)(tn.A.Content,{children:(0,a.jsx)(th.S,{ref:W,email:null==(t=o.profile)?void 0:t.primary_email,readOnly:N||R})})})})]}),(0,a.jsxs)(ea.A,{size:"large",loading:!1,visible:f,title:(0,a.jsx)(a.Fragment,{children:"Confirm organization creation"}),confirmLabel:"Create new organization",onCancel:()=>j(!1),onConfirm:async()=>{await V(),j(!1)},variant:"warning","data-sentry-element":"ConfirmationModal","data-sentry-source-file":"NewOrgForm.tsx",children:[(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:["Supabase"," ",(0,a.jsx)(h(),{className:"underline",href:"/docs/guides/platform/billing-on-supabase",target:"_blank","data-sentry-element":"Link","data-sentry-source-file":"NewOrgForm.tsx",children:"bills per organization"}),". If you want to upgrade your existing projects, upgrade your existing organization instead."]}),(0,a.jsx)("ul",{className:"mt-4 space-y-6",children:x.filter(e=>{var t;return(null==(t=y[e.slug])?void 0:t.length)>0}).map(e=>{let t=y[e.slug].map(e=>e.name);return(0,a.jsxs)("li",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:e.name}),(0,a.jsx)(P.$,{asChild:!0,type:"primary",size:"tiny",children:(0,a.jsx)(h(),{href:"/org/".concat(e.slug,"/billing?panel=subscriptionPlan"),children:"Change Plan"})})]}),(0,a.jsx)("div",{className:"text-foreground-light text-xs",children:t.length<=2?(0,a.jsx)("span",{children:t.join("and ")}):(0,a.jsxs)("div",{children:[t.slice(0,2).join(", ")," and"," ",(0,a.jsxs)(eq.m_,{children:[(0,a.jsx)(eq.k$,{asChild:!0,children:(0,a.jsxs)("span",{className:"underline decoration-dotted",children:[t.length-2," other"," ",(t.length,"project")]})}),(0,a.jsx)(eq.ZI,{children:(0,a.jsx)("ul",{className:"list-disc list-inside",children:t.slice(2).map(e=>(0,a.jsx)("li",{children:e}))})})]})]})})]},"org_".concat(e.slug))})})]}),tj&&M&&w&&(0,a.jsx)(e8.Elements,{stripe:tj,options:q,children:(0,a.jsx)(tp.i,{paymentIntentSecret:M,onPaymentIntentConfirm:e=>U(e),onLoadingChange:e=>T(e),onError:e=>{B.oR.error(e.message,{duration:1e4}),C(!1),Z()}})})]})};var tv=s(36839),tS=s(24699),tA=s(87776),t_=s(4051);async function tN(e,t){let{slug:s}=e;if(!s)throw Error("Organization slug is required");let{data:a,error:r}=await (0,w.Jt)("/platform/organizations/{slug}/oauth/apps",{params:{path:{slug:s},query:{type:"published"}}});return r&&(0,w.H4)(r),a}let tC=function(e){let{slug:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,C.I)(t_.R.oauthApps(t),e=>{let{signal:s}=e;return tN({slug:t},s)},{enabled:s&&void 0!==t,...a})};var tw=s(80127),tE=s(80949),tR=s(92737);let tT=e=>{var t;let{app:s,onSelectRevoke:r}=e;return(0,a.jsxs)(j.A.tr,{"data-sentry-element":"Table.tr","data-sentry-component":"AuthorizedAppRow","data-sentry-source-file":"AuthorizedAppRow.tsx",children:[(0,a.jsx)(j.A.td,{"data-sentry-element":"Table.td","data-sentry-source-file":"AuthorizedAppRow.tsx",children:(0,a.jsx)("div",{className:"w-[30px] h-[30px] rounded-full bg-no-repeat bg-cover bg-center border border-control flex items-center justify-center",style:{backgroundImage:s.icon?"url('".concat(s.icon,"')"):"none"},children:s.icon?"":"".concat(s.name[0])})}),(0,a.jsx)(j.A.td,{"data-sentry-element":"Table.td","data-sentry-source-file":"AuthorizedAppRow.tsx",children:s.name}),(0,a.jsx)(j.A.td,{"data-sentry-element":"Table.td","data-sentry-source-file":"AuthorizedAppRow.tsx",children:s.created_by}),(0,a.jsx)(j.A.td,{"data-sentry-element":"Table.td","data-sentry-source-file":"AuthorizedAppRow.tsx",children:(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)("p",{className:"font-mono truncate",title:s.app_id,children:s.app_id}),(0,a.jsx)(ek.A,{iconOnly:!0,type:"default",text:s.app_id,className:"px-1","data-sentry-element":"CopyButton","data-sentry-source-file":"AuthorizedAppRow.tsx"})]})}),(0,a.jsx)(j.A.td,{"data-sentry-element":"Table.td","data-sentry-source-file":"AuthorizedAppRow.tsx",children:(0,a.jsx)(tR.T,{utcTimestamp:null!=(t=s.authorized_at)?t:"",labelFormat:"DD/MM/YYYY, HH:mm:ss",className:"text-sm","data-sentry-element":"TimestampInfo","data-sentry-source-file":"AuthorizedAppRow.tsx"})}),(0,a.jsx)(j.A.td,{align:"right","data-sentry-element":"Table.td","data-sentry-source-file":"AuthorizedAppRow.tsx",children:(0,a.jsx)(P.$,{type:"default",icon:(0,a.jsx)(tE.A,{}),className:"px-1",onClick:()=>r(),"data-sentry-element":"Button","data-sentry-source-file":"AuthorizedAppRow.tsx"})})]})};var tI=s(13322);async function tk(e){let{id:t,slug:s}=e;if(!t)throw Error("OAuth app ID is required");if(!s)throw Error("Organization slug is required");let{data:a,error:r}=await (0,w.yH)("/platform/organizations/{slug}/oauth/apps/{id}",{params:{path:{slug:s,id:t}}});return r&&(0,w.H4)(r),a}let tO=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,em.jE)();return(0,Y.n)(e=>tk(e),{async onSuccess(t,s,r){let{slug:n}=s;await a.invalidateQueries(t_.R.oauthApps(n)),await (null==e?void 0:e(t,s,r))},async onError(e,s,a){void 0===t?B.oR.error("Failed to delete application: ".concat(e.message)):t(e,s,a)},...s})},tD=e=>{let{selectedApp:t,onClose:s}=e,{slug:r}=(0,n.g)(),{mutate:i,isLoading:l}=tO({onSuccess:()=>{B.oR.success('Successfully deleted the app "'.concat(null==t?void 0:t.name,'"')),s()}}),o=async()=>r?(null==t?void 0:t.id)?void i({slug:r,id:null==t?void 0:t.id}):console.error("App ID is required"):console.error("Slug is required");return(0,a.jsxs)(ey.A,{size:"medium",alignFooter:"right",header:"Confirm to delete ".concat(null==t?void 0:t.name),visible:void 0!==t,loading:l,onCancel:s,onConfirm:o,"data-sentry-element":"Modal","data-sentry-component":"DeleteAppModal","data-sentry-source-file":"DeleteAppModal.tsx",children:[(0,a.jsx)(ey.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"DeleteAppModal.tsx",children:(0,a.jsx)(el.Z,{type:"warning",title:"This action cannot be undone",description:"Deleting ".concat(null==t?void 0:t.name," will invalidate any access tokens from this application that\n          were authorized by users."),"data-sentry-element":"Admonition","data-sentry-source-file":"DeleteAppModal.tsx"})}),(0,a.jsx)(ey.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"DeleteAppModal.tsx",children:(0,a.jsx)("ul",{className:"space-y-5",children:(0,a.jsxs)("li",{className:"flex gap-3 text-sm",children:[(0,a.jsx)(tI.A,{size:14,className:"flex-shrink-0","data-sentry-element":"Lock","data-sentry-source-file":"DeleteAppModal.tsx"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Before you remove this application, consider:"}),(0,a.jsx)("ul",{className:"space-y-2 mt-2",children:(0,a.jsx)("li",{className:"list-disc ml-4",children:"No users are currently using this application. It will no longer be available for use after deletion."})})]})]})})})]})};var tP=s(32615),tM=s(96196),tz=s(64495);let tL=e=>{var t,s;let{app:n,onSelectEdit:i,onSelectDelete:l}=e,o=(0,D.SE)(r.aG.UPDATE,"approved_oauth_apps"),d=(0,D.SE)(r.aG.DELETE,"approved_oauth_apps");return(0,a.jsxs)(j.A.tr,{"data-sentry-element":"Table.tr","data-sentry-component":"OAuthAppRow","data-sentry-source-file":"OAuthAppRow.tsx",children:[(0,a.jsx)(j.A.td,{"data-sentry-element":"Table.td","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsx)("div",{className:"w-[30px] h-[30px] rounded-full bg-no-repeat bg-cover bg-center border border-control flex items-center justify-center",style:{backgroundImage:n.icon?"url('".concat(n.icon,"')"):"none"},children:n.icon?"":"".concat(n.name[0])})}),(0,a.jsx)(j.A.td,{"data-sentry-element":"Table.td","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsx)("p",{title:n.name,className:"truncate",children:n.name})}),(0,a.jsx)(j.A.td,{"data-sentry-element":"Table.td","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)("p",{className:"font-mono truncate",title:n.client_id,children:n.client_id}),(0,a.jsx)(ek.A,{type:"default",iconOnly:!0,text:null!=(t=n.client_id)?t:"",className:"px-1","data-sentry-element":"CopyButton","data-sentry-source-file":"OAuthAppRow.tsx"})]})}),(0,a.jsx)(j.A.td,{"data-sentry-element":"Table.td","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsx)(tR.T,{utcTimestamp:null!=(s=n.created_at)?s:"",labelFormat:"DD/MM/YYYY, HH:mm:ss",className:"text-sm","data-sentry-element":"TimestampInfo","data-sentry-source-file":"OAuthAppRow.tsx"})}),(0,a.jsx)(j.A.td,{align:"right","data-sentry-element":"Table.td","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsxs)(tz.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"OAuthAppRow.tsx",children:[(0,a.jsx)(tz.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsx)(P.$,{type:"default",icon:(0,a.jsx)(tP.A,{}),className:"px-1","data-sentry-element":"Button","data-sentry-source-file":"OAuthAppRow.tsx"})}),(0,a.jsxs)(tz.SQ,{align:"end",side:"bottom",className:"w-32","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"OAuthAppRow.tsx",children:[(0,a.jsxs)(eq.m_,{"data-sentry-element":"Tooltip","data-sentry-source-file":"OAuthAppRow.tsx",children:[(0,a.jsx)(eq.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsxs)(tz._2,{disabled:!o,className:"space-x-2 !pointer-events-auto",onClick:()=>{o&&i()},"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"OAuthAppRow.tsx",children:[(0,a.jsx)(tM.A,{size:16,"data-sentry-element":"Edit","data-sentry-source-file":"OAuthAppRow.tsx"}),(0,a.jsx)("p",{children:"Edit app"})]},"edit")}),!o&&(0,a.jsx)(eq.ZI,{side:"left",children:"You need additional permissions to edit apps"})]}),(0,a.jsx)(tz.mB,{"data-sentry-element":"DropdownMenuSeparator","data-sentry-source-file":"OAuthAppRow.tsx"}),(0,a.jsxs)(eq.m_,{"data-sentry-element":"Tooltip","data-sentry-source-file":"OAuthAppRow.tsx",children:[(0,a.jsx)(eq.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsxs)(tz._2,{disabled:!d,className:"space-x-2 !pointer-events-auto",onClick:()=>{d&&l()},"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"OAuthAppRow.tsx",children:[(0,a.jsx)(tE.A,{size:16,"data-sentry-element":"Trash","data-sentry-source-file":"OAuthAppRow.tsx"}),(0,a.jsx)("p",{children:"Delete app"})]},"delete")}),!d&&(0,a.jsx)(eq.ZI,{side:"left",children:"You need additional permissions to delete apps"})]})]})]})})]})};var tF=s(2236);async function tU(e){let{slug:t,name:s,website:a,icon:r,scopes:n,redirect_uris:i}=e,{data:l,error:o}=await (0,w.bE)("/platform/organizations/{slug}/oauth/apps",{params:{path:{slug:t}},body:{name:s,website:a,icon:r,scopes:n,redirect_uris:i}});return o&&(0,w.H4)(o),l}let tG=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,em.jE)();return(0,Y.n)(e=>tU(e),{async onSuccess(t,s,r){let{slug:n}=s;await a.invalidateQueries(t_.R.oauthApps(n)),await (null==e?void 0:e(t,s,r))},async onError(e,s,a){void 0===t?B.oR.error("Failed to create OAuth application: ".concat(e.message)):t(e,s,a)},...s})};async function tH(e){let{id:t,slug:s,name:a,website:r,icon:n,scopes:i,redirect_uris:l}=e;if(!t)throw Error("OAuth app ID is required");if(!s)throw Error("Organization slug is required");if(!a)throw Error("OAuth app name is required");if(!r)throw Error("OAuth app URL is required");if(!l||0===l.length)throw Error("Redirect URIs are required");let{data:o,error:d}=await (0,w.yJ)("/platform/organizations/{slug}/oauth/apps/{id}",{params:{path:{id:t,slug:s}},body:{name:a,website:r,icon:n,scopes:i,redirect_uris:l}});if(d)throw(0,w.H4)(d);return o}let tB=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,em.jE)();return(0,Y.n)(e=>tH(e),{async onSuccess(t,s,r){let{slug:n}=s;await a.invalidateQueries(t_.R.oauthApps(n)),await (null==e?void 0:e(t,s,r))},async onError(e,s,a){void 0===t?B.oR.error("Failed to update application: ".concat(e.message)):t(e,s,a)},...s})};var tq=s(46895),tY=s(82147);let tW=async function(e,t,s){let a=!(arguments.length>3)||void 0===arguments[3]||arguments[3],r=(0,tY.UU)("https://obuldanrptloktxcffvn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9idWxkYW5ycHRsb2t0eGNmZnZuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTg2MTQ2ODUsImV4cCI6MjAzNDE5MDY4NX0.NFt49g6DFkc1X5khCzN5p01iAVo2TMxlx88cY1V0E2M",{auth:{persistSession:!1,autoRefreshToken:!1,multiTab:!1,detectSessionInUrl:!1,localStorage:{getItem:e=>void 0,setItem:(e,t)=>{},removeItem:e=>{}}}}),{data:n,error:i}=await r.storage.from(e).upload(t,s,{cacheControl:"3600"});if(i)return void console.error("Failed to upload:",i);if(n&&a){let{data:t}=await r.storage.from(e).getPublicUrl(n.path);return null==t?void 0:t.publicUrl}};var tV=s(80832),tZ=s(34531),t$=s(9286);let tJ={list:(e,t)=>["organizations",e,"oauth","apps",t,"client-secrets"]};async function tK(e){let{slug:t,appId:s}=e,{data:a,error:r}=await (0,w.bE)("/platform/organizations/{slug}/oauth/apps/{app_id}/client-secrets",{params:{path:{slug:t,app_id:s}}});return r&&(0,w.H4)(r),a}let tX=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,em.jE)();return(0,Y.n)(e=>tK(e),{async onSuccess(t,s,r){let{slug:n,appId:i}=s;await a.invalidateQueries(tJ.list(n,i)),await (null==e?void 0:e(t,s,r))},async onError(e,s,a){void 0===t?B.oR.error("Failed to create client secret: ".concat(e.message)):t(e,s,a)},...s})};async function tQ(e,t){let{slug:s,appId:a}=e;if(!s)throw Error("slug is required");if(!a)throw Error("appId is required");let{data:r,error:n}=await (0,w.Jt)("/platform/organizations/{slug}/oauth/apps/{app_id}/client-secrets",{params:{path:{slug:s,app_id:a}},signal:t});return n&&(0,w.H4)(n),r}let t0=function(e){let{slug:t,appId:s}=e,{enabled:a=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,C.I)(tJ.list(t,s),e=>{let{signal:a}=e;return tQ({slug:t,appId:s},a)},{enabled:a&&void 0!==t&&void 0!==s,...r})};var t1=s(10208);async function t2(e){let{slug:t,appId:s,secretId:a}=e,{error:r}=await (0,w.yH)("/platform/organizations/{slug}/oauth/apps/{app_id}/client-secrets/{secret_id}",{params:{path:{slug:t,app_id:s,secret_id:a}}});return r&&(0,w.H4)(r),!0}let t4=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,em.jE)();return(0,Y.n)(e=>t2(e),{async onSuccess(t,s,r){let{slug:n,appId:i}=s;await a.invalidateQueries(tJ.list(n,i)),await (null==e?void 0:e(t,s,r))},async onError(e,s,a){void 0===t?B.oR.error("Failed to delete client secret: ".concat(e.message)):t(e,s,a)},...s})},t3=e=>{var t,s,i;let{secret:o,appId:d}=e,{slug:c}=(0,n.g)(),[u,m]=(0,g.useState)(!1),p=(0,D.SE)(r.aG.UPDATE,"oauth_apps"),{data:x}=t0({slug:c,appId:d}),h=1===(null!=(t=null==x?void 0:x.client_secrets)?t:[]).length,{data:y=[]}=(0,I.Q)({slug:c}),f=y.find(e=>e.gotrue_id===o.created_by),j=null!=(i=null!=(s=null==f?void 0:f.username)?s:null==f?void 0:f.primary_email)?i:o.created_by,{mutate:b,isLoading:S}=t4({onSuccess:()=>{B.oR.success("Successfully deleted client secret"),m(!1)}}),A=void 0!==o.client_secret;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,tw.cn)("flex items-center justify-between p-4 border first:rounded-t last:rounded-b",A&&"bg-background-alternative"),children:[(0,a.jsxs)("div",{className:"flex flex-row gap-6 items-center",children:[(0,a.jsx)(t1.A,{size:16,strokeWidth:2,"data-sentry-element":"Key","data-sentry-source-file":"SecretRow.tsx"}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[A&&(0,a.jsx)(tS.A,{size:14,className:"text-brand",strokeWidth:3}),(0,a.jsx)("p",{className:"font-mono text-sm",children:A?o.client_secret:"".concat(o.client_secret_alias).concat("*".repeat(36))}),A&&o.client_secret&&(0,a.jsx)(ek.A,{text:o.client_secret,type:"default",iconOnly:!0})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,a.jsxs)("p",{className:"text-sm text-foreground-lighter",children:["Added ",A?"now":l()(o.created_at).fromNow()," by ",j]}),o.last_used_at&&(0,a.jsxs)("p",{className:"text-sm text-foreground-lighter",children:["Last used ",l()(o.last_used_at).fromNow()]}),!o.last_used_at&&!A&&(0,a.jsx)("p",{className:"text-sm text-foreground-lighter",children:"Never used"})]})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(v.G,{type:"default",className:"w-7",icon:(0,a.jsx)(tE.A,{}),disabled:!d||!p||h,onClick:()=>m(!0),tooltip:{content:{className:"w-64 text-center",side:"bottom",text:p?h?"You must have at least one client secret for the OAuth application to function.":void 0:"You need additional permissions to delete client secrets"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"SecretRow.tsx"})})]}),(0,a.jsx)(ea.A,{visible:u,variant:"destructive",title:"Confirm to delete client secret",confirmLabel:"Delete",confirmLabelLoading:"Deleting",loading:S,onCancel:()=>m(!1),onConfirm:()=>c?d?void b({slug:c,appId:d,secretId:o.id}):console.error("App ID is required"):console.error("Slug is required"),disabled:h,alert:{title:"This action cannot be undone",description:"The client secret will be permanently removed and cannot be recovered."},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"SecretRow.tsx",children:(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:h?"The last client secret cannot be deleted. Please generate a new secret before deleting this one.":"Are you sure you want to delete this client secret?"})})]})},t5=e=>{var t;let{selectedApp:s}=e,{slug:i}=(0,n.g)(),[l,o]=(0,g.useState)(),d=(0,D.SE)(r.aG.UPDATE,"oauth_apps"),{id:c}=null!=s?s:{},{data:u}=t0({slug:i,appId:c}),m=null!=(t=null==u?void 0:u.client_secrets)?t:[],{mutate:p,isLoading:x}=tX({onSuccess:e=>o(e)});return(0,a.jsxs)("div",{className:"flex flex-col gap-4","data-sentry-component":"OAuthSecrets","data-sentry-source-file":"OAuthSecrets.tsx",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm text-foreground",children:"Client secrets"}),(0,a.jsxs)("span",{className:"text-sm text-foreground-light",children:["For handling callbacks in the OAuth 2.0 flow. Learn more"," ",(0,a.jsx)(q.g,{href:"https://supabase.com/docs/guides/integrations/build-a-supabase-integration#handling-the-callback","data-sentry-element":"InlineLink","data-sentry-source-file":"OAuthSecrets.tsx",children:"here"}),"."]})]}),d&&(0,a.jsx)(v.G,{type:"default",disabled:!c||m.length>=5,onClick:()=>i?c?void p({slug:i,appId:c}):console.error("App ID is required"):console.error("Slug is required"),loading:x,tooltip:{content:{side:"bottom",text:m.length>=5?"You can only have up to 5 client secrets":void 0}},children:"Generate new secret"})]}),l&&(0,a.jsxs)(M.Fc,{variant:"default",children:[(0,a.jsx)(z.mo,{}),(0,a.jsx)(M.XL,{children:"Make sure to copy your new client secret now. You won't be able to see it again."})]}),(0,a.jsx)("div",{className:"-space-y-px",children:m.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).map(e=>{let t=(null==l?void 0:l.id)===e.id?{...e,client_secret:l.client_secret}:e;return(0,a.jsx)(t3,{secret:t,appId:c},e.id)})})]})};var t6=s(83759),t8=s(83416);let t9=e=>{let{children:t,scopeName:s,scopes:r,onChange:n}=e;return(0,a.jsx)(tz.hO,{checked:r.includes(s),onCheckedChange:e=>{e?n([...r,s]):n([...r.filter(e=>e!==s)])},"data-sentry-element":"DropdownMenuCheckboxItem","data-sentry-component":"ScopeDropdownCheckboxItem","data-sentry-source-file":"Scopes.tsx",children:t})},t7=e=>{let{title:t,description:s,readScopeName:r,writeScopeName:n,scopes:i,setScopes:l}=e,o="Access: No access";return i.includes(r)&&(o="Access: Read-only"),i.includes(n)&&(o="Access: Write-only"),i.includes(r)&&i.includes(n)&&(o="Access: Read and write"),(0,a.jsxs)("div",{className:"flex flex-row justify-between p-4 border first:rounded-t last:rounded-b gap-x-2","data-sentry-component":"Scope","data-sentry-source-file":"Scopes.tsx",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-foreground text-sm",children:t}),(0,a.jsx)("span",{className:"text-foreground-light text-xs capitalize-sentence",children:s})]}),(0,a.jsxs)(tz.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"Scopes.tsx",children:[(0,a.jsx)(tz.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"Scopes.tsx",children:(0,a.jsx)(P.$,{type:"default",iconRight:(0,a.jsx)(t6.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"Scopes.tsx",children:(0,a.jsx)("p",{children:o})})}),(0,a.jsxs)(tz.SQ,{align:"end",className:"w-40","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"Scopes.tsx",children:[(0,a.jsx)(tz.lp,{"data-sentry-element":"DropdownMenuLabel","data-sentry-source-file":"Scopes.tsx",children:"Select an access level"}),(0,a.jsx)(tz.mB,{"data-sentry-element":"DropdownMenuSeparator","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(t9,{scopeName:r,scopes:i,onChange:l,"data-sentry-element":"ScopeDropdownCheckboxItem","data-sentry-source-file":"Scopes.tsx",children:"Read"}),(0,a.jsx)(t9,{scopeName:n,scopes:i,onChange:l,"data-sentry-element":"ScopeDropdownCheckboxItem","data-sentry-source-file":"Scopes.tsx",children:"Write"})]})]})]},t)},se=e=>{let{scopes:t,setScopes:s}=e;return(0,a.jsxs)("div",{className:"-space-y-px","data-sentry-component":"ScopesPanel","data-sentry-source-file":"Scopes.tsx",children:[(0,a.jsx)(t7,{title:"Analytics",description:t8.R.ANALYTICS,readScopeName:r.gx.ANALYTICS_READ,writeScopeName:r.gx.ANALYTICS_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(t7,{title:"Auth",description:t8.R.AUTH,readScopeName:r.gx.AUTH_READ,writeScopeName:r.gx.AUTH_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(t7,{title:"Database",description:t8.R.DATABASE,readScopeName:r.gx.DATABASE_READ,writeScopeName:r.gx.DATABASE_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(t7,{title:"Domains",description:t8.R.DOMAINS,readScopeName:r.gx.DOMAINS_READ,writeScopeName:r.gx.DOMAINS_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(t7,{title:"Edge Functions",description:t8.R.EDGE_FUNCTIONS,readScopeName:r.gx.EDGE_FUNCTIONS_READ,writeScopeName:r.gx.EDGE_FUNCTIONS_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(t7,{title:"Environment",description:t8.R.ENVIRONMENT,readScopeName:r.gx.ENVIRONMENT_READ,writeScopeName:r.gx.ENVIRONMENT_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(t7,{title:"Organizations",description:t8.R.ORGANIZATIONS,readScopeName:r.gx.ORGANIZATIONS_READ,writeScopeName:r.gx.ORGANIZATIONS_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(t7,{title:"Projects",description:t8.R.PROJECTS,readScopeName:r.gx.PROJECTS_READ,writeScopeName:r.gx.PROJECTS_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(t7,{title:"REST",description:t8.R.REST,readScopeName:r.gx.REST_READ,writeScopeName:r.gx.REST_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(t7,{title:"Secrets",description:t8.R.SECRETS,readScopeName:r.gx.SECRETS_READ,writeScopeName:r.gx.SECRETS_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(t7,{title:"Storage",description:t8.R.STORAGE,readScopeName:r.gx.STORAGE_READ,writeScopeName:r.gx.STORAGE_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"})]})},st=e=>{let{visible:t,selectedApp:s,onClose:r,onCreateSuccess:i}=e,{slug:l}=(0,n.g)(),o=(0,g.useRef)(),{mutate:d}=tG({onSuccess:(e,t)=>{B.oR.success('Successfully created OAuth app "'.concat(t.name,'"!')),r(),i(e),m(!1)},onError:e=>{B.oR.error("Failed to create OAuth application: ".concat(e.message)),m(!1)}}),{mutate:c}=tB({onSuccess:(e,t)=>{B.oR.success('Successfully updated OAuth app "'.concat(t.name,'"!')),r(),m(!1)},onError:e=>{B.oR.error("Failed to update OAuth application: ".concat(e.message)),m(!1)}}),[u,m]=(0,g.useState)(!1),[p,x]=(0,g.useState)(!1),[h,y]=(0,g.useState)(),[f,j]=(0,g.useState)(),[b,v]=(0,g.useState)({}),[S,A]=(0,g.useState)([{id:(0,tq.gZ)(),value:""}]),[_,N]=(0,g.useState)([]);(0,g.useEffect)(()=>{if(t)if(v({}),m(!1),y(void 0),void 0!==s){var e,a,r;A(null!=(a=null==(e=s.redirect_uris)?void 0:e.map(e=>({id:(0,tq.gZ)(),value:e})))?a:[]),N(null!=(r=null==s?void 0:s.scopes)?r:[]),j(null===s.icon?void 0:s.icon)}else A([{id:(0,tq.gZ)(),value:""}]),N([]),j(void 0)},[t,s]);let C=(e,t)=>{A(S.map(s=>s.id===e?{id:e,value:t}:s)),v({})},w=e=>{A(S.filter(t=>t.id!==e))},E=async e=>{e.persist();let[t]=e.target.files||e.dataTransfer.items;y(t),j(URL.createObjectURL(t)),e.target.value=""},R=async e=>{if(!l)return console.error("Slug is required");let t=S.filter(e=>e.value.length>0).map(e=>e.value);if(0===t.length)return void v({urls:"Please provide at least one URL"});v({}),m(!0);let{name:a,website:r}=e,n=void 0!==h?await tW("oauth-app-icons","".concat(l,"/").concat((0,tq.gZ)(),".png"),h):f;void 0===s?d({slug:l,name:a,website:r,redirect_uris:t,scopes:_,icon:n}):c({id:s.id,slug:l,name:a,website:r,redirect_uris:t,scopes:_,icon:n})};return(0,a.jsx)(tV.Ay,{hideFooter:!0,size:"large",visible:t,header:void 0!==s?"Update OAuth application":"Publish a new OAuth application",onCancel:()=>r(),"data-sentry-element":"SidePanel","data-sentry-component":"PublishAppSidePanel","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(ef.A,{validateOnBlur:!0,className:"h-full",initialValues:{name:"",website:""},validate:e=>{let t={};return e.name||(t.name="Please provide a name for your application"),e.website||(t.website="Please provide a URL for your site"),(0,tq.U8)(e.website)||(t.website="Please provide a valid URL for your site"),t},onSubmit:R,"data-sentry-element":"Form","data-sentry-source-file":"index.tsx",children:e=>{let{resetForm:n,values:i}=e;return(0,g.useEffect)(()=>{if(t&&void 0!==s){let e={name:s.name,website:s.website};n({values:e,initialValues:e})}},[t,s]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)(tV.Ay.Content,{children:(0,a.jsxs)("div",{className:"py-4 flex items-start justify-between gap-10",children:[(0,a.jsxs)("div",{className:"space-y-4 w-full",children:[(0,a.jsx)(ej.A,{id:"name",label:"Application name",descriptionText:(null==s?void 0:s.id)&&"ID: ".concat(s.id)}),(0,a.jsx)(ej.A,{id:"website",label:"Website URL",placeholder:"https://my-website.com"})]}),(0,a.jsxs)("div",{children:[void 0!==f?(0,a.jsx)("div",{className:(0,tw.cn)("shadow transition group relative","bg-center bg-cover bg-no-repeat","mt-4 mr-4 space-y-2 rounded-full h-[120px] w-[120px] flex flex-col items-center justify-center"),style:{backgroundImage:f?'url("'.concat(f,'")'):"none"},children:(0,a.jsx)("div",{className:"absolute bottom-1 right-1",children:(0,a.jsxs)(tz.rI,{children:[(0,a.jsx)(tz.ty,{asChild:!0,children:(0,a.jsx)(P.$,{type:"default",className:"px-1",children:(0,a.jsx)(tM.A,{})})}),(0,a.jsxs)(tz.SQ,{align:"end",side:"bottom",children:[(0,a.jsx)(tz._2,{onClick:()=>{o.current&&o.current.click()},children:(0,a.jsx)("p",{children:"Upload image"})},"upload"),(0,a.jsx)(tz._2,{onClick:()=>{y(void 0),j(void 0)},children:(0,a.jsx)("p",{children:"Remove image"})},"remove")]})]})})}):(0,a.jsxs)("div",{className:(0,tw.cn)("border border-strong transition opacity-75 hover:opacity-100","mt-4 mr-4 space-y-2 rounded-full h-[120px] w-[120px] flex flex-col items-center justify-center cursor-pointer"),onClick:()=>{o.current&&o.current.click()},children:[(0,a.jsx)(tF.A,{size:18,strokeWidth:1.5,className:"text-foreground"}),(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:"Upload logo"})]}),(0,a.jsx)("input",{multiple:!0,type:"file",ref:o,className:"hidden",accept:"image/png, image/jpeg",onChange:E})]})]})}),(0,a.jsx)(tV.Ay.Separator,{}),(0,a.jsxs)(tV.Ay.Content,{className:"py-4",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-foreground text-sm",children:"Authorization callback URLs"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"All URLs must use HTTPS, except for localhost"})]}),(0,a.jsx)(P.$,{type:"default",onClick:()=>A(S.concat({id:(0,tq.gZ)(),value:""})),children:"Add URL"})]}),(0,a.jsxs)("div",{className:"space-y-2 pb-2",children:[S.map(e=>(0,a.jsx)(ej.A,{value:e.value,onChange:t=>C(e.id,t.target.value),placeholder:"e.g https://my-website.com",actions:[S.length>1?(0,a.jsx)(P.$,{type:"default",onClick:()=>w(e.id),children:"Remove"},"remove-url"):null]},e.id)),b.urls&&(0,a.jsx)("p",{className:"text-red-900 text-sm",children:b.urls})]})]}),void 0!==s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tV.Ay.Separator,{}),(0,a.jsx)(tV.Ay.Content,{className:"py-4",children:(0,a.jsx)(t5,{selectedApp:s})})]}),(0,a.jsx)(tV.Ay.Separator,{}),(0,a.jsxs)("div",{className:"p-6 ",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between space-x-4 pb-4",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm text-foreground",children:"Application permissions"}),(0,a.jsx)("span",{className:"text-sm text-foreground-light",children:"The application permissions are organized in scopes and will be presented to the user when adding an app to their organization and all of its projects."})]}),(0,a.jsx)(ts.A,{href:"https://supabase.com/docs/guides/platform/oauth-apps/oauth-scopes"})]}),(0,a.jsx)(se,{scopes:_,setScopes:N})]})]}),(0,a.jsx)(tV.Ay.Separator,{}),(0,a.jsx)(tV.Ay.Content,{children:(0,a.jsxs)("div",{className:"pt-2 pb-3 flex items-center justify-between",children:[(0,a.jsx)(P.$,{type:"default",onClick:()=>x(!0),disabled:0===i.name.length||0===i.website.length,children:"Preview consent for users"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(P.$,{type:"default",disabled:u,onClick:()=>r(),children:"Cancel"}),(0,a.jsx)(P.$,{htmlType:"submit",loading:u,disabled:u,children:"Confirm"})]})]})})]}),(0,a.jsxs)(ey.A,{hideFooter:!0,className:"!max-w-[600px]",visible:p,onCancel:()=>x(!1),children:[(0,a.jsx)(ey.A.Content,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{children:["Authorize API access for ",i.name]}),(0,a.jsx)(tZ.E,{variant:"brand",children:"Preview"})]})}),(0,a.jsx)(ey.A.Separator,{}),(0,a.jsxs)(ey.A.Content,{children:[(0,a.jsx)(t$.O,{icon:f||null,name:i.name,domain:i.website,scopes:_}),(0,a.jsxs)("div",{className:"pt-4 space-y-2",children:[(0,a.jsx)("p",{className:"prose text-sm",children:"Select an organization to grant API access to"}),(0,a.jsx)("div",{className:"border border-control text-foreground-light rounded px-4 py-2 text-sm bg-surface-200",children:"Organizations that you have access to will be listed here"})]})]}),(0,a.jsx)(ey.A.Separator,{}),(0,a.jsx)(ey.A.Content,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"prose text-xs",children:"This is what your users will see when authorizing with your app"}),(0,a.jsx)(P.$,{type:"default",onClick:()=>x(!1),children:"Close"})]})})]})]})}})})};async function ss(e){let{id:t,slug:s}=e;if(!t)throw Error("App ID is required");if(!s)throw Error("Organization slug is required");let{data:a,error:r}=await (0,w.bE)("/platform/organizations/{slug}/oauth/apps/{id}/revoke",{params:{path:{slug:s,id:t}}});return r&&(0,w.H4)(r),a}let sa=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,em.jE)();return(0,Y.n)(e=>ss(e),{async onSuccess(t,s,r){let{slug:n}=s;await a.invalidateQueries(t_.R.authorizedApps(n)),await (null==e?void 0:e(t,s,r))},async onError(e,s,a){void 0===t?B.oR.error("Failed to revoke application: ".concat(e.message)):t(e,s,a)},...s})},sr=e=>{let{selectedApp:t,onClose:s}=e,{slug:r}=(0,n.g)(),{mutate:i,isLoading:l}=sa({onSuccess:()=>{B.oR.success('Successfully revoked the app "'.concat(null==t?void 0:t.name,'"')),s()}}),o=async()=>r?(null==t?void 0:t.id)?void i({slug:r,id:null==t?void 0:t.id}):console.error("App ID is required"):console.error("Slug is required");return(0,a.jsxs)(ey.A,{size:"medium",alignFooter:"right",header:"Confirm to revoke ".concat(null==t?void 0:t.name),visible:void 0!==t,loading:l,onCancel:s,onConfirm:o,"data-sentry-element":"Modal","data-sentry-component":"RevokeAppModal","data-sentry-source-file":"RevokeAppModal.tsx",children:[(0,a.jsx)(ey.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"RevokeAppModal.tsx",children:(0,a.jsx)(el.Z,{type:"warning",title:"This action cannot be undone",description:"".concat(null==t?void 0:t.name," application will no longer have access to your organization's settings\n          and projects."),"data-sentry-element":"Admonition","data-sentry-source-file":"RevokeAppModal.tsx"})}),(0,a.jsx)(ey.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"RevokeAppModal.tsx",children:(0,a.jsx)("ul",{className:"space-y-5",children:(0,a.jsxs)("li",{className:"flex gap-3 text-sm",children:[(0,a.jsx)(tI.A,{size:14,className:"flex-shrink-0","data-sentry-element":"Lock","data-sentry-source-file":"RevokeAppModal.tsx"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Before you remove this app, consider:"}),(0,a.jsx)("ul",{className:"space-y-2 mt-2",children:(0,a.jsx)("li",{className:"list-disc ml-4",children:"No users are currently using this application. The application will no longer have access to your organization after being revoked."})})]})]})})})]})},sn=()=>{var e,t,s,i;let{slug:l}=(0,n.g)(),[o,d]=(0,g.useState)(!1),[c,u]=(0,g.useState)(),[m,p]=(0,g.useState)(),[x,h]=(0,g.useState)(),[y,S]=(0,g.useState)(),N=(0,D.SE)(r.aG.READ,"approved_oauth_apps"),C=(0,D.SE)(r.aG.CREATE,"approved_oauth_apps"),{data:w,error:E,isLoading:R,isSuccess:T,isError:I}=tC({slug:l},{enabled:N}),k=null==w?void 0:w.sort((e,t)=>{var s,a;return Number(new Date(null!=(s=e.created_at)?s:""))-Number(new Date(null!=(a=t.created_at)?a:""))}),{data:O,isLoading:M,isSuccess:z,isError:L}=(0,tA.n)({slug:l}),F=null==O?void 0:O.sort((e,t)=>Number(new Date(e.authorized_at))-Number(new Date(t.authorized_at)));return N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(f.Vw,{"data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"OAuthApps.tsx",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Published Apps"}),(0,a.jsx)("p",{className:"text-foreground-light text-sm",children:"Build integrations that extend Supabase's functionality"})]}),(0,a.jsx)(v.G,{disabled:!C,type:"primary",onClick:()=>d(!0),tooltip:{content:{side:"bottom",text:C?void 0:"You need additional permissions to create apps"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"OAuthApps.tsx",children:"Add application"})]}),R&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(_.A,{}),(0,a.jsx)(_.A,{className:"w-3/4"}),(0,a.jsx)(_.A,{className:"w-1/2"})]}),I&&(0,a.jsx)(b.A,{error:E,subject:"Failed to retrieve published OAuth apps"}),void 0!==c&&(0,a.jsxs)("div",{className:(0,tw.cn)("flex items-center justify-between p-4 px-6 border first:rounded-t last:rounded-b","bg-background-alternative","rounded"),children:[(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsx)(P.$,{type:"text",icon:(0,a.jsx)(tv.A,{size:18}),className:"px-1",onClick:()=>u(void 0)})}),(0,a.jsxs)("div",{className:"w-full space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(tS.A,{size:14,className:"text-brand",strokeWidth:3}),(0,a.jsx)("p",{className:"text-sm",children:"You've created your new OAuth application."})]}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Ensure that you store the client secret securely - you will not be able to see it again."})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Client ID"}),(0,a.jsx)("p",{className:"font-mono text-sm",children:c.client_id}),(0,a.jsx)(ek.A,{text:c.client_id,type:"default",iconOnly:!0})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Client Secret"}),(0,a.jsx)("p",{className:"font-mono text-sm",children:c.client_secret}),(0,a.jsx)(ek.A,{text:c.client_secret,type:"default",iconOnly:!0})]})]})]})]}),T&&(0,a.jsx)(a.Fragment,{children:(null!=(e=null==w?void 0:w.length)?e:0)===0?(0,a.jsx)("div",{className:"bg-surface-100 border rounded p-4 flex items-center justify-between mt-4",children:(0,a.jsx)("p",{className:"prose text-sm",children:"You do not have any published applications yet"})}):(0,a.jsx)(j.A,{head:[(0,a.jsx)(j.A.th,{className:"w-[30px]"},"icon"),(0,a.jsx)(j.A.th,{children:"Name"},"name"),(0,a.jsx)(j.A.th,{children:"Client ID"},"client-id"),(0,a.jsx)(j.A.th,{children:"Created at"},"created-at"),(0,a.jsx)(j.A.th,{},"delete-action")],body:null!=(t=null==k?void 0:k.map(e=>(0,a.jsx)(tL,{app:e,onSelectEdit:()=>{d(!0),p(e)},onSelectDelete:()=>h(e)},e.id)))?t:[]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Authorized Apps"}),(0,a.jsx)("p",{className:"text-foreground-light text-sm",children:"Applications that have access to your organization's settings and projects"}),(0,a.jsxs)("div",{className:"mt-4",children:[M&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(_.A,{}),(0,a.jsx)(_.A,{className:"w-3/4"}),(0,a.jsx)(_.A,{className:"w-1/2"})]}),L&&(0,a.jsx)(b.A,{subject:"Failed to retrieve authorized apps"}),z&&(0,a.jsx)(a.Fragment,{children:(null!=(s=O.length)?s:0)===0?(0,a.jsx)("div",{className:"bg-surface-100 border rounded p-4 flex items-center justify-between",children:(0,a.jsx)("p",{className:"prose text-sm",children:"You do not have any authorized applications yet"})}):(0,a.jsx)(j.A,{className:"mt-4",head:[(0,a.jsx)(j.A.th,{className:"w-[30px]"},"icon"),(0,a.jsx)(j.A.th,{children:"Name"},"name"),(0,a.jsx)(j.A.th,{children:"Created by"},"created-by"),(0,a.jsx)(j.A.th,{children:"App ID"},"app-id"),(0,a.jsx)(j.A.th,{children:"Authorized at"},"authorized-at"),(0,a.jsx)(j.A.th,{},"delete-action")],body:null!=(i=null==F?void 0:F.map(e=>(0,a.jsx)(tT,{app:e,onSelectRevoke:()=>S(e)},e.id)))?i:[]})})]})]})]}),(0,a.jsx)(st,{visible:o,selectedApp:m,onClose:()=>{p(void 0),d(!1)},onCreateSuccess:u,"data-sentry-element":"PublishAppSidePanel","data-sentry-source-file":"OAuthApps.tsx"}),(0,a.jsx)(tD,{selectedApp:x,onClose:()=>h(void 0),"data-sentry-element":"DeleteAppModal","data-sentry-source-file":"OAuthApps.tsx"}),(0,a.jsx)(sr,{selectedApp:y,onClose:()=>S(void 0),"data-sentry-element":"RevokeAppModal","data-sentry-source-file":"OAuthApps.tsx"})]}):(0,a.jsx)(f.Vw,{children:(0,a.jsx)(A.A,{resourceText:"view OAuth apps"})})};var si=s(45222),sl=s(56885),so=s(55162),sd=s(24344),sc=s(74239),su=s(1715),sm=s(54096);let sp=e=>{let{title:t,description:s}=e;return(0,a.jsx)("div",{className:"mx-auto flex flex-col gap-10 py-14","data-sentry-component":"SectionHeader","data-sentry-source-file":"SectionHeader.tsx",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xl",children:t}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:s})]})})};var sx=s(41635),sh=s(92818),sg=s(13290),sy=s(33419);let sf=e=>{let{section:t,includedInPlan:s,children:r}=e,{name:n,description:i,links:l}=t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"SectionContent.tsx",children:(0,a.jsx)("div",{className:"mx-auto flex flex-col gap-10 py-8 md:py-16",children:(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,a.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,a.jsxs)("div",{className:"sticky top-32 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-base capitalize",children:n}),!1===s&&(0,a.jsx)(tZ.E,{children:"Not included"})]}),(0,a.jsx)("div",{className:"grid gap-4",children:i.split("\n").map((e,t)=>(0,a.jsx)("p",{className:"text-sm text-foreground-light pr-8",children:e},"desc-".concat(t)))})]}),l&&l.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-foreground mb-2",children:"More information"}),l.map(e=>(0,a.jsx)("div",{children:(0,a.jsx)(h(),{href:e.url,target:"_blank",rel:"noreferrer",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 opacity-50 hover:opacity-100 transition",children:[(0,a.jsx)("p",{className:"text-sm",children:e.name}),(0,a.jsx)(G.A,{size:16,strokeWidth:1.5})]})})},e.url))]})]})}),(0,a.jsx)("div",{className:"col-span-12 lg:col-span-7 space-y-6",children:r})]})})}),(0,a.jsx)(f.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"SectionContent.tsx"})]})},sj=(e,t,s)=>{var a;return t?(null==t||null==(a=t.plan)?void 0:a.id)==="pro"&&(null==t?void 0:t.usage_billing_enabled)===!1?"/org/".concat(e,"/billing#cost-control"):"/org/".concat(e,"/billing?panel=subscriptionPlan&source=usage").concat(s):"/org/".concat(e,"/billing")},sb=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}),sv=(e,t)=>{if("string"==typeof e)return e;if("bytes"===t){let t=s_(e).replace(/\s/g,"");return"0bytes"===t?"0":t}return"gigabytes"===t?sb.format(e)+"GB":sb.format(e)},sS=(e,t)=>{if("string"==typeof e)return e;if("bytes"===t){let t=sN(e).replace(/\s/g,"");return"0bytes"===t?"0":t}return"gigabytes"===t?sb.format(e)+"GB":sb.format(e)},sA=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s_=e=>{if(0===e||void 0===e)return"0 bytes";let t=Math.floor(Math.log(e)/Math.log(1024)),s=sA[t],a=2;return["bytes","KB","MB"].includes(s)?a=0:["GB"].includes(s)&&(a=1),parseFloat((e/Math.pow(1024,t)).toFixed(a))+" "+s},sN=e=>{if(0===e||void 0===e)return"0 bytes";let t=Math.floor(Math.log(e)/Math.log(1024)),s=sA[t];return parseFloat((e/Math.pow(1024,t)).toFixed(3))+" "+s};var sC=s(55613);let sw=e=>{var t,s,r,n,i,l,o,d,c,u,m,p,x;let{slug:y,projectRef:f,attribute:j,usage:v,usageMeta:S,chartMeta:A,subscription:N,error:C,isLoading:w,isError:E,isSuccess:R,currentBillingCycleSelected:T}=e,I=sj(null!=y?y:"",N,j.key),k=(null!=(r=null==S?void 0:S.usage)?r:0)/(null!=(n=null==S?void 0:S.pricing_free_units)?n:0),O=(null!=(i=null==S?void 0:S.usage)?i:0)-(null!=(l=null==S?void 0:S.pricing_free_units)?l:0),D=null==N?void 0:N.usage_billing_enabled,M=D?"text-amber-900":"text-red-900",z=(0,g.useMemo)(()=>{var e,t;return null!=(t=null==(e=A[j.key])?void 0:e.data)?t:[]},[j.key,A]),L=void 0===f&&T&&!1===D&&k>=e0.xx,F=(0,g.useMemo)(()=>{var e,t;return null!=(t=null==(e=j.attributes)?void 0:e.map(e=>z.some(t=>0!==Number(t[e.key]))).some(e=>!!e))&&t},[j.attributes,z]);return(0,a.jsx)("div",{id:j.anchor,className:"scroll-my-12","data-sentry-component":"AttributeUsage","data-sentry-source-file":"AttributeUsage.tsx",children:(0,a.jsxs)(sf,{section:j,"data-sentry-element":"SectionContent","data-sentry-source-file":"AttributeUsage.tsx",children:[w&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(_.A,{}),(0,a.jsx)(_.A,{className:"w-3/4"}),(0,a.jsx)(_.A,{className:"w-1/2"})]}),E&&(0,a.jsx)(b.A,{subject:"Failed to retrieve usage data",error:C}),R&&(0,a.jsx)(a.Fragment,{children:!S||(null==S?void 0:S.available_in_plan)?(0,a.jsxs)(a.Fragment,{children:[!f&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("p",{className:"text-sm",children:[j.name," usage"]}),L&&(0,a.jsxs)(eq.m_,{children:[(0,a.jsx)(eq.k$,{asChild:!0,children:k>=1?(0,a.jsxs)("div",{className:"flex items-center space-x-2 min-w-[115px] cursor-help",children:[(0,a.jsx)(sh.A,{size:14,strokeWidth:2,className:M}),(0,a.jsx)("p",{className:"text-sm ".concat(M),children:"Exceeded limit"})]}):k>=e0.xx&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 min-w-[115px] cursor-help",children:[(0,a.jsx)(sh.A,{size:14,strokeWidth:2,className:"text-amber-900"}),(0,a.jsx)("p",{className:"text-sm text-amber-900",children:"Approaching limit"})]})}),(0,a.jsxs)(eq.ZI,{side:"bottom",children:[(0,a.jsx)("p",{children:"Exceeding your plans included usage will lead to restrictions to your project."}),(0,a.jsx)("p",{children:"Upgrade to a usage-based plan or disable the spend cap to avoid restrictions."})]})]})]})}),T&&S&&!S.unlimited&&(0,a.jsx)(sy.A,{type:"horizontal",barClass:(0,tw.cn)(k>=1?D?"bg-foreground-light":"bg-red-900":!1===D&&k>=e0.xx?"bg-amber-900":"bg-foreground-light"),bgClass:"bg-surface-300",value:null!=(o=null==S?void 0:S.usage)?o:0,max:(null==S?void 0:S.pricing_free_units)||1}),(0,a.jsxs)("div",{children:[S&&(0,a.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,a.jsxs)("p",{className:"text-xs text-foreground-light",children:["Included in ",null==N||null==(t=N.plan)?void 0:t.name," Plan"]}),S.unlimited?(0,a.jsx)("p",{className:"text-xs",children:"Unlimited"}):(0,a.jsx)("p",{className:"text-xs",children:"bytes"===j.unit||"gigabytes"===j.unit?"".concat(null!=(d=S.pricing_free_units)?d:0," GB"):(null!=(c=S.pricing_free_units)?c:0).toLocaleString()})]}),T&&S&&(0,a.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,a.jsxs)("p",{className:"text-xs text-foreground-light",children:[j.chartPrefix||"Used "," in period"]}),(0,a.jsx)("p",{className:"text-xs",children:"bytes"===j.unit||"gigabytes"===j.unit?"".concat((null!=(u=null==S?void 0:S.usage)?u:0).toFixed(2)," GB"):(null!=(m=null==S?void 0:S.usage)?m:0).toLocaleString()})]}),T&&(null!=(p=null==S?void 0:S.pricing_free_units)?p:0)>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between border-t py-1",children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:"Overage in period"}),(0,a.jsx)("p",{className:"text-xs",children:(null!=(x=null==S?void 0:S.pricing_free_units)?x:0)===-1||O<0?"0".concat("bytes"===j.unit||"gigabytes"===j.unit?" GB":""):"bytes"===j.unit||"gigabytes"===j.unit?"".concat(O.toFixed(2)," GB"):O.toLocaleString()})]})]})]}),null==(s=j.additionalInfo)?void 0:s.call(j,v),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-sm",children:[j.chartPrefix||""," ",j.name," ",j.chartSuffix||"per day"]}),j.chartDescription.split("\n").map((e,t)=>(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:e},"para-".concat(t)))]}),A[j.key].isLoading?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(_.A,{}),(0,a.jsx)(_.A,{className:"w-3/4"}),(0,a.jsx)(_.A,{className:"w-1/2"})]}):z.length>0&&F?(0,a.jsx)(sC.A,{name:"".concat(j.chartPrefix||""," ").concat(j.name),unit:j.unit,attributes:j.attributes,data:z,yLeftMargin:A[j.key].margin,yFormatter:e=>sv(e,j.unit),tooltipFormatter:e=>sS(e,j.unit)}):(0,a.jsx)(tn.A,{children:(0,a.jsx)(tn.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(sg.A,{className:"text-foreground-light mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"No data in period"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"May take up to 24 hours to show"})]})})})]}):(0,a.jsx)(tn.A,{children:(0,a.jsx)(tn.A.Content,{children:(0,a.jsxs)("div",{className:"flex w-full items-center flex-col justify-center space-y-2 md:flex-row md:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm",children:"Not included in plan"}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"You need to be on a higher plan in order to use this feature."})})]}),(0,a.jsx)(P.$,{type:"primary",asChild:!0,children:(0,a.jsx)(h(),{href:I,children:"Upgrade plan"})})]})})})})]})})};var sE=s(34926);async function sR(e,t){let{orgSlug:s}=e;if(!s)throw Error("orgSlug is required");let{data:a,error:r}=await (0,w.Jt)("/platform/organizations/{slug}/projects",{params:{path:{slug:s}},signal:t});return r&&(0,w.H4)(r),a}let sT=function(e){let{orgSlug:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,C.I)(sE.g.orgProjects(t),e=>{let{signal:s}=e;return sR({orgSlug:t},s)},{enabled:s&&void 0!==t,...a})};var sI=s(79050),sk=s(81750);let sO=e=>{var t,s;let{slug:r,projectRef:n,attribute:i,subscription:l,usage:o,currentBillingCycleSelected:d}=e,{data:c,isError:u,isLoading:m,isSuccess:p,error:x}=sT({orgSlug:r},{enabled:d}),y=(0,g.useMemo)(()=>c?c.projects.filter(e=>{let t=e.is_branch&&e.databases.some(e=>{var t;return(null!=(t=e.disk_volume_size_gb)?t:8)>8}),s=e.status!==e0.BU.INACTIVE,a=e.databases.every(e=>"AWS"===e.cloud_provider);return(!e.is_branch||t)&&s&&a}).filter(e=>e.ref===n||!n):[],[c,n]),f=(0,g.useMemo)(()=>y.some(e=>e.databases.some(e=>"READ_REPLICA"===e.type||e.disk_volume_size_gb&&e.disk_volume_size_gb>8)),[y]),j=null==o?void 0:o.usages.find(e=>e.metric===su.Lb.DISK_SIZE_GB_HOURS_GP3),v=null==o?void 0:o.usages.find(e=>e.metric===su.Lb.DISK_SIZE_GB_HOURS_IO2);return(0,a.jsx)("div",{id:i.anchor,className:"scroll-my-12","data-sentry-component":"DiskUsage","data-sentry-source-file":"DiskUsage.tsx",children:(0,a.jsxs)(sf,{section:i,"data-sentry-element":"SectionContent","data-sentry-source-file":"DiskUsage.tsx",children:[m&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(_.A,{}),(0,a.jsx)(_.A,{className:"w-3/4"}),(0,a.jsx)(_.A,{className:"w-1/2"})]}),u&&(0,a.jsx)(b.A,{subject:"Failed to retrieve usage data",error:x}),p&&(0,a.jsxs)("div",{className:"space-y-4",children:[d&&(null==l?void 0:l.usage_billing_enabled)===!1&&f&&(0,a.jsxs)(M.Fc,{variant:"warning",children:[(0,a.jsx)(z.HV,{}),(0,a.jsx)(M.XL,{children:"Projects exceeding quota"}),(0,a.jsx)(M.TN,{children:"You have projects that are exceeding 8 GB of provisioned disk size, but do not allow any overages with the Spend Cap on. Reduce the disk size or disable the spend cap."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("p",{className:"text-sm",children:[i.name," usage"]})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,a.jsxs)("p",{className:"text-xs text-foreground-light",children:["Included in ",null==l||null==(t=l.plan)?void 0:t.name," Plan"]}),(0,a.jsx)("p",{className:"text-xs",children:"8 GB GP3 disk per project"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:"Overages in period"}),(0,a.jsxs)("p",{className:"text-xs",children:[(null!=(s=null==j?void 0:j.usage)?s:0).toLocaleString()," GP3 GB-Hrs",(null==v?void 0:v.usage)?" / ".concat(v.usage.toLocaleString()," IO2 GB-Hrs"):""]})]})]}),d?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm",children:"Current disk size per project"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Breakdown of disk per project. Head to your project's disk management section to see database size used."})]}),0===y.length&&(0,a.jsx)(tn.A,{children:(0,a.jsx)(tn.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-sm",children:"No active projects"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"You don't have any active projects in this organization."})]})})}),y.map((e,t)=>{let s=e.databases.filter(e=>"PRIMARY"===e.type).reduce((e,t)=>{var s;return e+(null!=(s=t.disk_volume_size_gb)?s:8)},0),r=e.databases.filter(e=>"PRIMARY"!==e.type),n=r.reduce((e,t)=>{var s;return e+(null!=(s=t.disk_volume_size_gb)?s:8)},0);return(0,a.jsxs)("div",{className:t!==y.length-1?"border-b pb-2":"",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-foreground-light flex items-center gap-2",children:e.name}),(0,a.jsx)(P.$,{asChild:!0,type:"default",size:"tiny",children:(0,a.jsx)(h(),{href:"/project/".concat(e.ref,"/settings/compute-and-disk"),children:"Manage Disk"})})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex items-center h-6 gap-3",children:[(0,a.jsxs)("span",{className:"text-foreground-light text-sm font-mono flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-foreground font-semibold -mt-[2px]",children:(0,a.jsx)(sI.Ay,{value:s+n,style:{lineHeight:.8},className:"font-mono"})})," ","GB Disk provisioned"]}),(0,a.jsxs)(sk.I,{side:"top",children:[(0,a.jsxs)("p",{children:[s," GB for Primary Database"]}),r.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[n," GB for ",r.length," Read"," ",1===r.length?"Replica":"Replicas"]}),(0,a.jsx)("p",{className:"mt-1",children:"Read replicas have their own disk and use 25% more disk to account for WAL files."})]})]})]})})]},"usage-project-".concat(e.ref))})]}):(0,a.jsx)(tn.A,{children:(0,a.jsx)(tn.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-sm",children:"Data not available"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Switch to current billing cycle to see current disk size per project."})]})})})]})]})})},sD=e=>{var t;let{attribute:s,subscription:r,usage:n,currentBillingCycleSelected:i}=e,l=(0,g.useMemo)(()=>null==n?void 0:n.usages.find(e=>e.metric===su.Lb.DATABASE_SIZE),[n]),o=(0,g.useMemo)(()=>null==l?void 0:l.project_allocations.some(e=>e.usage>.5*1e9),[l]);return(0,a.jsx)("div",{id:s.anchor,className:"scroll-my-12","data-sentry-component":"DatabaseSizeUsage","data-sentry-source-file":"DatabaseSizeUsage.tsx",children:(0,a.jsx)(sf,{section:s,"data-sentry-element":"SectionContent","data-sentry-source-file":"DatabaseSizeUsage.tsx",children:(0,a.jsxs)("div",{className:"space-y-4",children:[i&&o&&(0,a.jsxs)(M.Fc,{variant:"warning",children:[(0,a.jsx)(z.HV,{}),(0,a.jsx)(M.XL,{children:"Projects exceeding quota"}),(0,a.jsx)(M.TN,{children:"You have projects that are exceeding 0.5 GB of database size. Reduce the database size or upgrade to a paid plan."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("p",{className:"text-sm",children:[s.name," usage"]})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,a.jsxs)("p",{className:"text-xs text-foreground-light",children:["Included in ",null==r||null==(t=r.plan)?void 0:t.name," Plan"]}),(0,a.jsx)("p",{className:"text-xs",children:"0.5 GB per project"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:"Max database size"}),(0,a.jsx)("p",{className:"text-xs",children:(null==l?void 0:l.usage)?(0,tq.z3)(null==l?void 0:l.usage_original):"-"})]})]}),i?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"space-y-1",children:(0,a.jsx)("p",{className:"text-sm",children:"Current database size per project"})}),(null==l?void 0:l.project_allocations.length)===0&&(0,a.jsx)(tn.A,{children:(0,a.jsx)(tn.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-sm",children:"No active projects"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"You don't have any active projects in this organization."})]})})}),null==l?void 0:l.project_allocations.map((e,t)=>(0,a.jsxs)("div",{className:t!==l.project_allocations.length-1?"border-b pb-2":"",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-foreground-light flex items-center gap-2",children:e.name}),(0,a.jsx)(P.$,{asChild:!0,type:"default",size:"tiny",children:(0,a.jsx)(h(),{href:"/project/".concat(e.ref,"/reports/database#database-size-report"),children:"Manage Database Size"})})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex items-center h-6 gap-3",children:[(0,a.jsxs)("span",{className:"text-foreground-light text-sm font-mono flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-foreground font-semibold font-mono -mt-[2px]",children:(0,tq.z3)(e.usage)})," ","Database Size"]}),(0,a.jsx)(sk.I,{side:"top",children:(0,a.jsxs)("p",{children:[(0,tq.z3)(e.usage)," GB database size as reported by Postgres."]})})]})})]},"usage-project-".concat(e.ref)))]}):(0,a.jsx)(tn.A,{children:(0,a.jsx)(tn.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-sm",children:"Data not available"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Switch to current billing cycle to see current database size per project."})]})})})]})})})},sP=e=>{let{orgSlug:t,projectRef:s,categoryKey:r,chartMeta:n,subscription:i,currentBillingCycleSelected:l}=e,{data:o,error:d,isLoading:c,isError:u,isSuccess:m}=(0,sm.n)({orgSlug:t}),p=(0,sx.rj)(i).find(e=>e.key===r);return p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"UsageSection.tsx",children:(0,a.jsx)(sp,{title:p.name,description:p.description,"data-sentry-element":"SectionHeader","data-sentry-source-file":"UsageSection.tsx"})}),(0,a.jsx)(f.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"UsageSection.tsx"}),p.attributes.map(e=>"diskSize"===e.key?(0,a.jsx)(sO,{slug:t,projectRef:s,attribute:e,subscription:i,currentBillingCycleSelected:l,usage:o},e.name):e.key===su.Lb.DATABASE_SIZE?(0,a.jsx)(sD,{slug:t,projectRef:s,attribute:e,subscription:i,currentBillingCycleSelected:l,usage:o},e.name):(0,a.jsx)(sw,{slug:t,projectRef:s,attribute:e,usage:o,usageMeta:null==o?void 0:o.usages.find(t=>t.metric===e.key),chartMeta:n,subscription:i,error:d,isLoading:c,isError:u,isSuccess:m,currentBillingCycleSelected:l},e.name))]}):null},sM=e=>{var t,s,r,n,i,l;let{orgSlug:o,projectRef:d,subscription:c,startDate:u,endDate:m,currentBillingCycleSelected:p}=e,{data:x,isLoading:h}=(0,su.Ym)({orgSlug:o,projectRef:d,metric:su.Lb.MONTHLY_ACTIVE_USERS,interval:"1d",startDate:u,endDate:m}),{data:g,isLoading:y}=(0,su.Ym)({orgSlug:o,projectRef:d,metric:su.Lb.MONTHLY_ACTIVE_SSO_USERS,interval:"1d",startDate:u,endDate:m}),{data:f,isLoading:j}=(0,su.Ym)({orgSlug:o,projectRef:d,metric:su.Lb.STORAGE_IMAGES_TRANSFORMED,interval:"1d",startDate:u,endDate:m}),{data:b,isLoading:v}=(0,su.Ym)({orgSlug:o,projectRef:d,metric:su.Lb.FUNCTION_INVOCATIONS,interval:"1d",startDate:u,endDate:m}),{data:S,isLoading:A}=(0,su.Ym)({orgSlug:o,projectRef:d,metric:su.Lb.REALTIME_MESSAGE_COUNT,interval:"1d",startDate:u,endDate:m}),{data:_,isLoading:N}=(0,su.Ym)({orgSlug:o,projectRef:d,metric:su.Lb.REALTIME_PEAK_CONNECTIONS,interval:"1d",startDate:u,endDate:m}),C={[su.Lb.MONTHLY_ACTIVE_USERS]:{data:null!=(t=null==x?void 0:x.data)?t:[],margin:18,isLoading:h},[su.Lb.MONTHLY_ACTIVE_SSO_USERS]:{data:null!=(s=null==g?void 0:g.data)?s:[],margin:20,isLoading:y},[su.Lb.STORAGE_IMAGES_TRANSFORMED]:{data:null!=(r=null==f?void 0:f.data)?r:[],margin:0,isLoading:j},[su.Lb.FUNCTION_INVOCATIONS]:{data:null!=(n=null==b?void 0:b.data)?n:[],margin:26,isLoading:v},[su.Lb.REALTIME_MESSAGE_COUNT]:{data:null!=(i=null==S?void 0:S.data)?i:[],margin:38,isLoading:A},[su.Lb.REALTIME_PEAK_CONNECTIONS]:{data:null!=(l=null==_?void 0:_.data)?l:[],margin:0,isLoading:N}};return(0,a.jsx)(sP,{orgSlug:o,projectRef:d,categoryKey:"activity",chartMeta:C,subscription:c,currentBillingCycleSelected:p,"data-sentry-element":"UsageSection","data-sentry-component":"Activity","data-sentry-source-file":"Activity.tsx"})};var sz=s(88574);async function sL(e,t){let{orgSlug:s,startDate:a,endDate:r,projectRef:n}=e;if(!s)throw Error("Org slug is required");if(!a)throw Error("Start date is required");if(!r)throw Error("End date is required");"/platform/organizations/{slug}/daily-stats/compute?&startDate=".concat(encodeURIComponent(a),"&endDate=").concat(encodeURIComponent(r));let{data:i,error:l}=await (0,w.Jt)("/platform/organizations/{slug}/daily-stats/compute",{params:{path:{slug:s},query:{projectRef:n,startDate:a,endDate:r}},signal:t});return l&&(0,w.H4)(l),i}let sF=function(e){let{orgSlug:t,startDate:s,endDate:a,projectRef:r,dateFormat:n="DD MMM"}=e,{enabled:i=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,C.I)(sz.P.orgDailyComputeStats(t,{startDate:s,endDate:a,projectRef:r}),e=>{let{signal:n}=e;return sL({orgSlug:t,startDate:s,endDate:a,projectRef:r},n)},{enabled:i&&void 0!==t&&void 0!==s&&void 0!==a,select:e=>({...e,data:e.data.map(e=>({...e,periodStartFormatted:l()(e.period_start).format(n)}))}),staleTime:36e5,...o})},sU=e=>{var t;let{orgSlug:s,projectRef:r,startDate:n,endDate:i}=e,l=Object.values(su.Fg).map(e=>e.toLowerCase()),{data:o,isLoading:d,error:c,isSuccess:u}=sF({orgSlug:s,projectRef:r,startDate:n,endDate:i}),{billingAll:m}=(0,ed.x)(["billing:all"]),p=null!=(t=null==o?void 0:o.data)?t:[],x={[su.Fg.COMPUTE_HOURS_BRANCH]:"blue",[su.Fg.COMPUTE_HOURS_XS]:"white",[su.Fg.COMPUTE_HOURS_SM]:"green",[su.Fg.COMPUTE_HOURS_MD]:"dark-green",[su.Fg.COMPUTE_HOURS_L]:"yellow",[su.Fg.COMPUTE_HOURS_XL]:"dark-yellow",[su.Fg.COMPUTE_HOURS_2XL]:"orange",[su.Fg.COMPUTE_HOURS_4XL]:"dark-orange",[su.Fg.COMPUTE_HOURS_8XL]:"red",[su.Fg.COMPUTE_HOURS_12XL]:"dark-red",[su.Fg.COMPUTE_HOURS_16XL]:"purple",[su.Fg.COMPUTE_HOURS_24XL]:"purple",[su.Fg.COMPUTE_HOURS_24XL_OPTIMIZED_CPU]:"purple",[su.Fg.COMPUTE_HOURS_24XL_OPTIMIZED_MEMORY]:"purple",[su.Fg.COMPUTE_HOURS_24XL_HIGH_MEMORY]:"purple",[su.Fg.COMPUTE_HOURS_48XL]:"purple",[su.Fg.COMPUTE_HOURS_48XL_OPTIMIZED_CPU]:"purple",[su.Fg.COMPUTE_HOURS_48XL_OPTIMIZED_MEMORY]:"purple",[su.Fg.COMPUTE_HOURS_48XL_HIGH_MEMORY]:"purple"},h=Object.keys(su.Fg).map(e=>({key:e.toLowerCase(),color:x[e]||"white",name:(0,su.pc)(e)})),y=(0,g.useMemo)(()=>l.filter(e=>p.some(t=>t[e])),[p]),f=(0,g.useMemo)(()=>y.length>0,[y]);return(0,a.jsx)("div",{id:"compute",className:"scroll-my-12","data-sentry-component":"Compute","data-sentry-source-file":"Compute.tsx",children:(0,a.jsxs)(sf,{section:{name:"Compute Hours",description:"Amount of hours your projects were active. Each project is a dedicated server and database.\nPaid plans come with $10 in Compute Credits to cover one project running on Micro Compute or parts of any compute add-on.\nBilling is based on the sum of Compute Hours used. Paused projects do not count towards usage.",links:m?[{name:"Compute Add-ons",url:"https://supabase.com/docs/guides/platform/compute-add-ons"},{name:"Usage-billing for Compute",url:"https://supabase.com/docs/guides/platform/manage-your-usage/compute"}]:[]},"data-sentry-element":"SectionContent","data-sentry-source-file":"Compute.tsx",children:[d&&(0,a.jsx)(_.y,{}),null!=c&&(0,a.jsx)(b.A,{subject:"Failed to retrieve usage data",error:c}),u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-1",children:[p.length>0&&(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)("p",{className:"text-sm",children:"Compute Hours usage"})})}),y.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between border-b last:border-b-0 py-1 last:py-0",children:[(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:[(0,a.jsx)("span",{className:"font-medium",children:(0,su.pc)(e.toUpperCase())})," ","Compute Hours usage in period"]}),(0,a.jsxs)("p",{className:"text-sm",children:[p.reduce((t,s)=>{var a;return t+(null!=(a=s[e])?a:0)},0)," hours"]})]},e))]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm",children:"Compute Hours usage per day"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"The data refreshes every hour."})]}),d?(0,a.jsx)(_.y,{}):p.length>0&&f?(0,a.jsx)(sC.A,{name:"Compute Hours usage",unit:"hours",attributes:h,data:p,yMin:24}):(0,a.jsx)(tn.A,{children:(0,a.jsx)(tn.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(sg.A,{className:"text-foreground-light mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"No data in period"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"May take up to one hour to show"})]})})})]})]})})},sG=e=>{var t,s;let{orgSlug:r,projectRef:n,subscription:i,startDate:l,endDate:o,currentBillingCycleSelected:d}=e,{data:c,isLoading:u}=(0,su.Ym)({orgSlug:r,projectRef:n,metric:su.Lb.EGRESS,interval:"1d",startDate:l,endDate:o}),{data:m,isLoading:p}=(0,su.Ym)({orgSlug:r,projectRef:n,metric:su.Lb.CACHED_EGRESS,interval:"1d",startDate:l,endDate:o}),x={[su.Lb.EGRESS]:{data:null!=(t=null==c?void 0:c.data)?t:[],margin:16,isLoading:u},[su.Lb.CACHED_EGRESS]:{data:null!=(s=null==m?void 0:m.data)?s:[],margin:16,isLoading:p}};return(0,a.jsx)(sP,{orgSlug:r,projectRef:n,categoryKey:"egress",chartMeta:x,subscription:i,currentBillingCycleSelected:d,"data-sentry-element":"UsageSection","data-sentry-component":"Egress","data-sentry-source-file":"Egress.tsx"})},sH=e=>{var t,s;let{orgSlug:r,projectRef:n,startDate:i,endDate:l,subscription:o,currentBillingCycleSelected:d}=e,{data:c,isLoading:u}=(0,su.Ym)({orgSlug:r,projectRef:n,metric:su.Lb.DATABASE_SIZE,interval:"1d",startDate:i,endDate:l}),{data:m,isLoading:p}=(0,su.Ym)({orgSlug:r,projectRef:n,metric:su.Lb.STORAGE_SIZE,interval:"1d",startDate:i,endDate:l}),x={[su.Lb.DATABASE_SIZE]:{isLoading:u,margin:14,data:null!=(t=null==c?void 0:c.data)?t:[]},[su.Lb.STORAGE_SIZE]:{isLoading:p,margin:14,data:null!=(s=null==m?void 0:m.data)?s:[]}};return(0,a.jsx)(sP,{orgSlug:r,projectRef:n,categoryKey:"sizeCount",chartMeta:x,subscription:o,currentBillingCycleSelected:d,"data-sentry-element":"UsageSection","data-sentry-component":"SizeAndCounts","data-sentry-source-file":"SizeAndCounts.tsx"})},sB=[{key:su.Lb.DATABASE_SIZE,name:"Database Size",units:"bytes",anchor:"dbSize",category:"Database",unitName:"GB",tip:"Database size refers to the actual amount of space used by all your database objects, as reported by Postgres. This measurement reflects your current database size at this moment. Free Plan projects are limited to 0.5 GB Database Size each and are monitored across the entire billing period."},{key:su.Lb.EGRESS,name:"Egress",units:"bytes",anchor:"egress",category:"Database",unitName:"GB"},{key:su.Lb.CACHED_EGRESS,name:"Cached Egress",units:"bytes",anchor:"cachedEgress",category:"Database",unitName:"GB"},{key:su.Lb.MONTHLY_ACTIVE_USERS,name:"Monthly Active Users",units:"absolute",anchor:"mau",category:"Authentication",unitName:"MAU"},{key:su.Lb.MONTHLY_ACTIVE_SSO_USERS,name:"Monthly Active SSO Users",units:"absolute",anchor:"mauSso",category:"Authentication",unitName:"MAU"},{key:su.Lb.MONTHLY_ACTIVE_THIRD_PARTY_USERS,name:"Monthly Active Third-Party Users",units:"absolute",category:"Authentication",unitName:"MAU"},{key:su.Lb.STORAGE_SIZE,name:"Storage Size",units:"bytes",anchor:"storageSize",category:"Storage",unitName:"GB"},{key:su.Lb.STORAGE_IMAGES_TRANSFORMED,name:"Storage Image Transformations",units:"absolute",anchor:"storageImageTransformations",category:"Storage"},{key:su.Lb.REALTIME_PEAK_CONNECTIONS,name:"Realtime Concurrent Peak Connections",units:"absolute",anchor:"realtimePeakConnections",category:"Realtime"},{key:su.Lb.REALTIME_MESSAGE_COUNT,name:"Realtime Messages",units:"absolute",anchor:"realtimeMessageCount",category:"Realtime"},{key:su.Lb.FUNCTION_INVOCATIONS,name:"Edge Function Invocations",units:"absolute",anchor:"funcInvocations",category:"Edge Functions"},{key:su.Lb.DISK_SIZE_GB_HOURS_GP3,name:"Disk Size",anchor:"diskSize",units:"absolute",unitName:"GB-Hrs",category:"Database",tip:"Each project gets provisioned with 8 GB of GP3 disk for free. When you get close to the disk size limit, we autoscale your disk by 1.5x. Each GB of provisioned disk size beyond 8 GB incurs a GB-Hr every hour. Each extra GB is billed at $0.125/month ($0.000171/GB-Hr), prorated down to the hour.",docLink:{title:"Read more",url:"https://supabase.com/docs/guides/platform/manage-your-usage/disk-size"}},{key:su.Lb.DISK_SIZE_GB_HOURS_IO2,name:"Disk Size IO2",anchor:"diskSize",units:"absolute",unitName:"GB-Hrs",category:"Database"},{key:su.Lb.DISK_IOPS_IO2,name:"Disk IOPS IO2",units:"absolute",unitName:"IOPS-Hrs",category:"Database"},{key:su.Lb.DISK_IOPS_GP3,name:"Disk IOPS GP3",units:"absolute",unitName:"IOPS-Hrs",category:"Database"},{key:su.Lb.DISK_THROUGHPUT_GP3,name:"Disk Throughput",units:"absolute",unitName:"IOPS-Hrs",category:"Database"},{key:su.Lb.LOG_DRAIN_EVENTS,name:"Log Drain Events",units:"absolute",category:"Database"}];var sq=s(58103),sY=s(97136),sW=s(72343);let sV=e=>{var t;let{slug:s,metric:r,usage:n,subscription:i,relativeToSubscription:l}=e,o=n.usages.find(e=>e.metric===r.key),d=(0,g.useMemo)(()=>{var e,t,s,a;return o?l&&!1===o.available_in_plan?"Unavailable in plan":o.cost&&o.cost>0||!l||o.unlimited||0===o.pricing_free_units?"bytes"===r.units||"gigabytes"===r.units?"".concat(null!=(e=o.usage.toLocaleString())?e:0," GB"):o.usage.toLocaleString()+(r.unitName?" ".concat(r.unitName):""):"bytes"===r.units||"gigabytes"===r.units?"".concat(null!=(s=o.usage.toLocaleString())?s:0," / ").concat(null!=(a=o.pricing_free_units)?a:0," GB"):"".concat(o.usage.toLocaleString()," / ").concat(null==(t=o.pricing_free_units)?void 0:t.toLocaleString())+(r.unitName?" ".concat(r.unitName):""):""},[o,l,r]),c=(0,g.useMemo)(()=>o&&o.project_allocations?o.project_allocations.sort((e,t)=>t.usage-e.usage):[],[o]);if(!o)return null;let u=0===o.usage?0:o.usage/(null!=(t=o.pricing_free_units)?t:0),m=(null==i?void 0:i.usage_billing_enabled)===!0,p=!1==!!o.unlimited,x=p&&u>=.8,y=l&&p&&u>=1,f=(0,sY.mX)(o.metric),j=0===o.usage||0===o.pricing_free_units?"":u<.01?"(<1%)":"(".concat((+(100*u).toFixed(0)).toLocaleString(),"%)");return(0,a.jsxs)(sq.jc,{openDelay:50,closeDelay:200,"data-sentry-element":"HoverCard","data-sentry-component":"BillingMetric","data-sentry-source-file":"BillingMetric.tsx",children:[(0,a.jsx)(sq.d0,{asChild:!0,"data-sentry-element":"HoverCardTrigger","data-sentry-source-file":"BillingMetric.tsx",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(h(),{href:"/org/".concat(s,"/usage#").concat(r.anchor),className:"block w-full group","data-sentry-element":"Link","data-sentry-source-file":"BillingMetric.tsx",children:[r.anchor?(0,a.jsxs)("div",{className:"group flex items-center gap-1",children:[(0,a.jsx)("p",{className:"text-sm text-foreground-light group-hover:text-foreground transition cursor-pointer",children:r.name}),o.available_in_plan&&(0,a.jsx)("span",{className:"transition inline-block group-hover:transform group-hover:translate-x-0.5",children:(0,a.jsx)(sW.A,{strokeWidth:1.5,size:16,className:"transition"})})]}):(0,a.jsx)("p",{className:"text-xs text-foreground-light flex space-x-1",children:r.name}),(0,a.jsx)("span",{className:"text-sm",children:d}),"\xa0",l&&o.cost&&o.cost>0?(0,a.jsxs)("span",{className:"text-sm",translate:"no",children:["(",(0,tq.vv)(o.cost),")"]}):o.available_in_plan&&!o.unlimited&&l?(0,a.jsx)("span",{className:"text-sm",children:j}):null]}),o.available_in_plan?(0,a.jsx)("div",{children:l&&!o.unlimited?(0,a.jsxs)("svg",{className:"h-8 w-8 -rotate-90 transform",children:[(0,a.jsx)("circle",{cx:15,cy:15,r:12,fill:"transparent",stroke:"currentColor",strokeWidth:4,className:"text-background-surface-300"}),(0,a.jsx)("circle",{cx:15,cy:15,r:12,fill:"transparent",stroke:"currentColor",strokeDasharray:75.398,strokeDashoffset:"calc(75.39822 - ".concat(u<1?100*u:100," / 100 * 75.39822)"),strokeWidth:4,className:m?"text-gray-dark-800":y?"text-red-900":x?"text-yellow-1000":"text-gray-dark-800"})]}):null}):(0,a.jsx)("div",{children:(0,a.jsx)(P.$,{type:"default",asChild:!0,children:(0,a.jsx)(h(),{href:"/org/".concat(s,"/billing?panel=subscriptionPlan&source=billingBreakdownUsage").concat(r.anchor),children:"Upgrade"})})})]})}),o.available_in_plan&&(0,a.jsx)(sq.Et,{side:"bottom",align:"center",className:"w-[500px]",animate:"slide-in",children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium",translate:"no",children:o.unit_price_desc}),r.tip&&(0,a.jsx)("div",{className:"my-2",children:(0,a.jsxs)("p",{className:"text-sm",children:[r.tip," ",r.docLink&&(0,a.jsx)(h(),{href:r.docLink.url,target:"_blank",className:"transition text-brand hover:text-brand-600 underline",children:r.docLink.title})]})}),!1===i.usage_billing_enabled&&l&&(x||y)&&(0,a.jsx)("div",{className:"my-2",children:(0,a.jsx)("p",{className:"text-sm",children:"Exceeding your plans included usage will lead to restrictions to your project. Upgrade to a usage-based plan or disable the spend cap to avoid restrictions."})}),c&&c.length>0&&(0,a.jsxs)("table",{className:"list-disc w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left",children:"Project"}),(0,a.jsx)("th",{className:"text-right",children:"Usage"})]})}),(0,a.jsxs)("tbody",{children:[c.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.name}),(0,a.jsx)("td",{className:"text-right",children:(0,sY.pK)(o.metric,e)})]},"".concat(o.metric,"_").concat(e.ref))),(0,a.jsx)("tr",{})]}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"py-2 border-t text-left",children:["Total",f&&(0,a.jsxs)("span",{children:[" (",f,")"]})]}),(0,a.jsxs)("td",{className:"py-2 border-t text-right",children:[(0,sY.pK)(o.metric,{usage:o.usage_original})," "]})]})})]})]})})]})},sZ=e=>{let{slug:t,metric:s,usage:r,relativeToSubscription:n}=e,i=r.usages.find(e=>e.metric===s.key),l=(0,g.useMemo)(()=>{var e,t,s,a,r;return(null==i?void 0:i.pricing_free_units)?"".concat(null!=(t=null==i||null==(e=i.usage)?void 0:e.toLocaleString())?t:0," / ").concat(null!=(s=null==i?void 0:i.pricing_free_units)?s:0," hours"):"".concat(null!=(r=null==i||null==(a=i.usage)?void 0:a.toLocaleString())?r:0," hours")},[i]),o=(0,g.useMemo)(()=>i&&i.project_allocations?i.project_allocations.sort((e,t)=>t.usage-e.usage):[],[i]);return(0,a.jsxs)(sq.jc,{openDelay:50,closeDelay:200,"data-sentry-element":"HoverCard","data-sentry-component":"ComputeMetric","data-sentry-source-file":"ComputeMetric.tsx",children:[(0,a.jsx)(sq.d0,{"data-sentry-element":"HoverCardTrigger","data-sentry-source-file":"ComputeMetric.tsx",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(h(),{href:"/org/".concat(t,"/usage#").concat(s.anchor),"data-sentry-element":"Link","data-sentry-source-file":"ComputeMetric.tsx",children:(0,a.jsxs)("div",{className:"group flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-sm text-foreground-light group-hover:text-foreground transition cursor-pointer",children:s.name}),(0,a.jsx)(sW.A,{strokeWidth:1.5,size:16,className:"transition","data-sentry-element":"ChevronRight","data-sentry-source-file":"ComputeMetric.tsx"})]})}),(0,a.jsx)("span",{className:"text-sm",children:l}),"\xa0",n&&(null==i?void 0:i.cost)&&i.cost>0?(0,a.jsxs)("span",{className:"text-sm",translate:"no",children:["(",(0,tq.vv)(null==i?void 0:i.cost),")"]}):null]})}),(0,a.jsx)(sq.Et,{side:"bottom",align:"center",className:"w-[500px]",animate:"slide-in","data-sentry-element":"HoverCardContent","data-sentry-source-file":"ComputeMetric.tsx",children:(0,a.jsxs)("div",{className:"text-sm text-foreground space-y-2",children:[(0,a.jsx)("p",{className:"font-medium",translate:"no",children:null==i?void 0:i.unit_price_desc}),(0,a.jsx)("div",{className:"my-2",children:(null==i?void 0:i.metric)===su.Fg.COMPUTE_HOURS_BRANCH?(0,a.jsxs)("p",{className:"text-sm",children:["Each Preview branch is a separate environment with all Supabase services (Database, Auth, Storage, etc.)."," ",(0,a.jsx)(h(),{href:"https://supabase.com/docs/guides/platform/manage-your-usage/branching",target:"_blank",className:"transition text-brand hover:text-brand-600 underline",children:"Read more"})]}):(0,a.jsxs)("p",{className:"text-sm",children:["Every project is a dedicated server and database. For every hour your project is active, it incurs compute costs based on the compute size of your project. Paused projects do not incur compute costs."," ",(0,a.jsx)(h(),{href:"https://supabase.com/docs/guides/platform/manage-your-usage/compute",target:"_blank",className:"transition text-brand hover:text-brand-600 underline",children:"Read more"})]})}),i&&o.length>0&&(0,a.jsxs)("table",{className:"list-disc w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left",children:"Project"}),(0,a.jsx)("th",{className:"text-right",children:"Usage"})]})}),(0,a.jsxs)("tbody",{children:[o.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.name}),(0,a.jsx)("td",{className:"text-right",children:(0,sY.pK)(i.metric,e)})]},"".concat(i.metric,"_").concat(e.ref))),(0,a.jsx)("tr",{})]}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"py-2 border-t text-left",children:"Total (Hours)"}),(0,a.jsx)("td",{className:"py-2 border-t text-right",children:(0,sY.pK)(i.metric,{usage:i.usage_original})})]})})]})]})})]})},s$=[su.Lb.DISK_IOPS_IO2,su.Lb.DISK_IOPS_GP3,su.Lb.DISK_SIZE_GB_HOURS_GP3,su.Lb.DISK_SIZE_GB_HOURS_IO2,su.Lb.DISK_THROUGHPUT_GP3],sJ=e=>{var t,s;let{orgSlug:r,projectRef:n,subscription:i,startDate:l,endDate:o,currentBillingCycleSelected:d}=e,c=null==i?void 0:i.usage_billing_enabled,{billingAll:u}=(0,ed.x)(["billing:all"]),{data:m,error:p,isLoading:x,isError:h,isSuccess:y}=(0,sm.n)({orgSlug:r,projectRef:n,start:!d&&l?new Date(l):void 0,end:!d&&o?new Date(o):void 0}),f=d&&!n,j=f&&!!(null==m?void 0:m.usages.find(e=>{var t;return!e.metric.startsWith("COMPUTE_")&&!e.unlimited&&e.usage>(null!=(t=null==e?void 0:e.pricing_free_units)?t:0)})),v=(0,g.useMemo)(()=>m?sB.filter(e=>m.usages.some(t=>t.metric===e.key)).filter(e=>{if(!s$.includes(e.key))return!0;let t=m.usages.find(t=>t.metric===e.key);return t&&t.usage>0}).slice().sort((e,t)=>{var s,a,r,n;let i=m.usages.find(t=>t.metric===e.key),l="number"!=typeof i?(null!=(s=null==i?void 0:i.usage)?s:0)/(null!=(a=null==i?void 0:i.pricing_free_units)?a:0):0,o=m.usages.find(e=>e.metric===t.key),d="number"!=typeof o?(null!=(r=null==o?void 0:o.usage)?r:0)/(null!=(n=null==o?void 0:o.pricing_free_units)?n:0):0;return Number(null==o?void 0:o.available_in_plan)-Number(null==i?void 0:i.available_in_plan)||d-l}):[],[m]),S=((null==m?void 0:m.usages)||[]).filter(e=>e.metric.startsWith("COMPUTE")).map(e=>e.metric);return(0,a.jsx)("div",{id:"summary","data-sentry-component":"TotalUsage","data-sentry-source-file":"TotalUsage.tsx",children:(0,a.jsxs)(sf,{section:{name:"Usage Summary",description:c?"Your plan includes a limited amount of usage. If exceeded, you will be charged for the overages. It may take up to 1 hour to refresh.":"Your plan includes a limited amount of usage. If exceeded, you may experience restrictions, as you are currently not billed for overages. It may take up to 1 hour to refresh.",links:u?[{name:"How billing works",url:"https://supabase.com/docs/guides/platform/billing-on-supabase"},{name:"Supabase Plans",url:"https://supabase.com/pricing"}]:[]},"data-sentry-element":"SectionContent","data-sentry-source-file":"TotalUsage.tsx",children:[x&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(_.A,{}),(0,a.jsx)(_.A,{className:"w-3/4"}),(0,a.jsx)(_.A,{className:"w-1/2"})]}),h&&(0,a.jsx)(b.A,{subject:"Failed to retrieve usage data",error:p}),y&&i&&(0,a.jsxs)("div",{children:[f&&(0,a.jsx)("p",{className:"text-sm",children:j?j&&(null==i||null==(t=i.plan)?void 0:t.id)==="free"?(0,a.jsxs)("span",{children:["You have exceeded your"," ",(0,a.jsx)("span",{className:"font-medium",children:null==i?void 0:i.plan.name})," Plan quota in this billing cycle. Upgrade your plan to continue using Supabase without restrictions."]}):j&&(null==i?void 0:i.usage_billing_enabled)===!1&&(null==i||null==(s=i.plan)?void 0:s.id)==="pro"?(0,a.jsxs)("span",{children:["You have exceeded your"," ",(0,a.jsx)("span",{className:"font-medium",children:null==i?void 0:i.plan.name})," Plan quota in this billing cycle. Disable your spend cap to continue using Supabase without restrictions."]}):j&&(null==i?void 0:i.usage_billing_enabled)===!0?(0,a.jsxs)("span",{children:["You have exceeded your"," ",(0,a.jsx)("span",{className:"font-medium",children:null==i?void 0:i.plan.name})," Plan quota in this billing cycle and will be charged for over-usage."]}):(0,a.jsxs)("span",{children:["You have not exceeded your"," ",(0,a.jsx)("span",{className:"font-medium",children:null==i?void 0:i.plan.name})," Plan quota in this billing cycle."]}):(0,a.jsxs)("span",{children:["You have not exceeded your"," ",(0,a.jsx)("span",{className:"font-medium",children:null==i?void 0:i.plan.name})," Plan quota in this billing cycle."]})}),(0,a.jsxs)("div",{className:"grid grid-cols-12 mt-3",children:[v.map((e,t)=>(0,a.jsx)("div",{className:(0,tw.cn)("col-span-12 md:col-span-6 space-y-4 py-4 border-overlay",t%2==0?"md:border-r md:pr-4":"md:pl-4","border-b"),children:(0,a.jsx)(sV,{idx:t,slug:r,metric:e,usage:m,subscription:i,relativeToSubscription:f})},e.key)),S.map((e,t)=>(0,a.jsx)("div",{className:(0,tw.cn)("col-span-12 md:col-span-6 space-y-4 py-4 border-overlay",(t+v.length)%2==0?"md:border-r md:pr-4":"md:pl-4","border-b"),children:(0,a.jsx)(sZ,{slug:r,metric:{key:e,name:(0,su.pc)(e)+" Compute Hours",units:"hours",anchor:"compute",category:"Compute",unitName:"GB"},relativeToSubscription:f,usage:m})},e))]})]})]})})},sK=()=>{let{slug:e,projectRef:t}=(0,n.g)(),[s,i]=(0,g.useState)(),[o,d]=(0,g.useState)(),c=(0,D.SE)(r.aG.BILLING_READ,"stripe.subscriptions"),{data:u}=(0,$.s)(),{data:m,isSuccess:p}=(0,O.el)(),{data:x,error:y,isLoading:j,isError:v,isSuccess:S}=(0,sl.j5)({orgSlug:e}),N=null==m?void 0:m.filter(e=>e.organization_id===(null==u?void 0:u.id));(0,g.useEffect)(()=>{t&&p&&void 0!==N&&N.find(e=>e.ref===t)&&d(t)},[t,p]);let C=(0,g.useMemo)(()=>{var e;return l().unix(null!=(e=null==x?void 0:x.current_period_start)?e:0).utc()},[x]),w=(0,g.useMemo)(()=>{var e;return l().unix(null!=(e=null==x?void 0:x.current_period_end)?e:0).utc()},[x]),E=(0,g.useMemo)(()=>null==s||!s.period_start||null==s||!s.period_end||l()(s.period_start.date).isSame(C)&&l()(s.period_end.date).isSame(w),[s,C,w]),R=(0,g.useMemo)(()=>{var e,t;if(null==s||null==(e=s.period_start)?void 0:e.date)return new Date(null==s||null==(t=s.period_start)?void 0:t.date).toISOString().slice(0,-5)+"Z"},[s,x]),T=(0,g.useMemo)(()=>{var e,t;return(null==s||null==(e=s.period_end)?void 0:e.date)&&l()(s.period_end.date).isAfter(l()())?l()().endOf("day").toISOString().slice(0,-5)+"Z":(null==s||null==(t=s.period_end)?void 0:t.date)?new Date(s.period_end.date).toISOString().slice(0,-5)+"Z":void 0},[s,x]),I=o?null==N?void 0:N.find(e=>e.ref===o):void 0;return c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Vw,{"data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"Usage.tsx",children:(0,a.jsx)(f.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"Usage.tsx",children:"Usage"})}),(0,a.jsx)("div",{className:"sticky top-0 border-b bg-studio z-[1] overflow-hidden ",children:(0,a.jsx)(f.eh,{className:"","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Usage.tsx",children:(0,a.jsxs)("div",{className:"py-4 flex items-center space-x-4",children:[j&&(0,a.jsx)(_.A,{className:"w-[250px]"}),v&&(0,a.jsx)(b.A,{className:"w-full",subject:"Failed to retrieve usage data",error:y}),S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(si.A,{onChange:i,value:so.L3[0].key,options:[...so.L3,...so.PJ],loading:j,currentBillingPeriodStart:null==x?void 0:x.current_period_start,currentBillingPeriodEnd:null==x?void 0:x.current_period_end}),(0,a.jsxs)(sd.A,{size:"tiny",name:"schema",className:"w-[180px]",value:o,onChange:e=>{"all-projects"===e?d(void 0):d(e)},children:[(0,a.jsx)(sd.A.Option,{id:"all-projects",label:"All projects",value:"all-projects",children:"All projects"},"all-projects"),null==N?void 0:N.map(e=>(0,a.jsx)(sd.A.Option,{id:e.ref,value:e.ref,label:e.name,children:e.name},e.ref))]}),(0,a.jsxs)("div",{className:"flex flex-col xl:flex-row xl:gap-3",children:[(0,a.jsxs)("p",{className:(0,tw.cn)("text-sm transition",j&&"opacity-50"),children:["Organization is on the ",x.plan.name," plan"]}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:[C.format("DD MMM YYYY")," -"," ",w.format("DD MMM YYYY")]})]})]})]})})}),o?(0,a.jsx)(f.eh,{className:"mt-5",children:(0,a.jsx)(el.Z,{type:"default",title:"Usage filtered by project",description:(0,a.jsxs)("div",{children:["You are currently viewing usage for the",(null==I?void 0:I.name)||o," project. Supabase uses"," ",(0,a.jsx)(h(),{href:"/docs/guides/platform/billing-on-supabase#organization-based-billing",target:"_blank",children:"organization-level billing"})," ",'and quotas. For billing purposes, we sum up usage from all your projects. To view your usage quota, set the project filter above back to "All Projects".']})})}):(0,a.jsx)(f.eh,{id:"restriction",className:"mt-5",children:(0,a.jsx)(sc.R,{})}),(0,a.jsx)(sJ,{orgSlug:e,projectRef:o,subscription:x,startDate:R,endDate:T,currentBillingCycleSelected:E,"data-sentry-element":"TotalUsage","data-sentry-source-file":"Usage.tsx"}),(null==x?void 0:x.plan.id)!=="free"&&(0,a.jsx)(sU,{orgSlug:e,projectRef:o,subscription:x,startDate:R,endDate:T}),(0,a.jsx)(sG,{orgSlug:e,projectRef:o,subscription:x,startDate:R,endDate:T,currentBillingCycleSelected:E,"data-sentry-element":"Egress","data-sentry-source-file":"Usage.tsx"}),(0,a.jsx)(sH,{orgSlug:e,projectRef:o,subscription:x,startDate:R,endDate:T,currentBillingCycleSelected:E,"data-sentry-element":"SizeAndCounts","data-sentry-source-file":"Usage.tsx"}),(0,a.jsx)(sM,{orgSlug:e,projectRef:o,subscription:x,startDate:R,endDate:T,currentBillingCycleSelected:E,"data-sentry-element":"Activity","data-sentry-source-file":"Usage.tsx"})]}):(0,a.jsx)(f.Vw,{children:(0,a.jsx)(A.A,{resourceText:"view organization usage"})})}},2944:(e,t,s)=>{s.d(t,{SB:()=>p,Y1:()=>u});var a=s(32144),r=s(80251),n=s(73969),i=s(70938),l=s(1594),o=s(6042),d=s(87283);async function c(e){let{name:t,kind:s,size:a,tier:r,payment_method:n,address:l,billing_name:o,tax_id:d}=e,{data:c,error:u}=await (0,i.bE)("/platform/organizations",{body:{name:t,kind:s,size:a,tier:r,payment_method:n,billing_name:null!=o?o:void 0,tax_id:null!=d?d:void 0,address:null!=l?l:void 0}});return u&&(0,i.H4)(u),c}let u=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,a.jE)();return(0,r.n)(e=>c(e),{async onSuccess(t,s,a){!t||"pending_payment_intent_secret"in t||(i.setQueriesData({queryKey:o.O.list(),exact:!0},e=>e?[...e,(0,d.i0)(t)]:e),await i.invalidateQueries(l.Q.list())),await (null==e?void 0:e(t,s,a))},async onError(e,s,a){void 0===t?n.oR.error("Failed to create organization: ".concat(e.message)):t(e,s,a)},...s})};async function m(e){let{name:t,kind:s,size:a,buyerId:r}=e,{data:n,error:l}=await (0,i.bE)("/platform/organizations/cloud-marketplace",{body:{name:t,kind:s,size:a,buyer_id:r}});return l&&(0,i.H4)(l),n}let p=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,a.jE)();return(0,r.n)(e=>m(e),{async onSuccess(t,s,a){t&&(i.setQueriesData({queryKey:o.O.list(),exact:!0},e=>e?[...e,(0,d.i0)(t)]:e),await i.invalidateQueries(l.Q.list())),await (null==e?void 0:e(t,s,a))},async onError(e,s,a){void 0===t?n.oR.error("Failed to create organization: ".concat(e.message)):t(e,s,a)},...s})}},4051:(e,t,s)=>{s.d(t,{R:()=>a});let a={oauthApps:e=>[e,"oauth-apps"],authorizedApps:e=>[e,"authorized-apps"]}},8841:(e,t,s)=>{s.d(t,{KQ:()=>o});var a=s(56947),r=s(70938),n=s(73591);let i=["Owner","Administrator","Developer","Read-only"];async function l(e,t){let{slug:s}=e;if(!s)throw Error("slug is required");let{data:a,error:n}=await (0,r.Jt)("/platform/organizations/{slug}/roles",{params:{path:{slug:s}},signal:t});return n&&(0,r.H4)(n),a}let o=function(e){let{slug:t}=e,{enabled:s=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)(n.O.rolesV2(t),e=>{let{signal:s}=e;return l({slug:t},s)},{enabled:s&&void 0!==t,select:e=>({...e,org_scoped_roles:e.org_scoped_roles.sort((e,t)=>i.indexOf(e.name)-i.indexOf(t.name))}),...r})}},9286:(e,t,s)=>{s.d(t,{A:()=>l,O:()=>o});var a=s(80263),r=s(60045),n=s(24699),i=s(83416);let l=e=>{let{description:t,hasReadScope:s,hasWriteScope:r}=e;if(s||r){let e=[s?"Read":null,r?"Write":null].filter(Boolean).map(e=>(0,a.jsx)("span",{className:"font-semibold text-foreground",children:e},e)).reduce((e,t)=>(0,a.jsxs)(a.Fragment,{children:[e,(0,a.jsx)("span",{children:" and "}),t]}));return(0,a.jsxs)("div",{className:"first:border-t border-b flex flex-row space-x-1 text-sm text-foreground-light py-2 px-1",children:[(0,a.jsx)("div",{className:"pt-0.5",children:(0,a.jsx)(n.A,{stroke:"green",height:18,width:18,strokeWidth:1.5})}),(0,a.jsxs)("div",{children:[e," ",t]})]})}return null},o=e=>{let{icon:t,name:s,domain:n,scopes:o}=e;return(0,a.jsxs)("div",{className:"flex gap-y-4 flex-col","data-sentry-component":"AuthorizeRequesterDetails","data-sentry-source-file":"AuthorizeRequesterDetails.tsx",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-x-4 items-center",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"w-14 h-14 md:w-16 md:h-16 bg-center bg-no-repeat bg-cover flex items-center justify-center rounded-md border border-control",style:{backgroundImage:t?"url('".concat(t,"')"):"none"},children:!t&&(0,a.jsx)("p",{className:"text-foreground-light text-lg",children:s[0]})})}),(0,a.jsxs)("p",{className:"text-foreground",children:[s," (",n,") is requesting API access to an organization."]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Permissions"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:["The following scopes will apply for the"," ",(0,a.jsx)("span",{className:"text-amber-900",children:"selected organization and all of its projects."})]}),(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)(l,{description:i.R.ANALYTICS,hasReadScope:o.includes(r.gx.ANALYTICS_READ),hasWriteScope:o.includes(r.gx.ANALYTICS_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(l,{description:i.R.AUTH,hasReadScope:o.includes(r.gx.AUTH_READ),hasWriteScope:o.includes(r.gx.AUTH_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(l,{description:i.R.DATABASE,hasReadScope:o.includes(r.gx.DATABASE_READ),hasWriteScope:o.includes(r.gx.DATABASE_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(l,{description:i.R.DOMAINS,hasReadScope:o.includes(r.gx.DOMAINS_READ),hasWriteScope:o.includes(r.gx.DOMAINS_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(l,{description:i.R.EDGE_FUNCTIONS,hasReadScope:o.includes(r.gx.EDGE_FUNCTIONS_READ),hasWriteScope:o.includes(r.gx.EDGE_FUNCTIONS_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(l,{description:i.R.ENVIRONMENT,hasReadScope:o.includes(r.gx.ENVIRONMENT_READ),hasWriteScope:o.includes(r.gx.ENVIRONMENT_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(l,{description:i.R.ORGANIZATIONS,hasReadScope:o.includes(r.gx.ORGANIZATIONS_READ),hasWriteScope:o.includes(r.gx.ORGANIZATIONS_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(l,{description:i.R.PROJECTS,hasReadScope:o.includes(r.gx.PROJECTS_READ),hasWriteScope:o.includes(r.gx.PROJECTS_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(l,{description:i.R.REST,hasReadScope:o.includes(r.gx.REST_READ),hasWriteScope:o.includes(r.gx.REST_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(l,{description:i.R.SECRETS,hasReadScope:o.includes(r.gx.SECRETS_READ),hasWriteScope:o.includes(r.gx.SECRETS_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(l,{description:i.R.STORAGE,hasReadScope:o.includes(r.gx.STORAGE_READ),hasWriteScope:o.includes(r.gx.STORAGE_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"})]})]})]})}},22258:(e,t,s)=>{s.d(t,{j:()=>i});var a=s(80263),r=s(53239),n=s(80127);let i=(0,r.forwardRef)((e,t)=>{let{preTab:s,postTab:r,children:i,className:l,...o}=e;return(0,a.jsxs)("div",{ref:t,...o,className:(0,n.cn)("flex -space-x-px",l),children:[s&&(0,a.jsx)("div",{className:"border border-strong bg-surface-300 rounded-l-md px-3 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-foreground-lighter text-xs font-mono",children:s})}),(0,a.jsx)("div",{className:(0,n.cn)("flex-1",{"[&_input]:rounded-l-none [&_select]:rounded-l-none [&_textarea]:rounded-l-none":!!s,"[&_input]:rounded-r-none [&_select]:rounded-r-none [&_textarea]:rounded-r-none":!!r}),children:i}),r&&(0,a.jsx)("div",{className:"border border-strong bg-surface-300 rounded-r-md px-3 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-foreground-lighter text-xs font-mono",children:r})})]})})},26858:(e,t,s)=>{s.d(t,{Q:()=>l});var a=s(56947),r=s(70938),n=s(6042);async function i(e,t){let{slug:s}=e;if(!s)throw Error("slug is required");let[a,n]=await Promise.all([(0,r.Jt)("/platform/organizations/{slug}/members",{params:{path:{slug:s}},signal:t}),(0,r.Jt)("/platform/organizations/{slug}/members/invitations",{params:{path:{slug:s}},signal:t})]),{data:i,error:l}=a,{data:o,error:d}=n;return l&&(0,r.H4)(l),d&&(0,r.H4)(d),[...i,...o.invitations.map(e=>({...{invited_at:e.invited_at,invited_id:e.id,mfa_enabled:!1,username:e.invited_email.slice(0,1),primary_email:e.invited_email},role_ids:[e.role_id]}))]}let l=function(e){let{slug:t}=e,{enabled:s=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)(n.O.members(t),e=>{let{signal:s}=e;return i({slug:t},s)},{enabled:s&&void 0!==t,...r})}},41635:(e,t,s)=>{s.d(t,{hs:()=>l,rj:()=>o});var a=s(80263),r=s(5648),n=s(1715),i=s(50922);let l={white:{bar:"fill-foreground",marker:"bg-foreground"},green:{bar:"fill-green-800",marker:"bg-green-800"},"dark-green":{bar:"fill-green-1000",marker:"bg-green-1000"},blue:{bar:"fill-blue-900",marker:"bg-blue-900"},yellow:{bar:"fill-yellow-800",marker:"bg-yellow-800"},"dark-yellow":{bar:"fill-yellow-1000",marker:"bg-yellow-1000"},orange:{bar:"fill-orange-800",marker:"bg-orange-800"},"dark-orange":{bar:"fill-orange-1000",marker:"bg-orange-1100"},teal:{bar:"fill-teal-600",marker:"bg-teal-700"},red:{bar:"fill-red-800",marker:"bg-red-800"},"dark-red":{bar:"fill-red-1000",marker:"bg-red-1000"},purple:{bar:"fill-purple-900",marker:"bg-purple-900"}},o=e=>{let t=[{anchor:"egress",key:n.Lb.EGRESS,attributes:[{key:n.K5.AUTH,name:"Auth Egress",color:"yellow"},{key:n.K5.DATABASE,name:"Database Egress",color:"green"},{key:n.K5.STORAGE,name:"Storage Egress",color:"blue"},{key:n.K5.REALTIME,name:"Realtime Egress",color:"orange"},{key:n.K5.FUNCTIONS,name:"Functions Egress",color:"purple"},{key:n.K5.SUPAVISOR,name:"Shared Pooler Egress",color:"red"},{key:n.K5.LOGDRAIN,name:"Logdrain Egress",color:"teal"}],name:"Egress",unit:"bytes",description:(null==e?void 0:e.cached_egress_enabled)===!0?"Contains any outgoing traffic including Database, Storage, Realtime, Auth, API, Edge Functions, Pooler and Log Drains.\nBilling is based on the total sum of uncached egress in GB throughout your billing period.\nEgress via cache hits is billed separately.":"Contains any outgoing traffic including Database, Storage, Realtime, Auth, API, Edge Functions, Pooler and Log Drains.\nBilling is based on the total sum of uncached egress in GB throughout your billing period.",chartDescription:"The breakdown of different egress types is inclusive of cached egress, even though it is billed separately. The data refreshes every 24 hours.",links:[{name:"Documentation",url:"https://supabase.com/docs/guides/platform/manage-your-usage/egress"}]}];return(null==e?void 0:e.cached_egress_enabled)&&t.push({anchor:"cachedEgress",key:n.Lb.CACHED_EGRESS,attributes:[{key:n.Lb.CACHED_EGRESS.toLowerCase(),color:"white"}],name:"Cached Egress",unit:"bytes",description:"Contains any outgoing traffic that is served from a cache hit. Includes API, Storage and Edge Functions.\nBilling is based on the total sum of cached egress in GB throughout your billing period.",chartDescription:"The data refreshes every 24 hours.",links:[{name:"Documentation",url:"https://supabase.com/docs/guides/platform/manage-your-usage/egress"}]}),[{key:"egress",name:"Egress",description:"Amount of data transmitted over all network connections",attributes:t},{key:"sizeCount",name:"Database & Storage Size",description:"Amount of resources your project is consuming",attributes:[(null==e?void 0:e.plan.id)==="free"?{anchor:"dbSize",key:n.Lb.DATABASE_SIZE,attributes:[{key:n.Lb.DATABASE_SIZE.toLowerCase(),color:"white"}],name:"Database size",chartPrefix:"Average",unit:"bytes",description:"Database size refers to the actual amount of space used by all your database objects, as reported by Postgres.",links:[{name:"Documentation",url:"https://supabase.com/docs/guides/platform/database-size"}],chartDescription:"The data refreshes every 24 hours.",additionalInfo:t=>{var s,l,o,d;let c=null==t?void 0:t.usages.find(e=>e.metric===n.Lb.DATABASE_SIZE),u="number"!=typeof c?(null!=(l=null==c?void 0:c.usage)?l:0)/(null!=(o=null==c?void 0:c.pricing_free_units)?o:0):0,m=c&&(null!=(d=null==c?void 0:c.pricing_free_units)?d:0)>0,p=m&&u>=r.x,x=m&&u>=1,h=null==c?void 0:c.capped,g=(null==e||null==(s=e.plan)?void 0:s.name)==="Free";return(0,a.jsx)("div",{children:(p||x)&&h&&(0,a.jsx)(i.Z,{type:x?"danger":"warning",title:x?"Exceeding database size limit":"Nearing database size limit",children:(0,a.jsx)("div",{className:"flex w-full items-center flex-col justify-center space-y-2 md:flex-row md:justify-between",children:(0,a.jsxs)("div",{children:["When you reach your database size limit, your project can go into read-only mode."," ",g?"Please upgrade your Plan.":"Disable your spend cap to scale seamlessly, and pay for over-usage beyond your Plan's quota."]})})})})}}:{anchor:"diskSize",key:"diskSize",attributes:[],name:"Disk size",chartPrefix:"Average",unit:"bytes",description:"Each Supabase project comes with a dedicated disk. Each project gets 8 GB of disk for free. Billing is based on the provisioned disk size. Disk automatically scales up when you get close to it's size.\nEach hour your project is using more than 8 GB of GP3 disk, it incurs the overages in GB-Hrs, i.e. a 16 GB disk incurs 8 GB-Hrs every hour. Extra disk size costs $0.125/GB/month ($0.000171/GB-Hr).",links:[{name:"Documentation",url:"https://supabase.com/docs/guides/platform/manage-your-usage/disk-size"},{name:"Disk Management",url:"https://supabase.com/docs/guides/platform/database-size#disk-management"}],chartDescription:""},{anchor:"storageSize",key:n.Lb.STORAGE_SIZE,attributes:[{key:n.Lb.STORAGE_SIZE.toLowerCase(),color:"white"}],name:"Storage Size",chartPrefix:"Average",unit:"bytes",description:"Sum of all objects in your storage buckets.\nBilling is prorated down to the hour and will be displayed GB-Hrs.",chartDescription:"The data refreshes every 24 hours.",links:[{name:"Storage",url:"https://supabase.com/docs/guides/storage"}]}]},{key:"activity",name:"Activity",description:"Usage statistics that reflect the activity of your project",attributes:[{anchor:"mau",key:n.Lb.MONTHLY_ACTIVE_USERS,attributes:[{key:n.Lb.MONTHLY_ACTIVE_USERS.toLowerCase(),color:"white"}],name:"Monthly Active Users",chartPrefix:"Cumulative",chartSuffix:"in billing period",unit:"absolute",description:"Users who log in or refresh their token count towards MAU.\nBilling is based on the sum of distinct users requesting your API throughout the billing period. Resets every billing cycle.",chartDescription:"The data is refreshed over a period of 24 hours and resets at the beginning of every billing period.\nThe data points are relative to the beginning of your billing period and will reset with your billing period.",links:[{name:"Auth",url:"https://supabase.com/docs/guides/auth"}]},{anchor:"mauSso",key:n.Lb.MONTHLY_ACTIVE_SSO_USERS,attributes:[{key:n.Lb.MONTHLY_ACTIVE_SSO_USERS.toLowerCase(),color:"white"}],name:"Monthly Active SSO Users",chartPrefix:"Cumulative",chartSuffix:"in billing period",unit:"absolute",description:"SSO users who log in or refresh their token count towards SSO MAU.\nBilling is based on the sum of distinct Single Sign-On users requesting your API throughout the billing period. Resets every billing cycle.",chartDescription:"The data refreshes over a period of 24 hours and resets at the beginning of every billing period.\nThe data points are relative to the beginning of your billing period and will reset with your billing period.",links:[{name:"SSO with SAML 2.0",url:"https://supabase.com/docs/guides/auth/sso/auth-sso-saml"}]},{anchor:"storageImageTransformations",key:n.Lb.STORAGE_IMAGES_TRANSFORMED,attributes:[{key:n.Lb.STORAGE_IMAGES_TRANSFORMED.toLowerCase(),color:"white"}],name:"Storage Image Transformations",chartPrefix:"Cumulative",chartSuffix:"in billing period",unit:"absolute",description:"We count all images that were transformed in the billing period, ignoring any transformations.\nUsage example: You transform one image with four different size transformations and another image with just a single transformation. It counts as two, as only two images were transformed.\nBilling is based on the count of (origin) images that used transformations throughout the billing period. Resets every billing cycle.",chartDescription:"The data refreshes every 24 hours.\nThe data points are relative to the beginning of your billing period and will reset with your billing period.",links:[{name:"Documentation",url:"https://supabase.com/docs/guides/storage/image-transformations"}]},{anchor:"funcInvocations",key:n.Lb.FUNCTION_INVOCATIONS,attributes:[{key:n.Lb.FUNCTION_INVOCATIONS.toLowerCase(),color:"white"}],name:"Edge Function Invocations",unit:"absolute",description:"Every serverless function invocation independent of response status is counted.\nBilling is based on the sum of all invocations throughout your billing period.",chartDescription:"The data refreshes every 24 hours.",links:[{name:"Edge Functions",url:"https://supabase.com/docs/guides/functions"}]},{anchor:"realtimeMessageCount",key:n.Lb.REALTIME_MESSAGE_COUNT,attributes:[{key:n.Lb.REALTIME_MESSAGE_COUNT.toLowerCase(),color:"white"}],name:"Realtime Messages",unit:"absolute",description:"Count of messages going through Realtime. Includes database changes, broadcast and presence. \nUsage example: If you do a database change and 5 clients listen to that change via Realtime, that's 5 messages. If you broadcast a message and 4 clients listen to that, that's 5 messages (1 message sent, 4 received).\nBilling is based on the total amount of messages throughout your billing period.",chartDescription:"The data refreshes every 24 hours.",links:[{name:"Realtime Quotas",url:"https://supabase.com/docs/guides/realtime/quotas"}]},{anchor:"realtimePeakConnections",key:n.Lb.REALTIME_PEAK_CONNECTIONS,attributes:[{key:n.Lb.REALTIME_PEAK_CONNECTIONS.toLowerCase(),color:"white"}],name:"Realtime Concurrent Peak Connections",chartPrefix:"Max",unit:"absolute",description:"Total number of successful connections. Connections attempts are not counted towards usage.\nBilling is based on the maximum amount of concurrent peak connections throughout your billing period.",chartDescription:"The data refreshes every 24 hours.",links:[{name:"Realtime Quotas",url:"https://supabase.com/docs/guides/realtime/quotas"}]}]}]}},45222:(e,t,s)=>{s.d(t,{A:()=>p,U:()=>m});var a=s(80263),r=s(53434),n=s.n(r),i=s(83759),l=s(53239),o=s(74144),d=s(64495),c=s(22554),u=s(80127);let m=e=>{var t;let{onChange:s,value:r,options:m,className:p,loading:x,currentBillingPeriodStart:h,currentBillingPeriodEnd:g,footer:y}=e,[f,j]=(0,l.useState)(r);(0,l.useEffect)(()=>{A(r)},[x]);let b=n()().startOf("month").format(o.DX),v=n()().add(1,"month").startOf("month").format(o.DX),S=n()().format(o.DX);function A(e){switch(j(e),e){case"currentBillingCycle":s({period_start:{date:n().unix(null!=h?h:0).format(o.DX),time_period:"1d"},period_end:{date:n().unix(null!=g?g:0).format(o.DX),time_period:"today"},interval:"1d"});break;case"previousBillingCycle":s({period_start:{date:n().unix(null!=h?h:0).subtract(1,"month").format(o.DX),time_period:"1d"},period_end:{date:n().unix(null!=h?h:0).format(o.DX),time_period:"today"},interval:"1d"});break;case"10m":s({period_start:{date:n()().subtract(10,"minutes").format(o.DX),time_period:"1d"},period_end:{date:S,time_period:"today"},interval:"1m"});break;case"30m":s({period_start:{date:n()().subtract(30,"minutes").format(o.DX),time_period:"1d"},period_end:{date:S,time_period:"today"},interval:"1m"});break;case"1d":s({period_start:{date:n()().subtract(24,"hour").format(o.DX),time_period:"1d"},period_end:{date:S,time_period:"today"},interval:"1h"});break;case"3h":s({period_start:{date:n()().subtract(3,"hour").format(o.DX),time_period:"3h"},period_end:{date:S,time_period:"today"},interval:"5m"});break;case"1h":s({period_start:{date:n()().subtract(1,"hour").format(o.DX),time_period:"1h"},period_end:{date:S,time_period:"today"},interval:"1m"});break;case"7d":s({period_start:{date:n()().subtract(7,"day").format(o.DX),time_period:"7d"},period_end:{date:S,time_period:"today"},interval:"1d"});break;case"30d":s({period_start:{date:n()().subtract(30,"day").format(o.DX),time_period:"30d"},period_end:{date:S,time_period:"today"},interval:"1d"});break;case"60d":s({period_start:{date:n()().subtract(60,"day").format(o.DX),time_period:"60d"},period_end:{date:S,time_period:"today"},interval:"3d"});break;case"startMonth":s({period_start:{date:b,time_period:"startMonth"},period_end:{date:v,time_period:"endMonth"},interval:"1d"});break;default:console.warn("Unknown period encountered: ".concat(e))}}return(0,a.jsxs)(d.rI,{"data-sentry-element":"DropdownMenu","data-sentry-component":"DateRangePicker","data-sentry-source-file":"DateRangePicker.tsx",children:[(0,a.jsx)(d.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"DateRangePicker.tsx",children:(0,a.jsx)(c.$,{type:"default",iconRight:(0,a.jsx)(i.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"DateRangePicker.tsx",children:(0,a.jsx)("span",{children:f&&(null==(t=m.find(e=>e.key===f))?void 0:t.label)})})}),(0,a.jsxs)(d.SQ,{side:"bottom",align:"start",className:(0,u.cn)(!y&&"w-36",p),"data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"DateRangePicker.tsx",children:[(0,a.jsx)(d.Hr,{value:f,onValueChange:e=>A(e),"data-sentry-element":"DropdownMenuRadioGroup","data-sentry-source-file":"DateRangePicker.tsx",children:m.map(e=>(0,a.jsx)(d.Ht,{value:e.key,children:e.label},e.key))}),!!y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.mB,{}),y]})]})]})},p=m},55162:(e,t,s)=>{s.d(t,{Cb:()=>c,L3:()=>u,PJ:()=>m,wG:()=>d});var a=s(80263),r=s(91418),n=s(94976),i=s(85436),l=s(14375),o=s(3566);let d={API:{label:"All API usage",icon:e=>(0,a.jsx)(n.A,{size:16,className:e}),key:"api"},API_DATABASE:{label:"Database API",icon:e=>(0,a.jsx)(i.A,{size:16,className:e}),key:"api_database"},API_AUTH:{label:"Authentication",icon:e=>(0,a.jsx)(r.Nj,{size:16,className:e}),key:"api_auth"},API_STORAGE:{label:"Storage",icon:e=>(0,a.jsx)(r.wc,{size:16,className:e}),key:"api_storage"},API_REALTIME:{label:"Realtime",icon:e=>(0,a.jsx)(r.Se,{size:16,className:e}),key:"api_realtime"},INSTANCE:{label:"Instance health",icon:e=>(0,a.jsx)(l.A,{size:16,className:e}),key:"instance"},SUPAVISOR:{label:"Supavisor",icon:e=>(0,a.jsx)(o.A,{size:16,className:e}),key:"supavisor"}},c=[{key:"avg_cpu_usage",label:"Average CPU % Usage",provider:"infra-monitoring",category:d.INSTANCE},{key:"max_cpu_usage",label:"Max CPU % Usage",provider:"infra-monitoring",category:d.INSTANCE},{key:"disk_io_consumption",label:"Disk IO % Consumed",provider:"infra-monitoring",category:d.INSTANCE},{key:"disk_io_budget",label:"Disk IO % Remaining",provider:"infra-monitoring",category:d.INSTANCE},{key:"ram_usage",label:"Memory % Usage",provider:"infra-monitoring",category:d.INSTANCE},{key:"total_realtime_egress",label:"Realtime Connection Egress",provider:"daily-stats",category:d.API},{key:"total_realtime_requests",label:"Realtime Connection Requests",provider:"daily-stats",category:d.API_REALTIME},{key:"total_realtime_ingress",label:"Realtime Connection Ingress",provider:"daily-stats",category:d.API_REALTIME},{key:"total_rest_ingress",label:"API Ingress",provider:"daily-stats",category:d.API_DATABASE},{key:"total_rest_egress",label:"API Egress",provider:"daily-stats",category:d.API_DATABASE},{key:"total_rest_requests",label:"API Requests",provider:"daily-stats",category:d.API_DATABASE},{key:"total_rest_get_requests",label:"API GET Requests",provider:"daily-stats",category:d.API_DATABASE},{key:"total_rest_post_requests",label:"API POST Requests",provider:"daily-stats",category:d.API_DATABASE},{key:"total_rest_patch_requests",label:"API PATCH Requests",provider:"daily-stats",category:d.API_DATABASE},{key:"total_rest_delete_requests",label:"API DELETE Requests",provider:"daily-stats",category:d.API_DATABASE},{key:"total_rest_options_requests",label:"API OPTIONS Requests",provider:"daily-stats",category:d.API_DATABASE},{key:"total_auth_billing_period_mau",label:"Auth Monthly Active User",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_billing_period_sso_mau",label:"Auth Monthly Active SSO User",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_ingress",label:"Auth Ingress",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_egress",label:"Auth Egress",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_requests",label:"Auth Requests",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_get_requests",label:"Auth GET Requests",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_post_requests",label:"Auth POST Requests",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_patch_requests",label:"Auth PATCH Requests",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_options_requests",label:"Auth OPTIONS Requests",provider:"daily-stats",category:d.API_AUTH},{key:"total_storage_ingress",label:"Storage Ingress",provider:"daily-stats",category:d.API_STORAGE},{key:"total_storage_egress",label:"Storage Egress",provider:"daily-stats",category:d.API_STORAGE},{key:"total_storage_image_render_count",label:"Storage Image Transformations",provider:"daily-stats",category:d.API_STORAGE},{key:"total_storage_requests",label:"Storage Requests",provider:"daily-stats",category:d.API_STORAGE},{key:"total_storage_get_requests",label:"Storage GET Requests",provider:"daily-stats",category:d.API_STORAGE},{key:"total_storage_post_requests",label:"Storage POST Requests",provider:"daily-stats",category:d.API_STORAGE},{key:"total_storage_delete_requests",label:"Storage DELETE Requests",provider:"daily-stats",category:d.API_STORAGE},{key:"total_storage_options_requests",label:"Storage OPTIONS Requests",provider:"daily-stats",category:d.API_STORAGE},{key:"total_auth_delete_requests",label:"Auth DELETE Requests",provider:"daily-stats",category:d.API_AUTH},{key:"total_egress",label:"All Egress",provider:"daily-stats",category:d.API},{key:"total_get_requests",label:"All GET Requests",provider:"daily-stats",category:d.API},{key:"total_cached_egress",label:"All Cached Egress",provider:"daily-stats",category:d.API_STORAGE},{key:"total_storage_patch_requests",label:"Storage PATCH Requests",provider:"daily-stats",category:d.API_STORAGE},{key:"total_requests",label:"All Requests",provider:"daily-stats",category:d.API},{key:"total_patch_requests",label:"All PATCH Requests",provider:"daily-stats",category:d.API},{key:"total_post_requests",label:"All POST Requests",provider:"daily-stats",category:d.API},{key:"total_ingress",label:"All Ingress",provider:"daily-stats",category:d.API},{key:"total_delete_requests",label:"All DELETE Requests",provider:"daily-stats",category:d.API},{key:"total_options_requests",label:"All OPTIONS Requests",provider:"daily-stats",category:d.API},{key:"total_supavisor_egress_bytes",label:"Shared Pooler Egress",provider:"daily-stats",category:d.SUPAVISOR}],u=[{key:"currentBillingCycle",label:"Current billing cycle",interval:"1d"},{key:"previousBillingCycle",label:"Previous billing cycle",interval:"1d"}],m=[{key:"7d",label:"Last 7 days",interval:"1d"},{key:"30d",label:"Last 30 days",interval:"1d"},{key:"startMonth",label:"This month",interval:"1d"}]},55613:(e,t,s)=>{s.d(t,{A:()=>j});var a=s(80263),r=s(53434),n=s.n(r),i=s(60620),l=s(92189),o=s(66694),d=s(10349),c=s(84338),u=s(88365),m=s(77438),p=s(85259),x=s(80127),h=s(41635);let g=e=>{let{name:t,unit:s,value:r,isAfterToday:n,tooltipFormatter:i}=e,l="percentage"===s?Number(r).toFixed(2):Number(r);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:t}),n?(0,a.jsx)("p",{className:"text-foreground-light text-lg",children:"No data yet"}):(0,a.jsx)("p",{className:"text-xl",children:void 0!==i?i(l):l})]})},y=e=>{var t;let{attribute:s,attributeMeta:r,sumValue:n,tooltipFormatter:i,unit:l}=e,o=Number(null!=(t=null==r?void 0:r.value)?t:0),d=(o/n*100).toFixed(1);return(0,a.jsxs)("div",{className:"flex items-center justify-between","data-sentry-component":"AttributeContent","data-sentry-source-file":"UsageChartTooltips.tsx",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 w-[175px]",children:[(0,a.jsx)("div",{className:(0,x.cn)("w-3 h-3 rounded-full border",h.hs[s.color].marker)}),(0,a.jsxs)("p",{className:"text-xs prose",children:[s.name," (",d,"%):"," "]})]}),(0,a.jsx)("p",{className:"text-xs tabular-nums",children:void 0!==i?i(o):"".concat(o).concat("hours"===l?" H":"")})]},s.name)},f=e=>{let{attributes:t,values:s,isAfterToday:r,tooltipFormatter:n,unit:i}=e,l=s.reduce((e,t)=>e+Number(t.value),0);return(0,a.jsx)(a.Fragment,{children:r?(0,a.jsx)("p",{className:"text-foreground-light text-lg",children:"No data yet"}):(0,a.jsx)("div",{className:"space-y-1 pb-1",children:t.flatMap(e=>{var t;let r=s.find(t=>t.dataKey===e.key);return 0===Number(null!=(t=null==r?void 0:r.value)?t:0)?[]:(0,a.jsx)(y,{attribute:e,attributeMeta:r,sumValue:l,tooltipFormatter:n,unit:i},e.name)})})})},j=e=>{let{data:t,name:s,attributes:r,unit:y,yLimit:j,yLeftMargin:b=10,yFormatter:v,yMin:S,tooltipFormatter:A}=e,_=[null!=S?S:0,Math.max(null!=S?S:0,null!=j?j:0)];return(0,a.jsx)("div",{className:"w-full h-[200px]","data-sentry-component":"UsageBarChart","data-sentry-source-file":"UsageBarChart.tsx",children:(0,a.jsx)(i.u,{width:"100%",height:200,"data-sentry-element":"ResponsiveContainer","data-sentry-source-file":"UsageBarChart.tsx",children:(0,a.jsxs)(l.X,{data:t,margin:{top:0,right:0,left:b,bottom:0},"data-sentry-element":"ComposedChart","data-sentry-source-file":"UsageBarChart.tsx",children:[(0,a.jsx)(o.d,{vertical:!1,strokeDasharray:"3 3",className:"stroke-border-stronger","data-sentry-element":"CartesianGrid","data-sentry-source-file":"UsageBarChart.tsx"}),(0,a.jsx)(d.W,{dataKey:"periodStartFormatted","data-sentry-element":"XAxis","data-sentry-source-file":"UsageBarChart.tsx"}),(0,a.jsx)(c.h,{width:40,axisLine:!1,tickLine:{stroke:"none"},domain:_,tickFormatter:v,"data-sentry-element":"YAxis","data-sentry-source-file":"UsageBarChart.tsx"}),(0,a.jsx)(u.m,{content:e=>{let{active:t,payload:i}=e;if(!t||!i||!i.length)return null;{let e=n()(i[0].payload.period_start),t=e.startOf("day").isAfter(n()().startOf("day"));return(0,a.jsxs)("div",{className:(0,x.cn)("border bg-surface-100 rounded-md px-2 py-2",r.length>1&&!t?"w-[250px]":"w-[170px]"),children:[r.length>1?(0,a.jsx)(f,{attributes:r,values:i,isAfterToday:t,tooltipFormatter:A,unit:y}):(0,a.jsx)(g,{name:s,unit:y,value:i[0].value,tooltipFormatter:A,isAfterToday:t}),(0,a.jsx)("p",{className:"text-xs text-foreground-light mt-1",children:e.format("DD MMM YYYY")})]})}},"data-sentry-element":"Tooltip","data-sentry-source-file":"UsageBarChart.tsx"}),null==r?void 0:r.map(e=>(0,a.jsx)(m.y,{dataKey:e.key,stackId:"a",children:t.map(t=>(0,a.jsx)(p.f,{className:h.hs[e.color].bar},"".concat(t.period_start)))},e.key))]})})})}},73591:(e,t,s)=>{s.d(t,{O:()=>a});let a={rolesV2:e=>["organization-members",e,"roles-v2"],invitations:e=>["organization-members",e,"invitations"],invitation:(e,t)=>["organization-members",e,"invitations",t],token:(e,t)=>["organization-members",e,"token",t]}},83416:(e,t,s)=>{s.d(t,{R:()=>a});let a={ANALYTICS:"access to analytics logs.",AUTH:"access to auth configurations and SSO providers.",DATABASE:"access to Postgres configurations, SQL snippets, SSL enforcement configurations and Typescript schema types.",DOMAINS:"access to custom domains and vanity subdomains.",EDGE_FUNCTIONS:"access to edge functions.",ENVIRONMENT:"access to environments/branches.",ORGANIZATIONS:"access to the organization and all its members.",PROJECTS:"access to creation and deletion of projects, each project's metadata, upgrade status, network restrictions and network bans.",REST:"access to PostgREST configurations.",SECRETS:"access to API keys, secrets and pgsodium configurations.",STORAGE:"access to storage buckets and files."}},87776:(e,t,s)=>{s.d(t,{n:()=>l});var a=s(56947),r=s(70938),n=s(4051);async function i(e,t){let{slug:s}=e;if(!s)throw Error("Organization slug is required");let{data:a,error:n}=await (0,r.Jt)("/platform/organizations/{slug}/oauth/apps",{params:{path:{slug:s},query:{type:"authorized"}}});return n&&(0,r.H4)(n),a}let l=function(e){let{slug:t}=e,{enabled:s=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)(n.R.authorizedApps(t),e=>{let{signal:s}=e;return i({slug:t},s)},{enabled:s&&void 0!==t,...r})}},91982:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(80263),r=s(53239),n=s(94844),i=s(38583);function l(e,t){if(!t.error)return delete e[t.key],e;if(t)return{...e,[t.key]:t.error};throw Error()}function o(e){let{validate:t,...s}=e,[o,d]=(0,r.useReducer)(l,null),c=(0,n.Wx)({validateOnBlur:!0,...s,validationSchema:s.validationSchema,initialValues:s.initialValues,onSubmit:s.onSubmit,validate:t||function(){return o}});return(0,a.jsx)("form",{id:s.id,name:s.name,onSubmit:c.handleSubmit,className:s.className,style:s.style,method:"POST","data-sentry-component":"Form","data-sentry-source-file":"Form.tsx",children:(0,a.jsx)(i.h,{values:c.values,errors:c.errors,formContextOnChange:c.handleChange,handleBlur:c.handleBlur,touched:c.touched,fieldLevelValidation:function(e,t){d({key:e,error:t})},"data-sentry-element":"FormContextProvider","data-sentry-source-file":"Form.tsx",children:s.children({errors:c.errors,touched:c.touched,isSubmitting:c.isSubmitting,isValidating:c.isValidating,submitCount:c.submitCount,initialValues:c.initialValues,values:c.values,handleReset:c.handleReset,resetForm:c.resetForm,setFieldValue:c.setFieldValue})})})}}}]);