try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="177198f0-ff64-4e22-88e9-49e6581e0d94",e._sentryDebugIdIdentifier="sentry-dbid-177198f0-ff64-4e22-88e9-49e6581e0d94")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7291],{19853:(e,t,s)=>{s.d(t,{T5:()=>o,YN:()=>c,_2:()=>u,gl:()=>i,vm:()=>d});var r=s(80263);s(60042),s(53239),s(37578);var a=s(37838),n=s(80797);s(53434);var l=s(80127);let o=e=>{let{children:t}=e;return(0,r.jsx)("div",{className:"flex h-full w-full items-center gap-4","data-sentry-component":"RowLayout","data-sentry-source-file":"LogsFormatters.tsx",children:t})},i=e=>{let{value:t,className:s}=e;return(0,r.jsx)("span",{className:(0,l.cn)("font-mono text-xs truncate select-text cursor-text",s),"data-sentry-component":"TextFormatter","data-sentry-source-file":"LogsFormatters.tsx",children:t})},d=e=>{let{value:t}=e;if(!t)return(0,r.jsx)("div",{children:(0,r.jsx)("label",{className:"text-xs text-border-stronger",children:"No data"})});let s=e=>{let{children:t,className:s}=e;return(0,r.jsx)("div",{className:"flex h-full items-center","data-sentry-component":"ResponseCodeItem","data-sentry-source-file":"LogsFormatters.tsx",children:(0,r.jsx)("div",{className:(0,l.cn)("relative flex h-6 items-center rounded-md justify-center px-2 py-1 text-center",s),children:(0,r.jsx)("label",{className:"block font-mono text-sm",children:t})})})};switch(t.toString().split("")[0]){case"1":return(0,r.jsx)(s,{children:t});case"2":return(0,r.jsx)(s,{className:"bg-surface-100 text-brand",children:t});case"5":return(0,r.jsx)(s,{className:"bg-red-300 text-red-1100",children:t});case"4":case"3":return(0,r.jsx)(s,{className:"bg-amber-300 text-amber-1100",children:t});default:return(0,r.jsx)(s,{className:"bg-surface-100 text-foreground-lighter",children:t})}},c=e=>{let{value:t,uppercase:s=!0}=e;if(!t)return(0,r.jsx)("div",{children:(0,r.jsx)("label",{className:"text-xs text-border-stronger",children:"No data"})});let l=t.toUpperCase(),o=s?l:t,i=e=>{let{className:t,children:s}=e;return(0,r.jsx)("div",{className:"w-24 flex items-center h-full ".concat(t),"data-sentry-component":"Layout","data-sentry-source-file":"LogsFormatters.tsx",children:s})};switch(l){case"UNCAUGHTEXCEPTION":case"PANIC":case"FATAL":case"ERROR":return(0,r.jsxs)(i,{className:"gap-1",children:[(0,r.jsx)("div",{className:" p-0.5 rounded !text-red-900",children:(0,r.jsx)(a.A,{size:14,strokeWidth:2})}),(0,r.jsx)("span",{className:"!text-red-900 !block titlecase",children:o})]});case"INFO":case"DEBUG":return(0,r.jsxs)(i,{className:"gap-1",children:[(0,r.jsx)("div",{className:" p-0.5 rounded !text-blue-900",children:(0,r.jsx)(a.A,{size:14,strokeWidth:2})}),(0,r.jsx)("span",{className:"!text-blue-900 !block titlecase",children:o})]});case"LOG":return(0,r.jsxs)(i,{className:"gap-1",children:[(0,r.jsx)("div",{className:" p-0.5 rounded !text-blue-900",children:(0,r.jsx)(n.A,{size:14,strokeWidth:2})}),(0,r.jsx)("span",{className:"!text-blue-900 !block titlecase",children:o})]});case"WARNING":return(0,r.jsxs)(i,{className:"gap-1",children:[(0,r.jsx)("div",{className:" p-0.5 rounded !text-amber-900",children:(0,r.jsx)(a.A,{size:14,strokeWidth:2})}),(0,r.jsx)("span",{className:"!text-amber-900 !block titlecase",children:o})]});default:return(0,r.jsx)(i,{children:(0,r.jsx)("div",{className:"relative rounded px-2 py-1 text-center h-6 flex justify-center items-center bg-surface-100",children:(0,r.jsx)("label",{className:"block font-mono text-sm text-foreground-lighter",children:o})})})}};function u(e){let t=JSON.stringify(e,null,2);return(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="number text-tomato-900";return/^"/.test(e)?t=/:$/.test(e)?"key text-foreground":"string text-brand-600":/true|false/.test(e)?t="boolean text-blue-900":/null/.test(e)&&(t="null text-amber-1100"),'<span class="'+t+'">'+e+"</span>"}).split("\n").map(e=>'<span class="line text-xs">'.concat(e,"</span>")).join("\n")}},20550:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(80263);let a=e=>{let{children:t,active:s,className:a}=e;return(0,r.jsx)("div",{className:[a,"flex h-full flex-grow transition-opacity ",s?"opacity-30":"opacity-100"].join(" "),"data-sentry-component":"LoadingOpacity","data-sentry-source-file":"LoadingOpacity.tsx",children:t})}},26319:(e,t,s)=>{s.d(t,{A:()=>eE});var r=s(80263),a=s(60045),n=s(84305),l=s.n(n),o=s(10426),i=s(93102),d=s(68271),c=s(21329),u=s(53239),m=s(9711),x=s(24560),f=s(37034),p=s(46491),g=s(84558),h=s(30117),y=s(94110),j=s(75831),v=s(67285),w=s(73969),b=s(70979),N=s(80127),S=s(22554),C=s(85469),D=s(19853),T=s(92737);let k=e=>(0,r.jsxs)(D.T5,{"data-sentry-element":"RowLayout","data-sentry-component":"defaultRenderCell","data-sentry-source-file":"DefaultPreviewColumnRenderer.tsx",children:[(0,r.jsx)(T.T,{utcTimestamp:e.row.timestamp,"data-sentry-element":"TimestampInfo","data-sentry-source-file":"DefaultPreviewColumnRenderer.tsx"}),(0,r.jsx)(D.gl,{className:"w-full",value:e.row.event_message,"data-sentry-element":"TextFormatter","data-sentry-source-file":"DefaultPreviewColumnRenderer.tsx"})]}),E=[{name:"default-preview-first-column",key:"default-preview-first-column",renderCell:k}],R=[{name:"auth-first-column",key:"auth-first-column",renderCell:e=>{var t;return e.row.level?(0,r.jsxs)(D.T5,{children:[(0,r.jsx)(T.T,{utcTimestamp:e.row.timestamp}),e.row.level&&(0,r.jsx)(D.YN,{value:e.row.level}),(0,r.jsx)(D.gl,{className:"w-full",value:"".concat(e.row.path?e.row.path+" | ":"").concat((null==(t=e.row.msg)?void 0:t.trim())||e.row.event_message)})]}):k(e)}}],L=[{name:"database-api-first-column",key:"database-api-first-column",renderCell:e=>e.row.status_code||e.row.method||e.row.path?(0,r.jsxs)(D.T5,{children:[(0,r.jsx)(T.T,{utcTimestamp:e.row.timestamp}),(0,r.jsx)(D.vm,{value:String(e.row.status_code)}),(0,r.jsx)(D.gl,{value:String(e.row.method)}),(0,r.jsx)(D.gl,{value:String(e.row.path)})]}):k(e)}],_=[{name:"database-postgres-first-column",key:"database-postgres-first-column",renderCell:e=>e.row.error_severity?(0,r.jsxs)(D.T5,{children:[(0,r.jsx)(T.T,{utcTimestamp:e.row.timestamp}),(0,r.jsx)(D.YN,{value:e.row.error_severity}),(0,r.jsx)(D.gl,{className:"w-full",value:e.row.event_message}),e.row.detail?(0,r.jsx)(D.gl,{value:e.row.detail}):null,e.row.hint?(0,r.jsx)(D.gl,{value:e.row.hint}):null]}):k(e)}],A=[{name:"functions-edge-first-column",key:"functions-edge-first-column",renderCell:e=>e.row.status_code||e.row.method?(0,r.jsxs)(D.T5,{children:[(0,r.jsx)(T.T,{utcTimestamp:e.row.timestamp}),(0,r.jsx)(D.vm,{value:String(e.row.status_code)}),(0,r.jsx)(D.gl,{value:String(e.row.method)}),(0,r.jsx)(D.gl,{value:String(e.row.id)})]}):k(e)}],H=[{name:"functions-logs-first-column",key:"functions-logs-first-column",renderCell:e=>e.row.event_type||e.row.level?(0,r.jsxs)(D.T5,{children:[(0,r.jsx)(T.T,{utcTimestamp:e.row.timestamp}),"uncaughtException"===e.row.event_type?(0,r.jsx)(D.YN,{value:e.row.event_type,uppercase:!1}):(0,r.jsx)(D.YN,{value:e.row.level}),(0,r.jsx)(D.gl,{className:"w-full",value:e.row.event_message})]}):k(e)}];var P=s(24699),M=s(36839),I=s(79993),z=s(47134),O=s(1399),B=s(96827),F=s(72101),$=function(e){return e.Auth="AUTH",e.Realtime="REALTIME",e.Storage="STORAGE",e}({});class U extends String{toString(){return this.value}constructor(e,t){super(e),(0,F._)(this,"__apiType",void 0),(0,F._)(this,"value",void 0),(0,F._)(this,"__meta__",void 0),this.value=e,this.__meta__=t}}let J=new U("\n    query ErrorCodeQuery($code: String!, $service: Service) {\n  errors(code: $code, service: $service) {\n    nodes {\n      code\n      service\n      message\n    }\n  }\n}\n    ");var q=s(49300),W=s(39119),G=s(64495),Y=s(19506),V=s(34531),Z=s(38112),Q=s(95998),K=s(56947);let X={"\n  query ErrorCodeQuery($code: String!, $service: Service) {\n    errors(code: $code, service: $service) {\n      nodes {\n        code\n        service\n        message\n      }\n    }\n  }\n":J};var ee=s(70938);async function et(e,t){let{variables:s,signal:r}=t;try{let t=await fetch("https://supabase.com/docs/api/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,variables:s}),signal:r});if(!t.ok)throw Error("Failed network response from Content API");let{data:a,errors:n}=await t.json();if(n)throw n;return a}catch(e){(0,ee.H4)(e)}}let es={errorCodes:e=>{let{code:t,service:s}=e;return["content-api","error-codes",{code:t,service:s}]}},er=function(e){var t;return null!=(t=X[e])?t:{}}("\n  query ErrorCodeQuery($code: String!, $service: Service) {\n    errors(code: $code, service: $service) {\n      nodes {\n        code\n        service\n        message\n      }\n    }\n  }\n");async function ea(e,t){let{code:s,service:r}=e;return await et(er,{variables:{code:s,service:r},signal:t})}let en=function(e){let{enabled:t=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,K.I)(es.errorCodes(e),t=>{let{signal:s}=t;return ea(e,s)},{enabled:t,...s})};var el=s(92818);let eo=e=>{let{open:t,onOpenChange:s,errorCode:a,service:n}=e,{data:l,isLoading:o,isSuccess:i,refetch:d}=en({code:a,service:n},{enabled:t});return(0,r.jsx)(Y.lG,{open:t,onOpenChange:s,"data-sentry-element":"Dialog","data-sentry-component":"ErrorCodeDialog","data-sentry-source-file":"ErrorCodeDialog.tsx",children:(0,r.jsx)(Y.Cf,{"data-sentry-element":"DialogContent","data-sentry-source-file":"ErrorCodeDialog.tsx",children:(0,r.jsxs)(Y.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"ErrorCodeDialog.tsx",children:[(0,r.jsxs)(Y.L3,{className:"mb-4","data-sentry-element":"DialogTitle","data-sentry-source-file":"ErrorCodeDialog.tsx",children:["Help for error code ",(0,r.jsx)("code",{children:a})]}),(0,r.jsxs)(Y.rr,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"ErrorCodeDialog.tsx",children:[o&&(0,r.jsx)(ei,{}),i&&(0,r.jsx)(ed,{data:l}),!o&&!i&&(0,r.jsx)(eu,{refetch:d})]})]})})})},ei=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(B.A,{className:"w-3/4 mb-2","data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"ErrorCodeDialog.tsx"}),(0,r.jsx)(B.A,{className:"w-1/2","data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"ErrorCodeDialog.tsx"})]}),ed=e=>{var t,s;let{data:a}=e,n=null==a||null==(s=a.errors)||null==(t=s.nodes)?void 0:t.filter(e=>!!e.message);return n&&0!==n.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"mb-4",children:"Possible explanations for this error:"}),(0,r.jsx)("div",{className:"grid gap-2 grid-cols-[max-content_1fr]",children:n.map(e=>(0,r.jsx)(ec,{...e},"".concat(e.service,"-").concat(e.code)))})]}):(0,r.jsx)(r.Fragment,{children:"No information found for this error code."})},ec=e=>{let{code:t,service:s,message:a}=e;return a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(V.E,{className:"h-fit","data-sentry-element":"Badge","data-sentry-source-file":"ErrorCodeDialog.tsx",children:s}),(0,r.jsx)("p",{children:a})]}):null},eu=e=>{let{refetch:t}=e;return(0,r.jsxs)(Z.Fc,{variant:"warning","data-sentry-element":"Alert_Shadcn_","data-sentry-component":"ErrorState","data-sentry-source-file":"ErrorCodeDialog.tsx",children:[(0,r.jsx)(el.A,{"data-sentry-element":"AlertTriangle","data-sentry-source-file":"ErrorCodeDialog.tsx"}),(0,r.jsx)(Z.XL,{"data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"ErrorCodeDialog.tsx",children:"Lookup failed"}),(0,r.jsxs)(Z.TN,{"data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"ErrorCodeDialog.tsx",children:[(0,r.jsx)("p",{children:"Failed to look up error code help info"}),t&&(0,r.jsx)(Q.$,{variant:"outline",size:"sm",className:"mt-2",onClick:t,children:"Try again"})]})]})},em=e=>{let{value:t,className:s}=e;return(0,r.jsx)("pre",{className:(0,N.cn)("px-1 bg-surface-300 w-full pt-1 max-w-full border-none text-xs prose-sm transition-all overflow-auto rounded-md whitespace-pre-wrap",s),"data-sentry-component":"LogRowCodeBlock","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx",children:JSON.stringify(t,null,2)})},ex=()=>(0,r.jsx)(W.w,{className:"bg-border my-1","data-sentry-element":"Separator","data-sentry-component":"LogRowSeparator","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx"}),ef=e=>{let{keyName:t,value:s,dataTestId:a,path:n}=e,{setSearch:l}=(0,q.B)(),[o,i]=(0,u.useState)(!1),d=(null==n?void 0:n.startsWith("/auth/"))?$.Auth:void 0,c=async(e,t)=>{let{query:s}=t;l(s||"")},m="timestamp"===t||"created_at"===t||"updated_at"===t,x="object"==typeof s&&null!==s,f="status"===t||"status_code"===t,p="method"===t,g="search"===t,h="user_agent"===t,y="event_message"===t,j="path"===t,v="log-viewer-expanded-".concat(t),[C,k]=(0,u.useState)(()=>{try{var e;return JSON.parse(null!=(e=localStorage.getItem(v))?e:"false")}catch(e){return!1}}),[E,R]=(0,u.useState)(!1);return((0,u.useEffect)(()=>{localStorage.setItem(v,JSON.stringify(C))},[C,v]),x||y)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("h3",{className:"text-foreground-lighter text-sm pl-3 py-2",children:t}),(0,r.jsxs)("div",{children:[(0,r.jsx)(em,{className:(0,N.cn)("px-2.5",{"max-h-[80px]":!C,"max-h-[400px]":C,"py-2":y}),value:s}),!y&&(0,r.jsx)(S.$,{className:"mt-1 w-full",size:"tiny",type:"outline",onClick:()=>k(!C),children:C?"Collapse":"Expand"})]})]}),(0,r.jsx)(ex,{})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(G.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx",children:[(0,r.jsx)(G.ty,{className:"group w-full","data-testid":a,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx",children:(0,r.jsx)("div",{className:"rounded-md w-full overflow-hidden",children:(0,r.jsxs)("div",{className:(0,N.cn)("flex h-10 w-full",{"flex-col gap-1.5 h-auto":C,"items-center group-hover:bg-surface-300 gap-4":!C}),children:[(0,r.jsx)("h3",{className:(0,N.cn)("pl-3 text-foreground-lighter text-sm text-left",{"h-10 flex items-center":C}),children:t}),(0,r.jsx)("div",{className:(0,N.cn)("text-xs flex-1 font-mono text-foreground pr-3",{"max-w-full text-left rounded-md p-2 bg-surface-300 text-xs w-full":C,"truncate text-right":!C,"text-brand-600":E}),children:C?(0,r.jsx)(em,{value:s}):m?(0,r.jsx)(T.T,{className:"text-sm",utcTimestamp:s}):f||p?(0,r.jsx)("div",{className:"flex items-center gap-1 justify-end",children:(0,r.jsx)(D.vm,{value:s})}):(0,r.jsx)("div",{className:"truncate",children:s})})]})})}),(0,r.jsxs)(G.SQ,{align:"start","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx",children:["error_code"===t&&(0,r.jsx)(G._2,{onClick:()=>{i(!0)},children:"More information"}),(0,r.jsxs)(G._2,{onClick:()=>{(0,b.l)(String(s),()=>{R(!0),w.oR.success("Copied to clipboard")}),setTimeout(()=>{R(!1)},1e3)},"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx",children:["Copy ",t]}),!x&&(0,r.jsxs)(G._2,{onClick:()=>{k(!C)},children:[C?"Collapse":"Expand"," value"]}),(p||h||f||j)&&(0,r.jsxs)(G._2,{onClick:()=>{c("search-input-change",{query:s})},children:["Search by ",t]}),g?(g&&"string"==typeof s?(s.startsWith("?")?s.slice(1):s).split("&").filter(Boolean):[]).map(e=>(0,r.jsxs)(G._2,{onClick:()=>{c("search-input-change",{query:e})},children:["Search by ",e]},e)):null]}),(0,r.jsx)(ex,{"data-sentry-element":"LogRowSeparator","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx"})]}),"error_code"===t&&(0,r.jsx)(eo,{open:o,onOpenChange:i,errorCode:String(s),service:d})]})},ep=e=>{var t,s;let{log:a}=e,{timestamp:n,event_message:l,metadata:o,id:i,status:d,...c}=a,u="string"==typeof a.path?a.path:void 0,m=null==a||null==(s=a.metadata)||null==(t=s[0])?void 0:t.log_file;return(0,r.jsxs)("div",{"data-testid":"log-selection",className:"p-2 flex flex-col","data-sentry-component":"DefaultPreviewSelectionRenderer","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx",children:[(null==a?void 0:a.id)&&(0,r.jsx)(ef,{dataTestId:"log-selection-id",keyName:"id",value:a.id},"id"),(null==a?void 0:a.status)&&(0,r.jsx)(ef,{keyName:"status",value:a.status},"status"),(null==a?void 0:a.timestamp)&&(0,r.jsx)(ef,{keyName:"timestamp",value:a.timestamp},"timestamp"),Object.entries(c).map(e=>{let[t,s]=e;return(0,r.jsx)(ef,{keyName:t,value:s,path:u},t)}),(null==a?void 0:a.event_message)&&(0,r.jsx)(ef,{keyName:"event_message",value:a.event_message},"event_message"),!!m&&(0,r.jsx)(ef,{keyName:"log_file",value:m},"log_file"),(null==a?void 0:a.metadata)&&(0,r.jsx)(ef,{keyName:"metadata",value:a.metadata},"metadata")]})};var eg=s(37578);let eh=e=>{let{log:t,onClose:s,queryType:a,isLoading:n,error:l}=e,[o,i]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{if(!o)return;let e=setTimeout(()=>i(!1),2e3);return()=>clearTimeout(e)},[o]),(0,r.jsx)("div",{className:"relative flex h-full flex-grow flex-col overflow-y-scroll bg-surface-100 border-t","data-sentry-component":"LogSelection","data-sentry-source-file":"LogSelection.tsx",children:(0,r.jsx)("div",{className:"relative flex-grow flex flex-col h-full",children:(0,r.jsxs)(z.tU,{defaultValue:"details",className:"flex flex-col h-full","data-sentry-element":"Tabs_Shadcn_","data-sentry-source-file":"LogSelection.tsx",children:[(0,r.jsxs)(z.j7,{className:"px-2 pt-2 relative","data-sentry-element":"TabsList_Shadcn_","data-sentry-source-file":"LogSelection.tsx",children:[(0,r.jsx)(z.Xi,{className:"px-3",value:"details","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"LogSelection.tsx",children:"Details"}),(0,r.jsx)(z.Xi,{disabled:!t,className:"px-3",value:"raw","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"LogSelection.tsx",children:"Raw"}),(0,r.jsxs)("div",{className:"*:px-1.5 *:text-foreground-lighter ml-auto flex gap-1 absolute right-2 top-2",children:[(0,r.jsx)(g.G,{disabled:!t||n,type:"text",tooltip:{content:{text:n?"Loading log...":"Copy as JSON"}},onClick:()=>{i(!0),(0,b.l)(JSON.stringify(t,null,2))},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"LogSelection.tsx",children:o?(0,r.jsx)(P.A,{size:14,strokeWidth:2}):(0,r.jsx)(c.A,{size:14,strokeWidth:2})}),(0,r.jsx)(S.$,{type:"text",onClick:s,"data-sentry-element":"Button","data-sentry-source-file":"LogSelection.tsx",children:(0,r.jsx)(M.A,{size:14,strokeWidth:2,"data-sentry-element":"X","data-sentry-source-file":"LogSelection.tsx"})})]})]}),(0,r.jsx)("div",{className:"flex-1 h-full",children:n?(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)(B.y,{})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.av,{className:"space-y-6 h-full",value:"details",children:(0,r.jsx)(()=>{var e,s,n,o,i,d,c,u,m,x,f,p,g,h,y,j,v,w,b,N,S,C,D,T,k,E,R,L,_,A,H,P,M,I,z,O,B,F,$;if(l)return(0,r.jsx)(ej,{error:l});if(!t)return(0,r.jsx)(ey,{});switch(a){case"api":let U=null==t||null==(o=t.metadata)||null==(n=o[0])||null==(s=n.response)||null==(e=s[0])?void 0:e.status_code,J=null==t||null==(u=t.metadata)||null==(c=u[0])||null==(d=c.request)||null==(i=d[0])?void 0:i.method,q=null==t||null==(p=t.metadata)||null==(f=p[0])||null==(x=f.request)||null==(m=x[0])?void 0:m.path,W=null==t||null==(j=t.metadata)||null==(y=j[0])||null==(h=y.request)||null==(g=h[0])?void 0:g.search,G=null==t||null==(N=t.metadata)||null==(b=N[0])||null==(w=b.request)||null==(v=w[0])?void 0:v.headers[0].user_agent,Y=null==t||null==(E=t.metadata)||null==(k=E[0])||null==(T=k.response)||null==(D=T[0])||null==(C=D.headers)||null==(S=C[0])?void 0:S.x_sb_error_code,V=null!=(R=(0,eg.$f)(null==t?void 0:t.metadata))?R:(0,eg.Kz)(null==t?void 0:t.metadata),Z=(0,eg.JC)(null==t?void 0:t.metadata),{id:Q,metadata:K,timestamp:X,event_message:ee,...et}=t,es={id:Q,status:U,method:J,path:q,search:W,user_agent:G,timestamp:X,event_message:ee,metadata:K,...V?{apikey:V}:null,...Y?{error_code:Y}:null,...Z?{role:Z}:null,...et};return(0,r.jsx)(ep,{log:es});case"database":let er=null==t||null==(H=t.metadata)||null==(A=H[0])||null==(_=A.parsed)||null==(L=_[0])?void 0:L.hint,ea=null==t||null==(z=t.metadata)||null==(I=z[0])||null==(M=I.parsed)||null==(P=M[0])?void 0:P.detail,en=null==t||null==($=t.metadata)||null==(F=$[0])||null==(B=F.parsed)||null==(O=B[0])?void 0:O.query,el={...er&&{hint:er},...ea&&{detail:ea},...en&&{query:en},...t};return(0,r.jsx)(ep,{log:el});default:return(0,r.jsx)(ep,{log:t})}},{})}),(0,r.jsx)(z.av,{value:"raw",children:(0,r.jsx)(O.N,{hideLineNumbers:!0,language:"json",className:"prose w-full pt-0 max-w-full border-none",children:JSON.stringify(t,null,2)})})]})})]})})})};function ey(e){let{title:t="Select an Event",message:s="Select an Event to view the complete JSON payload"}=e;return(0,r.jsx)("div",{className:(0,N.cn)("flex h-full w-full flex-col items-center justify-center gap-2 overflow-y-scroll text-center transition-all px-4"),"data-sentry-component":"LogDetailEmptyState","data-sentry-source-file":"LogSelection.tsx",children:(0,r.jsxs)("div",{className:(0,N.cn)("flex w-full max-w-sm flex-col items-center justify-center gap-6 text-center transition-all delay-300 duration-500"),children:[(0,r.jsxs)("div",{className:"relative flex h-4 w-32 items-center rounded border border-control px-2",children:[(0,r.jsx)("div",{className:"h-0.5 w-2/3 rounded-full bg-surface-300"}),(0,r.jsx)("div",{className:"absolute right-1 -bottom-4",children:(0,r.jsx)(I.A,{size:"24",strokeWidth:1,"data-sentry-element":"MousePointerClick","data-sentry-source-file":"LogSelection.tsx"})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("h3",{className:"text-sm text-foreground",children:t}),(0,r.jsx)("p",{className:"text-xs text-foreground-lighter",children:s})]})]})})}function ej(e){let{error:t}=e;return(0,r.jsx)("pre",{"data-sentry-component":"LogErrorState","data-sentry-source-file":"LogSelection.tsx",children:JSON.stringify(t,null,2)})}let ev=e=>{let{error:t}=e;return(0,r.jsx)("div",{className:"w-full prose min-w-full text-foreground text-sm","data-sentry-component":"DefaultErrorRenderer","data-sentry-source-file":"DefaultErrorRenderer.tsx",children:(0,r.jsx)(O.N,{title:"Error fetching logs",language:"json",hideLineNumbers:!0,value:"string"==typeof t?t:JSON.stringify(t,null,2),className:"w-full font-mono","data-sentry-element":"CodeBlock","data-sentry-source-file":"DefaultErrorRenderer.tsx"})})};var ew=s(69751),eb=s(83759),eN=s(92413);let eS=(0,u.createContext)({chevronAlign:"left",justified:!0,type:"default"});function eC(e){let{children:t,className:s,onChange:a,openBehaviour:n="multiple",type:l="default",defaultValue:o,justified:i=!1,chevronAlign:d="left"}=e,c=[(0,eN.A)("accordion").variants[l].base];return s&&c.push(s),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(ew.bL,{type:n,onValueChange:function(e){a&&a(e),e==typeof String&&e.split(" ")},defaultValue:o,className:c.join(" "),"data-sentry-element":"RadixAccordion.Root","data-sentry-source-file":"Accordion.tsx",children:(0,r.jsx)(eS.Provider,{value:{chevronAlign:d,justified:i,type:l,defaultValue:o},"data-sentry-element":"AccordionContext.Provider","data-sentry-source-file":"Accordion.tsx",children:(0,r.jsx)("div",{children:t})})})})}eC.Item=function(e){let{children:t,className:s,header:a,id:n,disabled:l}=e,o=(0,eN.A)("accordion"),[i,d]=(0,u.useState)(!1),{type:c,justified:m,chevronAlign:x}=(0,u.useContext)(eS),f=[o.variants[c].trigger];m&&f.push(o.justified),s&&f.push(s);let p=[o.chevron.base,o.chevron.align[x]];return i&&!l&&p.unshift("!rotate-180"),(0,r.jsxs)(ew.q7,{value:n,className:o.variants[c].container,disabled:l,onClick:()=>{d(!i)},"data-sentry-element":"RadixAccordion.Item","data-sentry-component":"Item","data-sentry-source-file":"Accordion.tsx",children:[(0,r.jsxs)(ew.l9,{className:f.join(" "),"data-sentry-element":"RadixAccordion.Trigger","data-sentry-source-file":"Accordion.tsx",children:[a,!l&&(0,r.jsx)(eb.A,{"aria-hidden":!0,className:p.join(" "),strokeWidth:2})]}),(0,r.jsx)(ew.UC,{className:o.variants[c].content,"data-sentry-element":"RadixAccordion.Content","data-sentry-source-file":"Accordion.tsx",children:(0,r.jsx)("div",{className:o.variants[c].panel,children:t})})]})};var eD=s(48192);let eT=e=>{let{error:t,isCustomQuery:s}=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-2 text-foreground-light","data-sentry-component":"ResourcesExceededErrorRenderer","data-sentry-source-file":"ResourcesExceededErrorRenderer.tsx",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1 text-sm",children:[(0,r.jsx)("p",{children:"This query requires too much memory to be executed."}),(0,r.jsx)("p",{children:s?"Avoid selecting entire objects and instead select specific keys using dot notation.":"Avoid querying across a large datetime range."}),!s&&(0,r.jsx)("p",{children:"Please contact support if this error persists."})]}),(0,r.jsx)(eC,{className:"text-sm",justified:!1,openBehaviour:"multiple",type:"default",chevronAlign:"left",size:"small",iconPosition:"left","data-sentry-element":"Accordion","data-sentry-source-file":"ResourcesExceededErrorRenderer.tsx",children:(0,r.jsx)(eC.Item,{id:"1",header:"Full error message","data-sentry-element":"Accordion.Item","data-sentry-source-file":"ResourcesExceededErrorRenderer.tsx",children:(0,r.jsx)(eD.A.TextArea,{size:"tiny",value:JSON.stringify(t,null,2),borderless:!0,className:"mt-4 w-full font-mono",copy:!0,rows:5,"data-sentry-element":"Input.TextArea","data-sentry-source-file":"ResourcesExceededErrorRenderer.tsx"})})})]})};var ek=s(58246);let eE=e=>{let{data:t=[],queryType:s,onHistogramToggle:n,isHistogramShowing:D,isLoading:T,isSaving:k,error:P,projectRef:M,onRun:I,onSave:z,hasEditorValue:O,className:B,EmptyState:F,showHeader:$=!0,showHistogramToggle:U=!0,selectedLog:J,isSelectedLogLoading:q,selectedLogError:W,onSelectedLogChange:G}=e,{ref:Y}=(0,p.g)(),{profile:V}=(0,v.xc)(),[Z]=(0,y.t)(),{show:Q}=(0,m.EF)(),[K,X]=(0,u.useState)(),[ee,et]=(0,u.useState)(!1),[es,er]=(0,u.useState)(null),{can:ea}=(0,j.hl)(a.aG.CREATE,"user_content",{resource:{type:"log_sql",owner_id:null==V?void 0:V.id},subject:{id:null==V?void 0:V.id}}),en=t[0],el=Object.keys(function(){if(!en)return{};let{timestamp:e,...t}=en;return e?{timestamp:e,...t}:en}()||{}),eo=el.includes("id"),ei=el.includes("timestamp"),ed="logs-explorer-context-menu",ec=el.map((e,t)=>({key:"logs-column-".concat(t),name:e,resizable:!0,renderCell:t=>{let{row:s}=t;return(0,r.jsx)("span",{onContextMenu:t=>{t.preventDefault(),X({row:s,column:{name:e}}),Q(t,{id:ed})},children:ey(null==s?void 0:s[e])})},renderHeaderCell:t=>(0,r.jsx)("div",{className:"flex items-center",children:e}),minWidth:128})),eu=ec;if(s)switch(s){case"api":eu=L;break;case"database":case"pg_cron":eu=_;break;case"fn_edge":eu=A;break;case"functions":eu=H;break;case"auth":eu=R;break;default:eu=en&&(0,eg.Nd)(en)?E:ec}let[em,ex]=(0,u.useMemo)(()=>{let e=[...new Set(t)];if(!eo)return[e,{}];let s=e.reduce((e,t)=>(e[t.id]=t,e),{});return[e,s]},[t,eo]),ef=(0,u.useMemo)(()=>eo&&ei?Object.values(ex).sort((e,t)=>t.timestamp-e.timestamp):em,[em,eo,ei,ex]),ep=(0,u.useCallback)((e,t)=>(0,r.jsx)(x.fI,{...t,isRowSelected:!1,selectedCellIdx:void 0,onContextMenu:e=>{eu.length>0&&X({row:t.row,column:eu[0]}),Q(e,{id:ed})}},e),[eu,Q]),ey=e=>e&&"object"==typeof e?JSON.stringify(e):null===e?"NULL":String(e);function ej(e){er(e),null==G||G(e)}let ew=(0,u.useCallback)(e=>{if(!ef.length||!es)return;let t=ef.findIndex(e=>l()(e,es));-1!==t&&("ArrowUp"===e.key&&t>0?ej(ef[t-1]):"ArrowDown"===e.key&&t<ef.length-1&&ej(ef[t+1]))},[ef,es,ej]);return((0,u.useEffect)(()=>{(J||q)&&et(!0),q||J||er(null)},[J,q]),(0,u.useEffect)(()=>(window.addEventListener("keydown",ew),()=>{window.removeEventListener("keydown",ew)}),[ew]),(0,u.useEffect)(()=>{if(!T&&!es){let e=t.find(e=>e.id===Z);e&&er(e)}},[T]),t)?(0,r.jsxs)("section",{className:"h-full flex w-full flex-col flex-1","data-sentry-component":"LogTable","data-sentry-source-file":"LogTable.tsx",children:[!s&&(0,r.jsx)(()=>(0,r.jsxs)("div",{className:(0,N.cn)("flex w-full items-center justify-between border-t bg-surface-100 px-5 py-2",B,{hidden:!$}),"data-sentry-component":"LogsExplorerTableHeader","data-sentry-source-file":"LogTable.tsx",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)(h.b,{type:"text",text:"Results ".concat(t&&t.length?"(".concat(t.length,")"):""),results:t,fileName:"supabase-logs-".concat(Y,".csv"),"data-sentry-element":"DownloadResultsButton","data-sentry-source-file":"LogTable.tsx"})}),U&&(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)(S.$,{type:"default",icon:D?(0,r.jsx)(o.A,{}):(0,r.jsx)(i.A,{}),onClick:n,children:"Histogram"})}),(0,r.jsxs)("div",{className:"space-x-2",children:[p.pe&&(0,r.jsx)(g.G,{type:"default",onClick:z,loading:k,disabled:!ea||!O,tooltip:{content:{side:"bottom",text:ea?void 0:"You need additional permissions to save your query"}},children:"Save query"}),(0,r.jsx)(S.$,{title:"run-logs-query",type:O?"primary":"alternative",disabled:!O,onClick:I,iconRight:(0,r.jsx)(d.A,{size:12}),loading:T,"data-sentry-element":"Button","data-sentry-source-file":"LogTable.tsx",children:"Run"})]})]}),{}),(0,r.jsxs)(C.HK,{direction:"horizontal","data-sentry-element":"ResizablePanelGroup","data-sentry-source-file":"LogTable.tsx",children:[(0,r.jsxs)(C.wV,{defaultSize:J?60:100,"data-sentry-element":"ResizablePanel","data-sentry-source-file":"LogTable.tsx",children:[(0,r.jsx)(x.Ay,{role:"table",style:{height:"100%"},className:(0,N.cn)("flex-1 flex-grow h-full border-0",{"data-grid--simple-logs":s,"data-grid--logs-explorer":!s}),rowHeight:40,headerRowHeight:28*!s,onSelectedCellChange:e=>{X(e)},onCellClick:e=>{ej(e.row)},columns:eu,rowClass:e=>(0,N.cn)("font-mono tracking-tight !bg-studio hover:!bg-surface-100 cursor-pointer",{"!bg-surface-200 rdg-row--focused":l()(e,es)}),rows:ef,rowKeyGetter:e=>eo?e.id:JSON.stringify(e),renderers:{renderRow:ep,noRowsFallback:T?null:(0,r.jsxs)(r.Fragment,{children:[0===ef.length&&!P&&(0,r.jsx)(()=>F||(0,r.jsx)(ek.y,{}),{}),P&&(0,r.jsx)(()=>{var e;if(!P)return null;let t={isCustomQuery:!s,error:P};return"object"==typeof P&&(null==(e=P.error)?void 0:e.errors.find(e=>"resourcesExceeded"===e.reason))?(0,r.jsx)(eT,{...t}):(0,r.jsx)("div",{className:"text-foreground flex gap-2 font-mono p-4","data-sentry-component":"RenderErrorAlert","data-sentry-source-file":"LogTable.tsx",children:(0,r.jsx)(ev,{...t,"data-sentry-element":"DefaultErrorRenderer","data-sentry-source-file":"LogTable.tsx"})})},{})]})},"data-sentry-element":"DataGrid","data-sentry-source-file":"LogTable.tsx"}),(0,f.createPortal)((0,r.jsx)(m.W1,{id:ed,animation:!1,children:(0,r.jsxs)(m.q7,{onClick:()=>{if(!K)return;let e=K.row.event_message;(0,b.l)(e,()=>{w.oR.success("Copied to clipboard")})},children:[(0,r.jsx)(c.A,{size:14}),(0,r.jsx)("span",{className:"ml-2 text-xs",children:"Copy event message"})]})}),document.body)]}),(0,r.jsx)(C.WM,{withHandle:!0,"data-sentry-element":"ResizableHandle","data-sentry-source-file":"LogTable.tsx"}),ee&&(0,r.jsx)(C.wV,{minSize:40,defaultSize:50,children:(0,r.jsx)(eh,{isLoading:q||!1,projectRef:M,onClose:()=>{null==G||G(null),et(!1)},log:J,error:W,queryType:s})})]})]}):null}},27937:(e,t,s)=>{s.d(t,{A:()=>c});var r=s(80263),a=s(93749),n=s.n(a),l=s(52445),o=s(33924),i=s(22554),d=s(56390);let c=e=>{let{show:t,setShowUpgradePrompt:s,title:a="Log retention",description:c="Logs can be retained up to a duration of 3 months depending on the plan that your project is on.",source:u="logsRetentionUpgradePrompt"}=e,{data:m}=(0,l.s)();return(0,r.jsxs)(o.A,{hideFooter:!0,visible:t,size:"medium",header:a,onCancel:()=>s(!1),"data-sentry-element":"Modal","data-sentry-component":"UpgradePrompt","data-sentry-source-file":"UpgradePrompt.tsx",children:[(0,r.jsx)(o.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"UpgradePrompt.tsx",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-sm",children:c}),(0,r.jsxs)("div",{className:"border-control bg-surface-300 rounded border",children:[(0,r.jsxs)("div",{className:"flex items-center px-4 pt-2 pb-1",children:[(0,r.jsx)("p",{className:"text-foreground-light w-[40%] text-sm",children:"Plan"}),(0,r.jsx)("p",{className:"text-foreground-light w-[60%] text-sm",children:"Retention duration"})]}),(0,r.jsxs)("div",{className:"py-1",children:[(0,r.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,r.jsx)("p",{className:"w-[40%] text-sm",children:"Free"}),(0,r.jsx)("p",{className:"w-[60%] text-sm",children:d.rU.FREE.text})]}),(0,r.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,r.jsx)("p",{className:"w-[40%] text-sm",children:"Pro"}),(0,r.jsx)("p",{className:"w-[60%] text-sm",children:d.rU.PRO.text})]}),(0,r.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,r.jsx)("p",{className:"w-[40%] text-sm",children:"Team"}),(0,r.jsx)("p",{className:"w-[60%] text-sm",children:d.rU.TEAM.text})]}),(0,r.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,r.jsx)("p",{className:"w-[40%] text-sm",children:"Enterprise"}),(0,r.jsx)("p",{className:"w-[60%] text-sm",children:d.rU.ENTERPRISE.text})]})]})]})]})}),(0,r.jsx)(o.A.Separator,{"data-sentry-element":"Modal.Separator","data-sentry-source-file":"UpgradePrompt.tsx"}),(0,r.jsxs)(o.A.Content,{className:"flex justify-end gap-3","data-sentry-element":"Modal.Content","data-sentry-source-file":"UpgradePrompt.tsx",children:[(0,r.jsx)(i.$,{type:"default",onClick:()=>s(!1),"data-sentry-element":"Button","data-sentry-source-file":"UpgradePrompt.tsx",children:"Close"}),(0,r.jsx)(i.$,{asChild:!0,size:"tiny","data-sentry-element":"Button","data-sentry-source-file":"UpgradePrompt.tsx",children:(0,r.jsx)(n(),{href:"/org/".concat(null==m?void 0:m.slug,"/billing?panel=subscriptionPlan&source=").concat(u),"data-sentry-element":"Link","data-sentry-source-file":"UpgradePrompt.tsx",children:"Upgrade"})})]})]})}},30117:(e,t,s)=>{s.d(t,{b:()=>h});var r=s(80263),a=s(95137),n=s.n(a),l=s(35485),o=s(83759),i=s(21329),d=s(77406),c=s(77191),u=s.n(c),m=s(53239),x=s(73969),f=s(70979),p=s(64495),g=s(22554);let h=e=>{let{iconOnly:t=!1,type:s="default",text:a="Export",align:c="start",results:h,fileName:y,onDownloadAsCSV:j,onCopyAsMarkdown:v,onCopyAsJSON:w}=e,b=h.map(e=>{let t={...e};return Object.keys(e).forEach(s=>{"object"==typeof e[s]&&(t[s]=JSON.stringify(e[s]))}),t}),N=(0,m.useMemo)(()=>{if(h){let e=Array.from(h)[0];if(e)return Object.keys(e)}},[h]),S=()=>{let e=new Blob([u().unparse(b,{columns:N})],{type:"text/csv;charset=utf-8;"});n()(e,"".concat(y,".csv")),x.oR.success("Downloading results as CSV"),null==j||j()};return(0,r.jsxs)(p.rI,{"data-sentry-element":"DropdownMenu","data-sentry-component":"DownloadResultsButton","data-sentry-source-file":"DownloadResultsButton.tsx",children:[(0,r.jsx)(p.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"DownloadResultsButton.tsx",children:(0,r.jsx)(g.$,{type:s,icon:t?(0,r.jsx)(l.A,{}):void 0,iconRight:t?void 0:(0,r.jsx)(o.A,{}),disabled:0===h.length,className:t?"w-7":"","data-sentry-element":"Button","data-sentry-source-file":"DownloadResultsButton.tsx",children:!t&&a})}),(0,r.jsxs)(p.SQ,{align:c,className:"w-44","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"DownloadResultsButton.tsx",children:[(0,r.jsxs)(p._2,{className:"gap-x-2",onClick:()=>S(),"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"DownloadResultsButton.tsx",children:[(0,r.jsx)(l.A,{size:14,"data-sentry-element":"Download","data-sentry-source-file":"DownloadResultsButton.tsx"}),(0,r.jsx)("p",{children:"Download CSV"})]}),(0,r.jsxs)(p._2,{onClick:()=>{if(navigator){0==b.length&&(0,x.oR)("Results are empty");let e=Object.keys(b[0]),t=b.map(t=>{let s=[];return e.forEach(e=>s.push(t[e])),s}),s=[e].concat(t),r=(0,d.Q)(s);(0,f.l)(r,()=>{x.oR.success("Copied results to clipboard"),null==v||v()})}},className:"gap-x-2","data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"DownloadResultsButton.tsx",children:[(0,r.jsx)(i.A,{size:14,"data-sentry-element":"Clipboard","data-sentry-source-file":"DownloadResultsButton.tsx"}),(0,r.jsx)("p",{children:"Copy as markdown"})]}),(0,r.jsxs)(p._2,{onClick:()=>{if(navigator){if(0===h.length)return(0,x.oR)("Results are empty");(0,f.l)(JSON.stringify(h,null,2),()=>{x.oR.success("Copied results to clipboard"),null==w||w()})}},className:"gap-x-2","data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"DownloadResultsButton.tsx",children:[(0,r.jsx)(i.A,{size:14,"data-sentry-element":"Clipboard","data-sentry-source-file":"DownloadResultsButton.tsx"}),(0,r.jsx)("p",{children:"Copy as JSON"})]})]})]})}},49300:(e,t,s)=>{s.d(t,{B:()=>o});var r=s(49629);let a={search:"",timestampStart:"",timestampEnd:"",filters:{}},n=e=>(0,r.Cp)({parse:t=>null!=t?t:e,serialize:e=>e||""}),l=e=>(0,r.Cp)({parse:t=>{if(!t)return e;try{return JSON.parse(t)}catch(t){return e}},serialize:e=>{if(!e)return"";try{return JSON.stringify(e)}catch(e){return""}}});function o(){let[e,t]=(0,r.ZA)("s",n(a.search)),[s,o]=(0,r.ZA)("its",n(a.timestampStart)),[i,d]=(0,r.ZA)("ite",n(a.timestampEnd)),[c,u]=(0,r.ZA)("log",n("")),[m,x]=(0,r.ZA)("f",l(a.filters)),f=e||a.search,p=s||a.timestampStart,g=i||a.timestampEnd,h=m||a.filters,y=e=>{t(e||a.search)},j=e=>{x(e||a.filters)};return{search:f,timestampStart:p,timestampEnd:g,selectedLogId:c||null,filters:h,setSearch:y,setTimeRange:(e,t)=>{o(e||a.timestampStart),d(t||a.timestampEnd)},setSelectedLogId:e=>{u(e||"")},setFilters:j,updateFilter:(e,t)=>{j({...h,[e]:t})},reset:()=>{y(a.search),o(a.timestampStart),d(a.timestampEnd),u(""),x(a.filters)}}}},57080:(e,t,s)=>{s.d(t,{g:()=>l});var r=s(37578),a=s(53239),n=s(52445);let l=e=>{var t;let{data:s}=(0,n.s)(),[l,o]=(0,a.useState)(!1),i=(0,r.eu)(e,null==s||null==(t=s.plan)?void 0:t.id);return(0,a.useEffect)(()=>{i&&o(!0)},[e]),{showUpgradePrompt:l,setShowUpgradePrompt:o,shouldShowUpgradePrompt:i}}},58246:(e,t,s)=>{s.d(t,{y:()=>l});var r=s(80263),a=s(27969);let n=()=>(0,r.jsx)("div",{className:"relative flex h-4 w-32 items-center rounded border border-dashed border-stronger px-2","data-sentry-component":"EmptyStateRow","data-sentry-source-file":"LogsTableEmptyState.tsx"});function l(e){let{title:t="No results found",description:s="Try another search or adjust the filters"}=e;return(0,r.jsxs)("div",{className:"flex scale-100 flex-col items-center justify-center gap-6 text-center opacity-100 h-full","data-sentry-component":"LogsTableEmptyState","data-sentry-source-file":"LogsTableEmptyState.tsx",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1 relative",children:[(0,r.jsx)(n,{"data-sentry-element":"EmptyStateRow","data-sentry-source-file":"LogsTableEmptyState.tsx"}),(0,r.jsx)(n,{"data-sentry-element":"EmptyStateRow","data-sentry-source-file":"LogsTableEmptyState.tsx"}),(0,r.jsx)(n,{"data-sentry-element":"EmptyStateRow","data-sentry-source-file":"LogsTableEmptyState.tsx"}),(0,r.jsx)(a.A,{size:30,className:"absolute right-3 -bottom-2 text-foreground-lighter","data-sentry-element":"Search","data-sentry-source-file":"LogsTableEmptyState.tsx"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-1 px-5",children:[(0,r.jsx)("h3",{className:"text-lg text-foreground",children:t}),(0,r.jsx)("p",{className:"text-sm max-w-xs text-foreground-lighter",children:s})]})]})}},70603:(e,t,s)=>{s.d(t,{O:()=>S});var r=s(80263),a=s(53434),n=s.n(a),l=s(80173),o=s(33795),i=s(43474),d=s(72343),c=s(53239),u=s(38887),m=s.n(u),x=s(34531),f=s(77376),p=s(92949),g=s(84558),h=s(91041),y=s(2857),j=s(70979),v=s(51509),w=s(22554),b=s(80127),N=s(56390);let S=e=>{let{onSubmit:t,helpers:s,value:a,buttonTriggerProps:u,popoverContentProps:S,hideWarnings:C}=e,[D,T]=(0,c.useState)(!1),k=(0,c.useRef)(null);(0,c.useEffect)(()=>{if(!D){R(a.from?new Date(a.from):null),_(a.to?new Date(a.to):new Date);let e=a.from?new Date(a.from):null,t=a.to?new Date(a.to):null;H({HH:(null==e?void 0:e.getHours().toString().padStart(2,"0"))||"00",mm:(null==e?void 0:e.getMinutes().toString().padStart(2,"0"))||"00",ss:(null==e?void 0:e.getSeconds().toString().padStart(2,"0"))||"00"});let s=new Date,r=s.getHours().toString().padStart(2,"0"),n=s.getMinutes().toString().padStart(2,"0"),l=s.getSeconds().toString().padStart(2,"0");M({HH:(null==t?void 0:t.getHours().toString().padStart(2,"0"))||r,mm:(null==t?void 0:t.getMinutes().toString().padStart(2,"0"))||n,ss:(null==t?void 0:t.getSeconds().toString().padStart(2,"0"))||l})}},[D,a]);let[E,R]=(0,c.useState)(a.from?new Date(a.from):null),[L,_]=(0,c.useState)(a.to?new Date(a.to):new Date),[A,H]=(0,c.useState)({HH:(null==E?void 0:E.getHours().toString())||"00",mm:(null==E?void 0:E.getMinutes().toString())||"00",ss:(null==E?void 0:E.getSeconds().toString())||"00"}),[P,M]=(0,c.useState)({HH:(null==L?void 0:L.getHours().toString())||"23",mm:(null==L?void 0:L.getMinutes().toString())||"59",ss:(null==L?void 0:L.getSeconds().toString())||"59"}),[I,z]=(0,c.useState)(!1),[O,B]=(0,c.useState)(!1);function F(){navigator.clipboard.readText().then(e=>{try{let t=JSON.parse(e);if(!t.from||!t.to)return void console.warn("Invalid date range format in clipboard");let s=new Date(t.from),r=new Date(t.to);if(isNaN(s.getTime())||isNaN(r.getTime()))return void console.warn("Invalid date values in clipboard");R(s),_(r),H({HH:s.getHours().toString(),mm:s.getMinutes().toString(),ss:s.getSeconds().toString()}),M({HH:r.getHours().toString(),mm:r.getMinutes().toString(),ss:r.getSeconds().toString()}),B(!0)}catch(e){console.warn("Failed to parse clipboard content as date range:",e)}}).catch(e=>{console.warn("Failed to read clipboard:",e)})}function $(){if(!E||!L)return;let e=new Date(E),t=new Date(L);e.setHours(+A.HH,+A.mm,+A.ss),t.setHours(+P.HH,+P.mm,+P.ss),(0,j.l)(JSON.stringify({from:e.toISOString(),to:t.toISOString()})),z(!0)}(0,c.useEffect)(()=>{I&&setTimeout(()=>{z(!1)},2e3)},[I]),(0,c.useEffect)(()=>{O&&setTimeout(()=>{B(!1)},2e3)},[O]),(0,c.useEffect)(()=>(D&&(document.addEventListener("paste",F),document.addEventListener("copy",$)),()=>{document.removeEventListener("paste",F),document.removeEventListener("copy",$)}),[D,E,L]);let U=Math.abs(n()(E).diff(n()(L),"days"))>N.VM-1,{plan:J,isLoading:q}=(0,y.c)(),W=e=>{var t;return!(!e||!(null==(t=e.availableIn)?void 0:t.length)||e.availableIn.includes("free")||e.availableIn.includes((null==J?void 0:J.id)||"free")&&!q)};return(0,r.jsxs)(v.AM,{open:D,onOpenChange:T,"data-sentry-element":"Popover_Shadcn_","data-sentry-component":"LogsDatePicker","data-sentry-source-file":"Logs.DatePickers.tsx",children:[(0,r.jsx)(v.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"Logs.DatePickers.tsx",children:(0,r.jsx)(w.$,{type:"default",icon:(0,r.jsx)(l.A,{size:12}),...u,"data-sentry-element":"Button","data-sentry-source-file":"Logs.DatePickers.tsx",children:a.isHelper?a.text:"".concat(n()(a.from).format("DD MMM, HH:mm")," - ").concat(n()(a.to||new Date).format("DD MMM, HH:mm"))})}),(0,r.jsxs)(v.hl,{className:"flex w-full p-0",side:"bottom",align:"end",portal:!0,...S,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"Logs.DatePickers.tsx",children:[(0,r.jsx)(p.z6,{onValueChange:e=>{let r=s.find(t=>t.text===e);t&&r&&t({to:r.calcTo(),from:r.calcFrom(),isHelper:!0,text:r.text}),T(!1)},value:a.isHelper?a.text:"",className:"border-r p-2 flex flex-col gap-px","data-sentry-element":"RadioGroup","data-sentry-source-file":"Logs.DatePickers.tsx",children:s.map(e=>{var t;return(0,r.jsxs)(f.J,{className:(0,b.cn)("[&:has([data-state=checked])]:bg-background-overlay-hover [&:has([data-state=checked])]:text-foreground px-4 py-1.5 text-foreground-light flex items-center gap-2 hover:bg-background-overlay-hover hover:text-foreground transition-all rounded-sm text-xs w-full",{"cursor-not-allowed pointer-events-none opacity-50":e.disabled}),children:[(0,r.jsx)(p.CU,{hidden:!0,value:e.text,disabled:e.disabled,"aria-disabled":e.disabled},e.text),e.text,W(e)?(0,r.jsx)(x.E,{size:"small",variant:"outline",className:"h-5 text-[10px] text-foreground-light capitalize",children:(null==(t=e.availableIn)?void 0:t[0])||""}):null]},e.text)})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex p-2 gap-2 items-center",children:[(0,r.jsxs)("div",{className:"flex flex-grow *:flex-grow gap-2 font-mono",children:[(0,r.jsx)(h.K,{type:"start",startTime:A,endTime:P,time:A,setTime:H,setStartTime:H,setEndTime:M,startDate:E,endDate:L,"data-sentry-element":"TimeSplitInput","data-sentry-source-file":"Logs.DatePickers.tsx"}),(0,r.jsx)(h.K,{type:"end",startTime:A,endTime:P,time:P,setTime:M,setStartTime:H,setEndTime:M,startDate:E,endDate:L,"data-sentry-element":"TimeSplitInput","data-sentry-source-file":"Logs.DatePickers.tsx"})]}),(0,r.jsx)("div",{className:"flex-shrink",children:(0,r.jsx)(g.G,{tooltip:{content:{text:"Clear time range"}},icon:(0,r.jsx)(o.A,{size:14}),type:"text",size:"tiny",className:"px-1.5",onClick:()=>{H({HH:"00",mm:"00",ss:"00"}),M({HH:"00",mm:"00",ss:"00"})},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"Logs.DatePickers.tsx"})})]}),(0,r.jsx)("div",{className:"p-2 border-t",children:(0,r.jsx)(m(),{inline:!0,selectsRange:!0,todayButton:(0,r.jsx)("div",{className:"sr-only",children:(0,r.jsx)(w.$,{type:"text",size:"tiny",ref:k,children:"Go to today"})}),onChange:e=>{!function(e){let[t,s]=e;R(t),_(s)}(e)},dateFormat:"MMMM d, yyyy h:mm aa",dayClassName:()=>"cursor-pointer",startDate:E,endDate:L,renderCustomHeader:e=>{let{date:t,decreaseMonth:s,increaseMonth:a,prevMonthButtonDisabled:l,nextMonthButtonDisabled:o}=e;return(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,r.jsx)(w.$,{onClick:s,disabled:l,icon:(0,r.jsx)(i.A,{size:14,strokeWidth:2}),type:"text",size:"tiny",className:"px-1.5"}),(0,r.jsx)("span",{className:"text-sm text-foreground-light",children:n()(t).format("MMMM YYYY")}),(0,r.jsx)(w.$,{onClick:a,disabled:o,icon:(0,r.jsx)(d.A,{size:14,strokeWidth:2}),type:"text",size:"tiny",className:"px-1.5"})]})})},"data-sentry-element":"DatePicker","data-sentry-source-file":"Logs.DatePickers.tsx"})}),U&&!C&&(0,r.jsxs)("div",{className:"text-xs px-3 py-1.5 border-y bg-warning-300 text-warning-foreground border-warning-500 text-warning-600",children:["Large ranges may result in memory errors for ",(0,r.jsx)("br",{})," big projects."]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2 p-2 border-t",children:[E&&L?(0,r.jsx)(w.$,{type:"text",size:"tiny",onClick:$,className:(0,b.cn)({"text-brand-600":I||O}),children:I?"Copied!":O?"Pasted!":"Copy range"}):null,(0,r.jsx)(w.$,{type:"default",onClick:()=>{k.current&&k.current.click(),R(new Date),_(new Date)},"data-sentry-element":"Button","data-sentry-source-file":"Logs.DatePickers.tsx",children:"Today"}),(0,r.jsx)(w.$,{onClick:function(){let e=E||new Date,s=L||new Date,r=new Date(e.setHours(+A.HH,+A.mm,+A.ss)),a=new Date(s.setHours(+P.HH,+P.mm,+P.ss));t({from:r.toISOString(),to:a.toISOString(),isHelper:!1}),T(!1)},"data-sentry-element":"Button","data-sentry-source-file":"Logs.DatePickers.tsx",children:"Apply"})]})]})]})]})}},92737:(e,t,s)=>{s.d(t,{K:()=>g,T:()=>j});var r=s(80263),a=s(53239),n=s(70979),l=s(80127),o=s(35741),i=s(53434),d=s.n(i),c=s(27344),u=s.n(c),m=s(37361),x=s.n(m);d().extend(u()),d().extend(x());let f=e=>d().unix(Number(e)/1e3/1e3).toISOString(),p=e=>{let t=16===String(e).length;return!Number.isNaN(Number(e))&&t},g=e=>{let{utcTimestamp:t,format:s}=e,r=p(t)?f(t):t;return d().utc(r).local().format(s)},h=e=>{let{utcTimestamp:t,format:s}=e,r=p(t)?f(t):t;return d().utc(r).format(s)},y=e=>{let{utcTimestamp:t}=e,s=p(t)?f(t):t;return d().utc(s).fromNow()},j=e=>{let{utcTimestamp:t,className:s,displayAs:i="local",format:d="DD MMM  HH:mm:ss",labelFormat:c="DD MMM HH:mm:ss"}=e,u=g({utcTimestamp:t,format:d}),m=h({utcTimestamp:t,format:d}),x=y({utcTimestamp:t}),[f,p]=(0,a.useState)("start"),j=(0,a.useRef)(null),v=Intl.DateTimeFormat().resolvedOptions().timeZone;(0,a.useEffect)(()=>{let e=()=>{if(j.current){let e=j.current.getBoundingClientRect(),t=window.innerHeight;p(e.top<t/2?"start":"end")}};return e(),window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[]);let w=e=>{let{label:t,value:s}=e,[o,i]=(0,a.useState)(!1);return(0,r.jsxs)("div",{onPointerDown:e=>{e.stopPropagation()},onMouseDown:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),e.preventDefault(),(0,n.l)(s,()=>{i(!0),setTimeout(()=>{i(!1)},1e3)})},className:(0,l.cn)("relative cursor-pointer flex gap-y-2 gap-x-0.5 hover:bg-surface-100 px-2 py-1 group",{"bg-surface-100":o}),"data-sentry-component":"TooltipRow","data-sentry-source-file":"index.tsx",children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2 text-left truncate",children:[(0,r.jsx)("p",{children:t}),(0,r.jsx)("div",{className:"border-t w-full border-dashed"})]}),(0,r.jsxs)("div",{className:"relative flex items-center gap-x-2 flex-grow",children:[(0,r.jsx)("div",{className:"border-t w-full border-dashed z-10"}),o&&(0,r.jsx)("span",{className:"flex items-center justify-end w-full absolute inset-0 flex items-right text-brand-600 bg-surface-100",children:"Copied!"}),(0,r.jsx)("span",{className:"flex items-center gap-x-2 justify-end whitespace-nowrap",children:s})]})]})};return(0,r.jsxs)(o.m_,{"data-sentry-element":"Tooltip","data-sentry-component":"TimestampInfo","data-sentry-source-file":"index.tsx",children:[(0,r.jsx)(o.k$,{asChild:!0,ref:j,className:"text-xs ".concat(s," border-b border-transparent hover:border-dashed hover:border-foreground-light"),"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"index.tsx",children:(0,r.jsx)("span",{children:"local"===i?g({utcTimestamp:t,format:c}):h({utcTimestamp:t,format:c})})}),(0,r.jsxs)(o.ZI,{align:f,side:"right",className:"font-mono p-0 py-1 min-w-80","data-sentry-element":"TooltipContent","data-sentry-source-file":"index.tsx",children:[(0,r.jsx)(w,{label:"UTC",value:m,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,r.jsx)(w,{label:v,value:u,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,r.jsx)(w,{label:"Relative",value:x,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,r.jsx)(w,{label:"Timestamp",value:String(t),"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"})]})]})}},94110:(e,t,s)=>{s.d(t,{t:()=>a});var r=s(49629);function a(){return(0,r.ZA)("log")}}}]);